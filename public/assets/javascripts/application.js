!function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){function r(){return{welcome:"Welcome to the chatroom! You are signed in as "+u.currentUser().name,messages:c.currentMessages,onkeydown:o}}function i(e){return a("div.chat-wrap",[a("div.welcome",e.welcome),a("div.msg-list-wrap",{config:s},[a("div.msg-list",e.messages().map(function(e){return a.component(l,e)}))]),a("textarea.msg-box",{autofocus:1,rows:3,onkeydown:e.onkeydown})])}function s(e){e.scrollTop=e.scrollHeight}function o(e){return 13===e.keyCode?(c.postMessage(e.target.value),e.target.value="",!1):void 0}var a=e("mithril"),u=e("./user.services"),c=e("./message.services"),l=e("./message.component");t.exports={controller:r,view:i}},{"./message.component":4,"./message.services":5,"./user.services":6,mithril:9}],2:[function(e,t,n){var r=e("mithril"),i=e("./chatroom.services"),s=e("./chatroom.component");i.init().then(function(){r.mount(document.body,s)})},{"./chatroom.component":1,"./chatroom.services":3,mithril:9}],3:[function(e,t,n){function r(){return i.init().then(s.init)}var i=e("./user.services"),s=e("./message.services");t.exports={init:r}},{"./message.services":5,"./user.services":6}],4:[function(e,t,n){function r(e){var t=e.user.id===d.currentUser().id,n=t?"You":e.user.name,r=e.text&&e.text.trim().length?e.text:l.trust("&nbsp;");return{id:e.id,name:n,time:h(e.created_at).format("HH:mm:ss"),text:r,color:u(e,t),type:e.type,isCU:t,isPrivate:e.is_private}}function i(e){var t=["clearfix"];return"BobMessage"===e.type&&t.push("msg-bob"),e.isPrivate&&t.push("msg-private"),e.isCU?t.push("msg-self"):t.push("msg-other"),l("div.msg-wrap",{id:"msg-"+e.id,"class":t.join(" ")},[s(e)])}function s(e){switch(e.type){case"UserMessage":case"BobMessage":return o(e);case"JoinMessage":case"LeaveMessage":return a(e)}}function o(e){return document.styleSheets[0].addRule("#msg-"+e.id+" .bubble:before","border-color: transparent "+e.color),l("div.msg-user",[l("div.msg-meta",[l("div.msg-name",e.name),l("div.msg-time",e.time),l("div.msg-privacy",e.isPrivate?" (private)":"")]),l("div.bubble",{style:{borderColor:e.color}},[l("div.msg-body",e.text)])])}function a(e){var t=e.name+" "+("JoinMessage"===e.type?"joined":"left")+" the chat";return[l("div.well.well-sm",t)]}function u(e,t){return"BobMessage"===e.type?"#CCC":t?"#444":p[e.user.id]||(p[e.user.id]=c())}function c(){return f({luminosity:"light",hue:"random"})}var l=e("mithril"),h=e("moment"),f=e("randomcolor"),d=e("./user.services"),p={};t.exports={controller:r,view:i}},{"./user.services":6,mithril:9,moment:10,randomcolor:11}],5:[function(e,t,n){function r(){s(),c()}function i(e){return l.request({method:"POST",url:"/api/messages",config:d.configAuth,data:{message:{text:e}}})}function s(){o().then(a)}function o(e){return l.request({method:"GET",url:"/api/messages?since="+u().toISOString(),config:d.configAuth,unwrapSuccess:function(e){return e.messages}})}function a(e){var t=h(u()),n=p();e.forEach(function(e){h(e.created_at).isAfter(t)&&n.push(e)}),p(n)}function u(){var e=p();return e.length?h(e[e.length-1].created_at):h.utc().subtract(10,"minutes")}function c(){var e=new f.Client("/faye");e.subscribe("/public_messages",s),e.subscribe("/private_messages/"+d.currentUser().token,s)}var l=e("mithril"),h=e("moment"),f=e("faye/browser/faye-browser"),d=e("./user.services"),p=l.prop([]);t.exports={init:r,postMessage:i,currentMessages:p}},{"./user.services":6,"faye/browser/faye-browser":8,mithril:9,moment:10}],6:[function(e,t,n){function r(){return i().then(function(e){return u=e,!l&&window.localStorage&&window.localStorage.setItem("token",e.token),a(),e})}function i(){return c.request({method:"POST",url:"/api/users",config:o,unwrapSuccess:function(e){return e.user}})}function s(){return c.request({method:"DELETE",url:"/api/users",config:o})}function o(e){var t=u&&u.token||l;t&&e.setRequestHeader("Authorization","Bearer "+t)}function a(){window.onbeforeunload=function(){return s(),null}}var u,c=e("mithril"),l=(e("moment"),window.localStorage&&window.localStorage.getItem("token"));t.exports={init:r,currentUser:function(){return u},configAuth:o}},{mithril:9,moment:10}],7:[function(e,t,n){function r(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&i()}function i(){if(!l){var e=setTimeout(r);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a[h].run();h=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function s(e,t){this.fun=e,this.array=t}function o(){}var a,u=t.exports={},c=[],l=!1,h=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new s(e,t)),1!==c.length||l||setTimeout(i,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],8:[function(require,module,exports){(function(process,global){!function(){"use strict";var Faye={VERSION:"1.1.1",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:"undefined"!=typeof window?window:global,extend:function(e,t,n){if(!t)return e;for(var r in t)t.hasOwnProperty(r)&&(e.hasOwnProperty(r)&&n===!1||e[r]!==t[r]&&(e[r]=t[r]));return e},random:function(e){e=e||this.ID_LENGTH;for(var t=Math.ceil(e*Math.log(2)/Math.log(36)),n=csprng(e,36);n.length<t;)n="0"+n;return n},validateOptions:function(e,t){for(var n in e)if(this.indexOf(t,n)<0)throw new Error("Unrecognized option: "+n)},clientIdFromMessages:function(e){var t=this.filter([].concat(e),function(e){return"/meta/connect"===e.channel});return t[0]&&t[0].clientId},copyObject:function(e){var t,n,r;if(e instanceof Array){for(t=[],n=e.length;n--;)t[n]=Faye.copyObject(e[n]);return t}if("object"==typeof e){t=null===e?null:{};for(r in e)t[r]=Faye.copyObject(e[r]);return t}return e},commonElement:function(e,t){for(var n=0,r=e.length;r>n;n++)if(-1!==this.indexOf(t,e[n]))return e[n];return null},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},map:function(e,t,n){if(e.map)return e.map(t,n);var r=[];if(e instanceof Array)for(var i=0,s=e.length;s>i;i++)r.push(t.call(n||null,e[i],i));else for(var o in e)e.hasOwnProperty(o)&&r.push(t.call(n||null,o,e[o]));return r},filter:function(e,t,n){if(e.filter)return e.filter(t,n);for(var r=[],i=0,s=e.length;s>i;i++)t.call(n||null,e[i],i)&&r.push(e[i]);return r},asyncEach:function(e,t,n,r){var i=e.length,s=-1,o=0,a=!1,u=function(){return o-=1,s+=1,s===i?n&&n.call(r):void t(e[s],l)},c=function(){if(!a){for(a=!0;o>0;)u();a=!1}},l=function(){o+=1,c()};l()},toJSON:function(e){return this.stringify?this.stringify(e,function(e,t){return this[e]instanceof Array?this[e]:t}):JSON.stringify(e)}};"undefined"!=typeof module?module.exports=Faye:"undefined"!=typeof window&&(window.Faye=Faye),Faye.Class=function(e,t){"function"!=typeof e&&(t=e,e=Object);var n=function(){return this.initialize?this.initialize.apply(this,arguments)||this:this},r=function(){};return r.prototype=e.prototype,n.prototype=new r,Faye.extend(n.prototype,t),n},function(){function e(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1}var t=Faye.EventEmitter=function(){},n="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||n(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var r=Array.prototype.slice.call(arguments,1);t.apply(this,r)}return!0}if(n(t)){for(var r=Array.prototype.slice.call(arguments,1),i=t.slice(),s=0,o=i.length;o>s;s++)i[s].apply(this,r);return!0}return!1},t.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",e,t),this._events[e]?n(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){var n=this;return n.on(e,function r(){n.removeListener(e,r),t.apply(this,arguments)}),this},t.prototype.removeListener=function(t,r){if("function"!=typeof r)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[t])return this;var i=this._events[t];if(n(i)){var s=e(i,r);if(0>s)return this;i.splice(s,1),0==i.length&&delete this._events[t]}else this._events[t]===r&&delete this._events[t];return this},t.prototype.removeAllListeners=function(e){return 0===arguments.length?(this._events={},this):(e&&this._events&&this._events[e]&&(this._events[e]=null),this)},t.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),n(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}(),Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(e){return this._used.hasOwnProperty(e)},generate:function(){for(var e=Faye.random();this._used.hasOwnProperty(e);)e=Faye.random();return this._used[e]=e},release:function(e){delete this._used[e]}}),function(){var e,t=setTimeout;e="function"==typeof setImmediate?function(e){setImmediate(e)}:"object"==typeof process&&process.nextTick?function(e){process.nextTick(e)}:function(e){t(e,0)};var n=0,r=1,i=2,s=function(e){return e},o=function(e){throw e},a=function(e){if(this._state=n,this._onFulfilled=[],this._onRejected=[],"function"==typeof e){var t=this;e(function(e){f(t,e)},function(e){p(t,e)})}};a.prototype.then=function(e,t){var n=new a;return u(this,e,n),c(this,t,n),n};var u=function(e,t,i){"function"!=typeof t&&(t=s);var o=function(e){l(t,e,i)};e._state===n?e._onFulfilled.push(o):e._state===r&&o(e._value)},c=function(e,t,r){"function"!=typeof t&&(t=o);var s=function(e){l(t,e,r)};e._state===n?e._onRejected.push(s):e._state===i&&s(e._reason)},l=function(t,n,r){e(function(){h(t,n,r)})},h=function(e,t,n){var r;try{r=e(t)}catch(i){return p(n,i)}r===n?p(n,new TypeError("Recursive promise chain detected")):f(n,r)},f=a.fulfill=a.resolve=function(e,t){var n,r,i=!1;try{if(n=typeof t,r=null!==t&&("function"===n||"object"===n)&&t.then,"function"!=typeof r)return d(e,t);r.call(t,function(t){i^(i=!0)&&f(e,t)},function(t){i^(i=!0)&&p(e,t)})}catch(s){if(!(i^(i=!0)))return;p(e,s)}},d=function(e,t){if(e._state===n){e._state=r,e._value=t,e._onRejected=[];for(var i,s=e._onFulfilled;i=s.shift();)i(t)}},p=a.reject=function(e,t){if(e._state===n){e._state=i,e._reason=t,e._onFulfilled=[];for(var r,s=e._onRejected;r=s.shift();)r(t)}};a.all=function(e){return new a(function(t,n){var r,i=[],s=e.length;if(0===s)return t(i);for(r=0;s>r;r++)(function(e,r){a.fulfilled(e).then(function(e){i[r]=e,0===--s&&t(i)},n)})(e[r],r)})},a.defer=e,a.deferred=a.pending=function(){var e={};return e.promise=new a(function(t,n){e.fulfill=e.resolve=t,e.reject=n}),e},a.fulfilled=a.resolved=function(e){return new a(function(t,n){t(e)})},a.rejected=function(e){return new a(function(t,n){n(e)})},"undefined"==typeof Faye?module.exports=a:Faye.Promise=a}(),Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(e){var t=void 0!==e.id?e.id:e;return this._index.hasOwnProperty(t)?!1:(this._index[t]=e,!0)},forEach:function(e,t){for(var n in this._index)this._index.hasOwnProperty(n)&&e.call(t,this._index[n])},isEmpty:function(){for(var e in this._index)if(this._index.hasOwnProperty(e))return!1;return!0},member:function(e){for(var t in this._index)if(this._index[t]===e)return!0;return!1},remove:function(e){var t=void 0!==e.id?e.id:e,n=this._index[t];return delete this._index[t],n},toArray:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),Faye.URI={isURI:function(e){return e&&e.protocol&&e.host&&e.path},isSameOrigin:function(e){var t=Faye.ENV.location;return e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port},parse:function(e){if("string"!=typeof e)return e;var t,n,r,i,s,o,a={},u=function(t,n){e=e.replace(n,function(e){return a[t]=e,""}),a[t]=a[t]||""};for(u("protocol",/^[a-z]+\:/i),u("host",/^\/\/[^\/\?#]+/),/^\//.test(e)||a.host||(e=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+e),u("pathname",/^[^\?#]*/),u("search",/^\?[^#]*/),u("hash",/^#.*/),a.protocol=a.protocol||Faye.ENV.location.protocol,a.host?(a.host=a.host.substr(2),t=a.host.split(":"),a.hostname=t[0],a.port=t[1]||""):(a.host=Faye.ENV.location.host,a.hostname=Faye.ENV.location.hostname,a.port=Faye.ENV.location.port),a.pathname=a.pathname||"/",a.path=a.pathname+a.search,n=a.search.replace(/^\?/,""),r=n?n.split("&"):[],o={},i=0,s=r.length;s>i;i++)t=r[i].split("="),o[decodeURIComponent(t[0]||"")]=decodeURIComponent(t[1]||"");return a.query=o,a.href=this.stringify(a),a},stringify:function(e){var t=e.protocol+"//"+e.hostname;return e.port&&(t+=":"+e.port),t+=e.pathname+this.queryString(e.query)+(e.hash||"")},queryString:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return 0===t.length?"":"?"+t.join("&")}},Faye.Error=Faye.Class({initialize:function(e,t,n){this.code=e,this.params=Array.prototype.slice.call(t),this.message=n},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}}),Faye.Error.parse=function(e){if(e=e||"",!Faye.Grammar.ERROR.test(e))return new this(null,[],e);var t=e.split(":"),n=parseInt(t[0]),r=t[1].split(","),e=t[2];return new this(n,r,e)},Faye.Error.versionMismatch=function(){return new this(300,arguments,"Version mismatch").toString()},Faye.Error.conntypeMismatch=function(){return new this(301,arguments,"Connection types not supported").toString()},Faye.Error.extMismatch=function(){return new this(302,arguments,"Extension mismatch").toString()},Faye.Error.badRequest=function(){return new this(400,arguments,"Bad request").toString()},Faye.Error.clientUnknown=function(){return new this(401,arguments,"Unknown client").toString()},Faye.Error.parameterMissing=function(){return new this(402,arguments,"Missing required parameter").toString()},Faye.Error.channelForbidden=function(){return new this(403,arguments,"Forbidden channel").toString()},Faye.Error.channelUnknown=function(){return new this(404,arguments,"Unknown channel").toString()},Faye.Error.channelInvalid=function(){return new this(405,arguments,"Invalid channel").toString()},Faye.Error.extUnknown=function(){return new this(406,arguments,"Unknown extension").toString()},Faye.Error.publishFailed=function(){return new this(407,arguments,"Failed to publish").toString()},Faye.Error.serverError=function(){return new this(500,arguments,"Internal server error").toString()},Faye.Deferrable={then:function(e,t){var n=this;return this._promise||(this._promise=new Faye.Promise(function(e,t){n._fulfill=e,n._reject=t})),0===arguments.length?this._promise:this._promise.then(e,t)},callback:function(e,t){return this.then(function(n){e.call(t,n)})},errback:function(e,t){return this.then(null,function(n){e.call(t,n)})},timeout:function(e,t){this.then();var n=this;this._timer=Faye.ENV.setTimeout(function(){n._reject(t)},1e3*e)},setDeferredStatus:function(e,t){this._timer&&Faye.ENV.clearTimeout(this._timer),this.then(),"succeeded"===e?this._fulfill(t):"failed"===e?this._reject(t):delete this._promise}},Faye.Publisher={countListeners:function(e){return this.listeners(e).length},bind:function(e,t,n){var r=Array.prototype.slice,i=function(){t.apply(n,r.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([e,t,n,i]),this.on(e,i)},unbind:function(e,t,n){this._listeners=this._listeners||[];for(var r,i=this._listeners.length;i--;)r=this._listeners[i],r[0]===e&&(!t||r[1]===t&&r[2]===n)&&(this._listeners.splice(i,1),this.removeListener(e,r[3]))}},Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype),Faye.Publisher.trigger=Faye.Publisher.emit,Faye.Timeouts={addTimeout:function(e,t,n,r){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(e)){var i=this;this._timeouts[e]=Faye.ENV.setTimeout(function(){delete i._timeouts[e],n.call(r)},1e3*t)}},removeTimeout:function(e){this._timeouts=this._timeouts||{};var t=this._timeouts[e];t&&(Faye.ENV.clearTimeout(t),delete this._timeouts[e])},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var e in this._timeouts)this.removeTimeout(e)}},Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(e,t){if(Faye.logger){var n=Array.prototype.slice.apply(e),r="[Faye",i=this.className,s=n.shift().replace(/\?/g,function(){try{return Faye.toJSON(n.shift())}catch(e){return"[Object]"}});for(var o in Faye)i||"function"==typeof Faye[o]&&this instanceof Faye[o]&&(i=o);i&&(r+="."+i),r+="] ","function"==typeof Faye.logger[t]?Faye.logger[t](r+s):"function"==typeof Faye.logger&&Faye.logger(r+s)}}},function(){for(var e in Faye.Logging.LOG_LEVELS)(function(e){Faye.Logging[e]=function(){this.writeLog(arguments,e)}})(e)}(),Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/},Faye.Extensible={addExtension:function(e){this._extensions=this._extensions||[],this._extensions.push(e),e.added&&e.added(this)},removeExtension:function(e){if(this._extensions)for(var t=this._extensions.length;t--;)this._extensions[t]===e&&(this._extensions.splice(t,1),e.removed&&e.removed(this))},pipeThroughExtensions:function(e,t,n,r,i){if(this.debug("Passing through ? extensions: ?",e,t),!this._extensions)return r.call(i,t);var s=this._extensions.slice(),o=function(t){if(!t)return r.call(i,t);var a=s.shift();if(!a)return r.call(i,t);var u=a[e];return u?void(u.length>=3?a[e](t,n,o):a[e](t,o)):o(t)};o(t)}},Faye.extend(Faye.Extensible,Faye.Logging),Faye.Channel=Faye.Class({initialize:function(e){this.id=this.name=e},push:function(e){this.trigger("message",e)},isUnused:function(){return 0===this.countListeners("message")}}),Faye.extend(Faye.Channel.prototype,Faye.Publisher),Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(e){var t=this.parse(e),n=["/**",e],r=t.slice();r[r.length-1]="*",n.push(this.unparse(r));for(var i=1,s=t.length;s>i;i++)r=t.slice(0,i),r.push("**"),n.push(this.unparse(r));return n},isValid:function(e){return Faye.Grammar.CHANNEL_NAME.test(e)||Faye.Grammar.CHANNEL_PATTERN.test(e)},parse:function(e){return this.isValid(e)?e.split("/").slice(1):null},unparse:function(e){return"/"+e.join("/")},isMeta:function(e){var t=this.parse(e);return t?t[0]===this.META:null},isService:function(e){var t=this.parse(e);return t?t[0]===this.SERVICE:null},isSubscribable:function(e){return this.isValid(e)?!this.isMeta(e)&&!this.isService(e):null},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var e=[];for(var t in this._channels)e.push(t);return e},remove:function(e){delete this._channels[e]},hasSubscription:function(e){return this._channels.hasOwnProperty(e)},subscribe:function(e,t,n){for(var r,i=0,s=e.length;s>i;i++){r=e[i];var o=this._channels[r]=this._channels[r]||new Faye.Channel(r);t&&o.bind("message",t,n)}},unsubscribe:function(e,t,n){var r=this._channels[e];return r?(r.unbind("message",t,n),r.isUnused()?(this.remove(e),!0):!1):!1},distributeMessage:function(e){for(var t=Faye.Channel.expand(e.channel),n=0,r=t.length;r>n;n++){var i=this._channels[t[n]];i&&i.trigger("message",e.data)}}})}),Faye.Publication=Faye.Class(Faye.Deferrable),Faye.Subscription=Faye.Class({initialize:function(e,t,n,r){this._client=e,this._channels=t,this._callback=n,this._context=r,this._cancelled=!1},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this._callback,this._context),this._cancelled=!0)},unsubscribe:function(){this.cancel()}}),Faye.extend(Faye.Subscription.prototype,Faye.Deferrable),Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(e,t){this.info("New client created for ?",e),t=t||{},Faye.validateOptions(t,["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._endpoint=e||this.DEFAULT_ENDPOINT,this._channels=new Faye.Channel.Set,this._dispatcher=new Faye.Dispatcher(this,this._endpoint,t),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(t.interval||this.INTERVAL),timeout:1e3*(t.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(e){return this._dispatcher.addWebsocketExtension(e)},disable:function(e){return this._dispatcher.disable(e)},setHeader:function(e,t){return this._dispatcher.setHeader(e,t)},handshake:function(e,t){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var n=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this._endpoint)),this._dispatcher.selectTransport(Faye.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(r){r.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=r.clientId,this._dispatcher.selectTransport(r.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),e&&Faye.Promise.defer(function(){e.call(t)})):(this.info("Handshake unsuccessful"),Faye.ENV.setTimeout(function(){n.handshake(e,t)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(e,t){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(e,t)},this);this.callback(e,t),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:Faye.Channel.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var e=new Faye.Publication;return this._sendMessage({channel:Faye.Channel.DISCONNECT,clientId:this._dispatcher.clientId},{},function(t){t.successful?(this._dispatcher.close(),e.setDeferredStatus("succeeded")):e.setDeferredStatus("failed",Faye.Error.parse(t.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new Faye.Channel.Set,e}},subscribe:function(e,t,n){if(e instanceof Array)return Faye.map(e,function(e){return this.subscribe(e,t,n)},this);var r=new Faye.Subscription(this,e,t,n),i=t===!0,s=this._channels.hasSubscription(e);return s&&!i?(this._channels.subscribe([e],t,n),r.setDeferredStatus("succeeded"),r):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,e),i||this._channels.subscribe([e],t,n),this._sendMessage({channel:Faye.Channel.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(i){if(!i.successful)return r.setDeferredStatus("failed",Faye.Error.parse(i.error)),this._channels.unsubscribe(e,t,n);var s=[].concat(i.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,s),r.setDeferredStatus("succeeded")},this)},this),r)},unsubscribe:function(e,t,n){if(e instanceof Array)return Faye.map(e,function(e){return this.unsubscribe(e,t,n)},this);var r=this._channels.unsubscribe(e,t,n);r&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,e),this._sendMessage({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:e},{},function(e){if(e.successful){var t=[].concat(e.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,t)}},this)},this)},publish:function(e,t,n){Faye.validateOptions(n||{},["attempts","deadline"]);var r=new Faye.Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,e,t),this._sendMessage({channel:e,data:t,clientId:this._dispatcher.clientId},n,function(e){e.successful?r.setDeferredStatus("succeeded"):r.setDeferredStatus("failed",Faye.Error.parse(e.error))},this)},this),r},_sendMessage:function(e,t,n,r){e.id=this._generateMessageId();var i=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",e,null,function(e){e&&(n&&(this._responseCallbacks[e.id]=[n,r]),this._dispatcher.sendMessage(e,i,t||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(e){var t,n=e.id;void 0!==e.successful&&(t=this._responseCallbacks[n],delete this._responseCallbacks[n]),this.pipeThroughExtensions("incoming",e,null,function(e){e&&(e.advice&&this._handleAdvice(e.advice),this._deliverMessage(e),t&&t[0].call(t[1],e))},this)},_handleAdvice:function(e){Faye.extend(this._advice,e),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(e){e.channel&&void 0!==e.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,e.channel,e.data),this._channels.distributeMessage(e))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var e=this;Faye.ENV.setTimeout(function(){e.connect()},this._advice.interval)}}),Faye.extend(Faye.Client.prototype,Faye.Deferrable),Faye.extend(Faye.Client.prototype,Faye.Publisher),Faye.extend(Faye.Client.prototype,Faye.Logging),Faye.extend(Faye.Client.prototype,Faye.Extensible),Faye.Dispatcher=Faye.Class({MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(e,t,n){this._client=e,this.endpoint=Faye.URI.parse(t),this._alternates=n.endpoints||{},this.cookies=Faye.Cookies&&new Faye.Cookies.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=n.retry||this.DEFAULT_RETRY,this._scheduler=n.scheduler||Faye.Scheduler,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=n.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var r=n.websocketExtensions;if(r){r=[].concat(r);for(var i=0,s=r.length;s>i;i++)this.addWebsocketExtension(r[i])}this.tls=n.tls||{},this.tls.ca=this.tls.ca||n.ca;for(var o in this._alternates)this._alternates[o]=Faye.URI.parse(this._alternates[o]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(e){return this._alternates[e]||this.endpoint},addWebsocketExtension:function(e){this.wsExtensions.push(e)},disable:function(e){this._disabled.push(e)},setHeader:function(e,t){this.headers[e]=t},close:function(){var e=this._transport;delete this._transport,e&&e.close()},getConnectionTypes:function(){return Faye.Transport.getConnectionTypes()},selectTransport:function(e){Faye.Transport.get(this,e,this._disabled,function(e){this.debug("Selected ? transport for ?",e.connectionType,Faye.URI.stringify(e.endpoint)),e!==this._transport&&(this._transport&&this._transport.close(),this._transport=e,this.connectionType=e.connectionType)},this)},sendMessage:function(e,t,n){n=n||{};var r,i=e.id,s=n.attempts,o=n.deadline&&(new Date).getTime()+1e3*n.deadline,a=this._envelopes[i];a||(r=new this._scheduler(e,{timeout:t,interval:this.retry,attempts:s,deadline:o}),a=this._envelopes[i]={message:e,scheduler:r}),this._sendEnvelope(a)},_sendEnvelope:function(e){if(this._transport&&!e.request&&!e.timer){var t=e.message,n=e.scheduler,r=this;if(!n.isDeliverable())return n.abort(),void delete this._envelopes[t.id];e.timer=Faye.ENV.setTimeout(function(){r.handleError(t)},1e3*n.getTimeout()),n.send(),e.request=this._transport.sendMessage(t)}},handleResponse:function(e){var t=this._envelopes[e.id];void 0!==e.successful&&t&&(t.scheduler.succeed(),delete this._envelopes[e.id],Faye.ENV.clearTimeout(t.timer)),this.trigger("message",e),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(e,t){var n=this._envelopes[e.id],r=n&&n.request,i=this;if(r){r.then(function(e){e&&e.abort&&e.abort()});var s=n.scheduler;s.fail(),Faye.ENV.clearTimeout(n.timer),n.request=n.timer=null,t?this._sendEnvelope(n):n.timer=Faye.ENV.setTimeout(function(){n.timer=null,i._sendEnvelope(n)},1e3*s.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}}),Faye.extend(Faye.Dispatcher.prototype,Faye.Publisher),Faye.extend(Faye.Dispatcher.prototype,Faye.Logging),Faye.Scheduler=function(e,t){this.message=e,this.options=t,this.attempts=0},Faye.extend(Faye.Scheduler.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var e=this.options.attempts,t=this.attempts,n=this.options.deadline,r=(new Date).getTime();return void 0!==e&&t>=e?!1:void 0!==n&&r>n?!1:!0},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),Faye.Transport=Faye.extend(Faye.Class({DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},SECURE_PROTOCOLS:["https:","wss:"],MAX_DELAY:0,batching:!0,initialize:function(e,t){this._dispatcher=e,this.endpoint=t,this._outbox=[],this._proxy=Faye.extend({},this._dispatcher.proxy),!this._proxy.origin&&Faye.NodeAdapter&&(this._proxy.origin=Faye.indexOf(this.SECURE_PROTOCOLS,this.endpoint.protocol)>=0?process.env.HTTPS_PROXY||process.env.https_proxy:process.env.HTTP_PROXY||process.env.http_proxy)},close:function(){},encode:function(e){
return""},sendMessage:function(e){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),e),this.batching?(this._outbox.push(e),this._flushLargeBatch(),this._promise=this._promise||new Faye.Promise,e.channel===Faye.Channel.HANDSHAKE?(this.addTimeout("publish",.01,this._flush,this),this._promise):(e.channel===Faye.Channel.CONNECT&&(this._connectMessage=e),this.addTimeout("publish",this.MAX_DELAY,this._flush,this),this._promise)):Faye.Promise.fulfilled(this.request([e]))},_flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),Faye.Promise.fulfill(this._promise,this.request(this._outbox)),delete this._promise,this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){var e=this.encode(this._outbox);if(!(e.length<this._dispatcher.maxRequestSize)){var t=this._outbox.pop();this._flush(),t&&this._outbox.push(t)}},_receive:function(e){if(e){e=[].concat(e),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,e);for(var t=0,n=e.length;n>t;t++)this._dispatcher.handleResponse(e[t])}},_handleError:function(e,t){e=[].concat(e),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,e);for(var n=0,r=e.length;r>n;n++)this._dispatcher.handleError(e[n])},_getCookies:function(){var e=this._dispatcher.cookies,t=Faye.URI.stringify(this.endpoint);return e?Faye.map(e.getCookiesSync(t),function(e){return e.cookieString()}).join("; "):""},_storeCookies:function(e){var t,n=this._dispatcher.cookies,r=Faye.URI.stringify(this.endpoint);if(e&&n){e=[].concat(e);for(var i=0,s=e.length;s>i;i++)t=Faye.Cookies.Cookie.parse(e[i]),n.setCookieSync(t,r)}}}),{get:function(e,t,n,r,i){var s=e.endpoint;Faye.asyncEach(this._transports,function(s,o){var a=s[0],u=s[1],c=e.endpointFor(a);return Faye.indexOf(n,a)>=0?o():Faye.indexOf(t,a)<0?(u.isUsable(e,c,function(){}),o()):void u.isUsable(e,c,function(t){if(!t)return o();var n=u.hasOwnProperty("create")?u.create(e,c):new u(e,c);r.call(i,n)})},function(){throw new Error("Could not find a usable connection type for "+Faye.URI.stringify(s))})},register:function(e,t){this._transports.push([e,t]),t.prototype.connectionType=e},getConnectionTypes:function(){return Faye.map(this._transports,function(e){return e[0]})},_transports:[]}),Faye.extend(Faye.Transport.prototype,Faye.Logging),Faye.extend(Faye.Transport.prototype,Faye.Timeouts),Faye.Event={_registry:[],on:function(e,t,n,r){var i=function(){n.call(r)};e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i),this._registry.push({_element:e,_type:t,_callback:n,_context:r,_handler:i})},detach:function(e,t,n,r){for(var i,s=this._registry.length;s--;)i=this._registry[s],e&&e!==i._element||t&&t!==i._type||n&&n!==i._callback||r&&r!==i._context||(i._element.removeEventListener?i._element.removeEventListener(i._type,i._handler,!1):i._element.detachEvent("on"+i._type,i._handler),this._registry.splice(s,1),i=null)}},void 0!==Faye.ENV.onunload&&Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event),"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o,a=gap,u=t[e];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(e)),"function"==typeof rep&&(u=rep.call(t,e,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(u)){for(s=u.length,n=0;s>n;n+=1)o[n]=str(n,u)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+a+"]":"["+o.join(",")+"]",gap=a,i}if(rep&&"object"==typeof rep)for(s=rep.length,n=0;s>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,u),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(i=str(r,u),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+a+"}":"{"+o.join(",")+"}",gap=a,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;Faye.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},"function"!=typeof JSON.stringify&&(JSON.stringify=Faye.stringify),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)}),this.connect()},request:function(e){this._pending=this._pending||new Faye.Set;for(var t=0,n=e.length;n>t;t++)this._pending.add(e[t]);var r=new Faye.Promise;return this.callback(function(t){t&&(t.send(Faye.toJSON(e)),Faye.Promise.fulfill(r,t))},this),this.connect(),{abort:function(){r.then(function(e){e.close()})}}},connect:function(){if(!Faye.Transport.WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var e=this._createSocket();if(!e)return this.setDeferredStatus("failed");var t=this;e.onopen=function(){e.headers&&t._storeCookies(e.headers["set-cookie"]),t._socket=e,t._state=t.CONNECTED,t._everConnected=!0,t._ping(),t.setDeferredStatus("succeeded",e)};var n=!1;e.onclose=e.onerror=function(){if(!n){n=!0;var r=t._state===t.CONNECTED;e.onopen=e.onclose=e.onerror=e.onmessage=null,delete t._socket,t._state=t.UNCONNECTED,t.removeTimeout("ping"),t.setDeferredStatus("unknown");var i=t._pending?t._pending.toArray():[];delete t._pending,r?t._handleError(i,!0):t._everConnected?t._handleError(i):t.setDeferredStatus("failed")}},e.onmessage=function(e){var n=JSON.parse(e.data);if(n){n=[].concat(n);for(var r=0,i=n.length;i>r;r++)void 0!==n[r].successful&&t._pending.remove(n[r]);t._receive(n)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var e=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),t=this._dispatcher.headers,n=this._dispatcher.wsExtensions,r=this._getCookies(),i=this._dispatcher.tls,s={extensions:n,headers:t,proxy:this._proxy,tls:i};return""!==r&&(s.headers.Cookie=r),Faye.WebSocket?new Faye.WebSocket.Client(e,[],s):Faye.ENV.MozWebSocket?new MozWebSocket(e):Faye.ENV.WebSocket?new WebSocket(e):void 0},_ping:function(){this._socket&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(e,t){var n=e.transports.websocket=e.transports.websocket||{};return n[t.href]=n[t.href]||new this(e,t),n[t.href]},getSocketUrl:function(e){return e=Faye.copyObject(e),e.protocol=this.PROTOCOLS[e.protocol],Faye.URI.stringify(e)},isUsable:function(e,t,n,r){this.create(e,t).isUsable(n,r)}}),Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable),Faye.Transport.register("websocket",Faye.Transport.WebSocket),Faye.Event&&void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=!0}),Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(e,t){if(Faye.Transport.prototype.initialize.call(this,e,t),!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(e,t),t=Faye.copyObject(t),t.pathname+="/"+e.clientId;var n=new EventSource(Faye.URI.stringify(t)),r=this;n.onopen=function(){r._everConnected=!0,r.setDeferredStatus("succeeded")},n.onerror=function(){r._everConnected?r._handleError([]):(r.setDeferredStatus("failed"),n.close())},n.onmessage=function(e){r._receive(JSON.parse(e.data))},this._socket=n},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(e,t){this.callback(function(){e.call(t,!0)}),this.errback(function(){e.call(t,!1)})},encode:function(e){return this._xhr.encode(e)},request:function(e){return this._xhr.request(e)}}),{isUsable:function(e,t,n,r){var i=e.clientId;return i?void Faye.Transport.XHR.isUsable(e,t,function(i){return i?void this.create(e,t).isUsable(n,r):n.call(r,!1)},this):n.call(r,!1)},create:function(e,t){var n=e.transports.eventsource=e.transports.eventsource||{},r=e.clientId,i=Faye.copyObject(t);return i.pathname+="/"+(r||""),i=Faye.URI.stringify(i),n[i]=n[i]||new this(e,t),n[i]}}),Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable),Faye.Transport.register("eventsource",Faye.Transport.EventSource),Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){return Faye.toJSON(e)},request:function(e){var t=this.endpoint.href,n=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,r=this;n.open("POST",t,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Pragma","no-cache"),n.setRequestHeader("X-Requested-With","XMLHttpRequest");var i=this._dispatcher.headers;for(var s in i)i.hasOwnProperty(s)&&n.setRequestHeader(s,i[s]);var o=function(){n.abort()};return void 0!==Faye.ENV.onbeforeunload&&Faye.Event.on(Faye.ENV,"beforeunload",o),n.onreadystatechange=function(){if(n&&4===n.readyState){var t=null,i=n.status,s=n.responseText,a=i>=200&&300>i||304===i||1223===i;if(void 0!==Faye.ENV.onbeforeunload&&Faye.Event.detach(Faye.ENV,"beforeunload",o),n.onreadystatechange=function(){},n=null,!a)return r._handleError(e);try{t=JSON.parse(s)}catch(u){}t?r._receive(t):r._handleError(e)}},n.send(this.encode(e)),n}}),{isUsable:function(e,t,n,r){n.call(r,Faye.URI.isSameOrigin(t))}}),Faye.Transport.register("long-polling",Faye.Transport.XHR),Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){return"message="+encodeURIComponent(Faye.toJSON(e))},request:function(e){var t,n=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,r=new n,i=this._dispatcher.headers,s=this;if(r.open("POST",Faye.URI.stringify(this.endpoint),!0),r.setRequestHeader){r.setRequestHeader("Pragma","no-cache");for(t in i)i.hasOwnProperty(t)&&r.setRequestHeader(t,i[t])}var o=function(){return r?(r.onload=r.onerror=r.ontimeout=r.onprogress=null,void(r=null)):!1};return r.onload=function(){var t=null;try{t=JSON.parse(r.responseText)}catch(n){}o(),t?s._receive(t):s._handleError(e)},r.onerror=r.ontimeout=function(){o(),s._handleError(e)},r.onprogress=function(){},r.send(this.encode(e)),r}}),{isUsable:function(e,t,n,r){if(Faye.URI.isSameOrigin(t))return n.call(r,!1);if(Faye.ENV.XDomainRequest)return n.call(r,t.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var i=new Faye.ENV.XMLHttpRequest;return n.call(r,void 0!==i.withCredentials)}return n.call(r,!1)}}),Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS),Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(e){var t=Faye.copyObject(this.endpoint);return t.query.message=Faye.toJSON(e),t.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__",Faye.URI.stringify(t)},request:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script"),r=Faye.Transport.JSONP.getCallbackName(),i=Faye.copyObject(this.endpoint),s=this;i.query.message=Faye.toJSON(e),i.query.jsonp=r;var o=function(){if(!Faye.ENV[r])return!1;Faye.ENV[r]=void 0;try{delete Faye.ENV[r]}catch(e){}n.parentNode.removeChild(n)};return Faye.ENV[r]=function(e){o(),s._receive(e)},n.type="text/javascript",n.src=Faye.URI.stringify(i),t.appendChild(n),n.onerror=function(){o(),s._handleError(e)},{abort:o}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(e,t,n,r){n.call(r,!0)}}),Faye.Transport.register("callback-polling",Faye.Transport.JSONP)}()}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:7}],9:[function(e,t,n){var r=function i(e,t){function n(e){N=e.document,k=e.location,M=e.cancelAnimationFrame||e.clearTimeout,x=e.requestAnimationFrame||e.setTimeout}function r(){var e,t=[].slice.call(arguments),n=!(null==t[1]||R.call(t[1])!==Y||"tag"in t[1]||"view"in t[1]||"subtree"in t[1]),r=n?t[1]:{},i="class"in r?"class":"className",s={tag:"div",attrs:{}},o=[];if(R.call(t[0])!=I)throw new Error("selector in m(selector, attrs, children) should be a string");for(;e=P.exec(t[0]);)if(""===e[1]&&e[2])s.tag=e[2];else if("#"===e[1])s.attrs.id=e[2];else if("."===e[1])o.push(e[2]);else if("["===e[3][0]){var a=L.exec(e[3]);s.attrs[a[1]]=a[3]||(a[2]?"":!0)}var u=n?t.slice(2):t.slice(1);1===u.length&&R.call(u[0])===U?s.children=u[0]:s.children=u;for(var c in r)r.hasOwnProperty(c)&&(c===i&&null!=r[c]&&""!==r[c]?(o.push(r[c]),s.attrs[c]=""):s.attrs[c]=r[c]);return o.length>0&&(s.attrs[i]=o.join(" ")),s}function s(e,n,i,c,h,f,d,p,m,y,g){try{(null==h||null==h.toString())&&(h="")}catch(_){h=""}if("retain"===h.subtree)return f;var v=R.call(f),b=R.call(h);if(null==f||v!==b){if(null!=f)if(i&&i.nodes){var w=p-c,F=w+(b===U?h:f.nodes).length;u(i.nodes.slice(w,F),i.slice(w,F))}else f.nodes&&u(f.nodes,f);f=new h.constructor,f.tag&&(f={}),f.nodes=[]}if(b===U){for(var E=0,T=h.length;T>E;E++)R.call(h[E])===U&&(h=h.concat.apply([],h),E--,T=h.length);for(var C=[],S=f.length===h.length,O=0,D=1,k=2,x=3,M={},P=!1,E=0;E<f.length;E++)f[E]&&f[E].attrs&&null!=f[E].attrs.key&&(P=!0,M[f[E].attrs.key]={action:D,index:E});for(var L=0,E=0,T=h.length;T>E;E++)if(h[E]&&h[E].attrs&&null!=h[E].attrs.key){for(var q=0,T=h.length;T>q;q++)h[q]&&h[q].attrs&&null==h[q].attrs.key&&(h[q].attrs.key="__mithril__"+L++);break}if(P){var W=!1;if(h.length!=f.length)W=!0;else for(var G,V,E=0;G=f[E],V=h[E];E++)if(G.attrs&&V.attrs&&G.attrs.key!=V.attrs.key){W=!0;break}if(W){for(var E=0,T=h.length;T>E;E++)if(h[E]&&h[E].attrs&&null!=h[E].attrs.key){var z=h[E].attrs.key;M[z]?M[z]={action:x,index:E,from:M[z].index,element:f.nodes[M[z].index]||N.createElement("div")}:M[z]={action:k,index:E}}var J=[];for(var B in M)J.push(M[B]);var $=J.sort(o),Z=new Array(f.length);Z.nodes=f.nodes.slice();for(var X,E=0;X=$[E];E++){if(X.action===D&&(u(f[X.index].nodes,f[X.index]),Z.splice(X.index,1)),X.action===k){var K=N.createElement("div");K.key=h[X.index].attrs.key,e.insertBefore(K,e.childNodes[X.index]||null),Z.splice(X.index,0,{attrs:{key:h[X.index].attrs.key},nodes:[K]}),Z.nodes[X.index]=K}X.action===x&&(e.childNodes[X.index]!==X.element&&null!==X.element&&e.insertBefore(X.element,e.childNodes[X.index]||null),Z[X.index]=f[X.from],Z.nodes[X.index]=X.element)}f=Z}}for(var E=0,Q=0,T=h.length;T>E;E++){var te=s(e,n,f,p,h[E],f[Q],d,p+O||O,m,y,g);te!==t&&(te.nodes.intact||(S=!1),O+=te.$trusted?(te.match(/<[^\/]|\>\s*[^<]/g)||[0]).length:R.call(te)===U?te.length:1,f[Q++]=te)}if(!S){for(var E=0,T=h.length;T>E;E++)null!=f[E]&&C.push.apply(C,f[E].nodes);for(var ne,E=0;ne=f.nodes[E];E++)null!=ne.parentNode&&C.indexOf(ne)<0&&u([ne],[f[E]]);h.length<f.length&&(f.length=h.length),f.nodes=C}}else if(null!=h&&b===Y){for(var ie=[],se=[];h.view;){var oe=h.view.$original||h.view,ae="diff"==r.redraw.strategy()&&f.views?f.views.indexOf(oe):-1,ue=ae>-1?f.controllers[ae]:new(h.controller||H),z=h&&h.attrs&&h.attrs.key;if(h=0==re||f&&f.controllers&&f.controllers.indexOf(ue)>-1?h.view(ue):{tag:"placeholder"},"retain"===h.subtree)return f;z&&(h.attrs||(h.attrs={}),h.attrs.key=z),ue.onunload&&ee.push({controller:ue,handler:ue.onunload}),ie.push(oe),se.push(ue)}if(!h.tag&&se.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");h.attrs||(h.attrs={}),f.attrs||(f.attrs={});var ce=Object.keys(h.attrs),le=ce.length>("key"in h.attrs?1:0);if((h.tag!=f.tag||ce.sort().join()!=Object.keys(f.attrs).sort().join()||h.attrs.id!=f.attrs.id||h.attrs.key!=f.attrs.key||"all"==r.redraw.strategy()&&(!f.configContext||f.configContext.retain!==!0)||"diff"==r.redraw.strategy()&&f.configContext&&f.configContext.retain===!1)&&(f.nodes.length&&u(f.nodes),f.configContext&&typeof f.configContext.onunload===A&&f.configContext.onunload(),f.controllers))for(var ue,E=0;ue=f.controllers[E];E++)typeof ue.onunload===A&&ue.onunload({preventDefault:H});if(R.call(h.tag)!=I)return;var ne,he=0===f.nodes.length;if(h.attrs.xmlns?y=h.attrs.xmlns:"svg"===h.tag?y="http://www.w3.org/2000/svg":"math"===h.tag&&(y="http://www.w3.org/1998/Math/MathML"),he){if(ne=h.attrs.is?y===t?N.createElement(h.tag,h.attrs.is):N.createElementNS(y,h.tag,h.attrs.is):y===t?N.createElement(h.tag):N.createElementNS(y,h.tag),f={tag:h.tag,attrs:le?a(ne,h.tag,h.attrs,{},y):h.attrs,children:null!=h.children&&h.children.length>0?s(ne,h.tag,t,t,h.children,f.children,!0,0,h.attrs.contenteditable?ne:m,y,g):h.children,nodes:[ne]},se.length){f.views=ie,f.controllers=se;for(var ue,E=0;ue=se[E];E++)if(ue.onunload&&ue.onunload.$old&&(ue.onunload=ue.onunload.$old),re&&ue.onunload){var fe=ue.onunload;ue.onunload=H,ue.onunload.$old=fe}}f.children&&!f.children.nodes&&(f.children.nodes=[]),"select"===h.tag&&"value"in h.attrs&&a(ne,h.tag,{value:h.attrs.value},{},y),e.insertBefore(ne,e.childNodes[p]||null)}else ne=f.nodes[0],le&&a(ne,h.tag,h.attrs,f.attrs,y),f.children=s(ne,h.tag,t,t,h.children,f.children,!1,0,h.attrs.contenteditable?ne:m,y,g),f.nodes.intact=!0,se.length&&(f.views=ie,f.controllers=se),d===!0&&null!=ne&&e.insertBefore(ne,e.childNodes[p]||null);if(typeof h.attrs.config===A){var de=f.configContext=f.configContext||{},pe=function(e,t){return function(){return e.attrs.config.apply(e,t)}};g.push(pe(h,[ne,!he,de,f]))}}else if(typeof h!=A){var C;0===f.nodes.length?(h.$trusted?C=l(e,p,h):(C=[N.createTextNode(h)],e.nodeName.match(j)||e.insertBefore(C[0],e.childNodes[p]||null)),f="string number boolean".indexOf(typeof h)>-1?new h.constructor(h):h,f.nodes=C):f.valueOf()!==h.valueOf()||d===!0?(C=f.nodes,m&&m===N.activeElement||(h.$trusted?(u(C,f),C=l(e,p,h)):"textarea"===n?e.value=h:m?m.innerHTML=h:((1===C[0].nodeType||C.length>1)&&(u(f.nodes,f),C=[N.createTextNode(h)]),e.insertBefore(C[0],e.childNodes[p]||null),C[0].nodeValue=h)),f=new h.constructor(h),f.nodes=C):f.nodes.intact=!0}return f}function o(e,t){return e.action-t.action||e.index-t.index}function a(e,t,n,r,i){for(var s in n){var o=n[s],a=r[s];if(s in r&&a===o)"value"===s&&"input"===t&&e.value!=o&&(e.value=o);else{r[s]=o;try{if("config"===s||"key"==s)continue;if(typeof o===A&&0===s.indexOf("on"))e[s]=h(o,e);else if("style"===s&&null!=o&&R.call(o)===Y){for(var u in o)(null==a||a[u]!==o[u])&&(e.style[u]=o[u]);for(var u in a)u in o||(e.style[u]="")}else null!=i?"href"===s?e.setAttributeNS("http://www.w3.org/1999/xlink","href",o):"className"===s?e.setAttribute("class",o):e.setAttribute(s,o):s in e&&"list"!==s&&"style"!==s&&"form"!==s&&"type"!==s&&"width"!==s&&"height"!==s?("input"!==t||e[s]!==o)&&(e[s]=o):e.setAttribute(s,o)}catch(c){if(c.message.indexOf("Invalid argument")<0)throw c}}}return r}function u(e,t){for(var n=e.length-1;n>-1;n--)if(e[n]&&e[n].parentNode){try{e[n].parentNode.removeChild(e[n])}catch(r){}t=[].concat(t),t[n]&&c(t[n])}0!=e.length&&(e.length=0)}function c(e){if(e.configContext&&typeof e.configContext.onunload===A&&(e.configContext.onunload(),e.configContext.onunload=null),e.controllers)for(var t,n=0;t=e.controllers[n];n++)typeof t.onunload===A&&t.onunload({preventDefault:H});if(e.children)if(R.call(e.children)===U)for(var r,n=0;r=e.children[n];n++)c(r);else e.children.tag&&c(e.children)}function l(e,t,n){var r=e.childNodes[t];if(r){var i=1!=r.nodeType,s=N.createElement("span");i?(e.insertBefore(s,r||null),s.insertAdjacentHTML("beforebegin",n),e.removeChild(s)):r.insertAdjacentHTML("beforebegin",n)}else e.insertAdjacentHTML("beforeend",n);for(var o=[];e.childNodes[t]!==r;)o.push(e.childNodes[t]),t++;return o}function h(e,t){return function(n){n=n||event,r.redraw.strategy("diff"),r.startComputation();try{return e.call(t,n)}finally{ie()}}}function f(e){var t=G.indexOf(e);return 0>t?G.push(e)-1:t}function d(e){var t=function(){return arguments.length&&(e=arguments[0]),e};return t.toJSON=function(){return e},t}function p(e,t){var n=function(){return(e.controller||H).apply(this,t)||this},r=function(n){return arguments.length>1&&(t=t.concat([].slice.call(arguments,1))),e.view.apply(e,t?[n].concat(t):[n])};r.$original=e.view;var i={controller:n,view:r};return t[0]&&null!=t[0].key&&(i.attrs={key:t[0].key}),i}function m(){K&&(K(),K=null);for(var e,t=0;e=J[t];t++)if($[t]){var n=B[t].controller&&B[t].controller.$$args?[$[t]].concat(B[t].controller.$$args):[$[t]];r.render(e,B[t].view?B[t].view($[t],n):"")}Q&&(Q(),Q=null),Z=null,X=new Date,r.redraw.strategy("diff")}function y(e){return e.slice(ae[r.route.mode].length)}function g(e,t,n){se={};var i=n.indexOf("?");-1!==i&&(se=w(n.substr(i+1,n.length)),n=n.substr(0,i));var s=Object.keys(t),o=s.indexOf(n);if(-1!==o)return r.mount(e,t[s[o]]),!0;for(var a in t){if(a===n)return r.mount(e,t[a]),!0;var u=new RegExp("^"+a.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(u.test(n))return n.replace(u,function(){for(var n=a.match(/:[^\/]+/g)||[],i=[].slice.call(arguments,1,-2),s=0,o=n.length;o>s;s++)se[n[s].replace(/:|\./g,"")]=decodeURIComponent(i[s]);r.mount(e,t[a])}),!0}}function _(e){if(e=e||event,!e.ctrlKey&&!e.metaKey&&2!==e.which){e.preventDefault?e.preventDefault():e.returnValue=!1;for(var t=e.currentTarget||e.srcElement,n="pathname"===r.route.mode&&t.search?w(t.search.slice(1)):{};t&&"A"!=t.nodeName.toUpperCase();)t=t.parentNode;r.route(t[r.route.mode].slice(ae[r.route.mode].length),n)}}function v(){"hash"!=r.route.mode&&k.hash?k.hash=k.hash:e.scrollTo(0,0)}function b(e,n){var r={},i=[];for(var s in e){var o=n?n+"["+s+"]":s,a=e[s],u=R.call(a),c=null===a?encodeURIComponent(o):u===Y?b(a,o):u===U?a.reduce(function(e,t){return r[o]||(r[o]={}),r[o][t]?e:(r[o][t]=!0,e.concat(encodeURIComponent(o)+"="+encodeURIComponent(t)))},[]).join("&"):encodeURIComponent(o)+"="+encodeURIComponent(a);a!==t&&i.push(c)}return i.join("&")}function w(e){"?"===e.charAt(0)&&(e=e.substring(1));for(var t=e.split("&"),n={},r=0,i=t.length;i>r;r++){var s=t[r].split("="),o=decodeURIComponent(s[0]),a=2==s.length?decodeURIComponent(s[1]):null;null!=n[o]?(R.call(n[o])!==U&&(n[o]=[n[o]]),n[o].push(a)):n[o]=a}return n}function F(e){var n=f(e);u(e.childNodes,V[n]),V[n]=t}function E(e,t){var n=r.prop(t);return e.then(n),n.then=function(n,r){return E(e.then(n,r),t)},n}function T(e,t){function n(e){h=e||c,d.map(function(e){h===u&&e.resolve(f)||e.reject(f)})}function i(e,t,n,i){if((null!=f&&R.call(f)===Y||typeof f===A)&&typeof e===A)try{var s=0;e.call(f,function(e){s++||(f=e,t())},function(e){s++||(f=e,n())})}catch(o){r.deferred.onerror(o),f=o,n()}else i()}function s(){var c;try{c=f&&f.then}catch(d){return r.deferred.onerror(d),f=d,h=a,s()}i(c,function(){h=o,s()},function(){h=a,s()},function(){try{h===o&&typeof e===A?f=e(f):h===a&&"function"==typeof t&&(f=t(f),h=o)}catch(s){return r.deferred.onerror(s),f=s,n()}f===l?(f=TypeError(),n()):i(c,function(){n(u)},n,function(){n(h===o&&u)})})}var o=1,a=2,u=3,c=4,l=this,h=0,f=0,d=[];l.promise={},l.resolve=function(e){return h||(f=e,h=o,s()),this},l.reject=function(e){return h||(f=e,h=a,s()),this},l.promise.then=function(e,t){var n=new T(e,t);return h===u?n.resolve(f):h===c?n.reject(f):d.push(n),n.promise}}function C(e){return e}function S(n){if(!n.dataType||"jsonp"!==n.dataType.toLowerCase()){var r=new e.XMLHttpRequest;if(r.open(n.method,n.url,!0,n.user,n.password),r.onreadystatechange=function(){4===r.readyState&&(r.status>=200&&r.status<300?n.onload({type:"load",target:r}):n.onerror({type:"error",target:r}))},n.serialize===JSON.stringify&&n.data&&"GET"!==n.method&&r.setRequestHeader("Content-Type","application/json; charset=utf-8"),n.deserialize===JSON.parse&&r.setRequestHeader("Accept","application/json, text/*"),typeof n.config===A){var i=n.config(r,n);null!=i&&(r=i)}var s="GET"!==n.method&&n.data?n.data:"";if(s&&R.call(s)!=I&&s.constructor!=e.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return r.send(s),r}var o="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36),a=N.createElement("script");e[o]=function(r){a.parentNode.removeChild(a),n.onload({type:"load",target:{responseText:r}}),e[o]=t},a.onerror=function(r){return a.parentNode.removeChild(a),n.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),e[o]=t,!1},a.onload=function(e){return!1},a.src=n.url+(n.url.indexOf("?")>0?"&":"?")+(n.callbackKey?n.callbackKey:"callback")+"="+o+"&"+b(n.data||{}),N.body.appendChild(a)}function O(e,t,n){if("GET"===e.method&&"jsonp"!=e.dataType){var r=e.url.indexOf("?")<0?"?":"&",i=b(t);e.url=e.url+(i?r+i:"")}else e.data=n(t);return e}function D(e,t){var n=e.match(/:[a-z]\w+/gi);if(n&&t)for(var r=0;r<n.length;r++){var i=n[r].slice(1);e=e.replace(n[r],t[i]),delete t[i]}return e}var N,k,x,M,Y="[object Object]",U="[object Array]",I="[object String]",A="function",R={}.toString,P=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,L=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,j=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,H=function(){};n(e);var q,W={appendChild:function(e){q===t&&(q=N.createElement("html")),N.documentElement&&N.documentElement!==e?N.replaceChild(e,N.documentElement):N.appendChild(e),this.childNodes=N.childNodes},insertBefore:function(e){this.appendChild(e)},childNodes:[]},G=[],V={};r.render=function(e,n,r){var i=[];if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var o=f(e),a=e===N,c=a||e===N.documentElement?W:e;a&&"html"!=n.tag&&(n={tag:"html",attrs:{},children:n}),V[o]===t&&u(c.childNodes),r===!0&&F(e),V[o]=s(c,null,t,t,n,V[o],!1,0,null,t,i);for(var l=0,h=i.length;h>l;l++)i[l]()},r.trust=function(e){return e=new String(e),e.$trusted=!0,e},r.prop=function(e){return(null!=e&&R.call(e)===Y||typeof e===A)&&typeof e.then===A?E(e):d(e)};var z,J=[],B=[],$=[],Z=null,X=0,K=null,Q=null,ee=[],te=16;r.component=function(e){return p(e,[].slice.call(arguments,1))},r.mount=r.module=function(e,t){if(!e)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var n=J.indexOf(e);0>n&&(n=J.length);for(var i,s=!1,o={preventDefault:function(){s=!0,K=Q=null}},a=0;i=ee[a];a++)i.handler.call(i.controller,o),i.controller.onunload=null;if(s)for(var i,a=0;i=ee[a];a++)i.controller.onunload=i.handler;else ee=[];if($[n]&&typeof $[n].onunload===A&&$[n].onunload(o),!s){r.redraw.strategy("all"),r.startComputation(),J[n]=e,arguments.length>2&&(t=subcomponent(t,[].slice.call(arguments,2)));var u=z=t=t||{controller:function(){}},c=t.controller||H,l=new c;return u===z&&($[n]=l,B[n]=t),ie(),$[n]}};var ne=!1;r.redraw=function(t){ne||(ne=!0,Z&&t!==!0?(x===e.requestAnimationFrame||new Date-X>te)&&(Z>0&&M(Z),Z=x(m,te)):(m(),Z=x(function(){Z=null},te)),ne=!1)},r.redraw.strategy=r.prop();var re=0;r.startComputation=function(){re++},r.endComputation=function(){re=Math.max(re-1,0),0===re&&r.redraw()};var ie=function(){"none"==r.redraw.strategy()?(re--,r.redraw.strategy("diff")):r.endComputation()};r.withAttr=function(e,t){return function(n){n=n||event;var r=n.currentTarget||this;t(e in r?r[e]:r.getAttribute(e))}};var se,oe,ae={pathname:"",hash:"#",search:"?"},ue=H,ce=!1;return r.route=function(){if(0===arguments.length)return oe;if(3===arguments.length&&R.call(arguments[1])===I){var t=arguments[0],n=arguments[1],i=arguments[2];ue=function(e){var s=oe=y(e);if(!g(t,i,s)){if(ce)throw new Error("Ensure the default route matches one of the routes defined in m.route");ce=!0,r.route(n,!0),ce=!1}};var s="hash"===r.route.mode?"onhashchange":"onpopstate";e[s]=function(){var e=k[r.route.mode];"pathname"===r.route.mode&&(e+=k.search),oe!=y(e)&&ue(e)},K=v,e[s]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var o=arguments[0],a=(arguments[1],arguments[2],arguments[3]);o.href=("pathname"!==r.route.mode?k.pathname:"")+ae[r.route.mode]+a.attrs.href,o.addEventListener?(o.removeEventListener("click",_),o.addEventListener("click",_)):(o.detachEvent("onclick",_),o.attachEvent("onclick",_))}else if(R.call(arguments[0])===I){var u=oe;oe=arguments[0];var c=arguments[1]||{},l=oe.indexOf("?"),h=l>-1?w(oe.slice(l+1)):{};for(var f in c)h[f]=c[f];var d=b(h),p=l>-1?oe.slice(0,l):oe;d&&(oe=p+(-1===p.indexOf("?")?"?":"&")+d);var m=(3===arguments.length?arguments[2]:arguments[1])===!0||u===arguments[0];e.history.pushState?(K=v,Q=function(){e.history[m?"replaceState":"pushState"](null,N.title,ae[r.route.mode]+oe)},ue(ae[r.route.mode]+oe)):(k[r.route.mode]=oe,ue(ae[r.route.mode]+oe))}},r.route.param=function(e){if(!se)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return se[e]},r.route.mode="search",r.route.buildQueryString=b,r.route.parseQueryString=w,r.deferred=function(){var e=new T;return e.promise=E(e.promise),e},r.deferred.onerror=function(e){if("[object Error]"===R.call(e)&&!e.constructor.toString().match(/ Error/))throw e},r.sync=function(e){function t(e,t){return function(r){return o[e]=r,t||(n="reject"),0===--s&&(i.promise(o),i[n](o)),r}}var n="resolve",i=r.deferred(),s=e.length,o=new Array(s);if(e.length>0)for(var a=0;a<e.length;a++)e[a].then(t(a,!0),t(a,!1));else i.resolve([]);return i.promise},r.request=function(e){e.background!==!0&&r.startComputation();var t=new T,n=e.dataType&&"jsonp"===e.dataType.toLowerCase(),i=e.serialize=n?C:e.serialize||JSON.stringify,s=e.deserialize=n?C:e.deserialize||JSON.parse,o=n?function(e){return e.responseText}:e.extract||function(e){return 0===e.responseText.length&&s===JSON.parse?null:e.responseText};return e.method=(e.method||"GET").toUpperCase(),e.url=D(e.url,e.data),e=O(e,e.data,i),e.onload=e.onerror=function(n){try{n=n||event;var i=("load"===n.type?e.unwrapSuccess:e.unwrapError)||C,a=i(s(o(n.target,e)),n.target);if("load"===n.type)if(R.call(a)===U&&e.type)for(var u=0;u<a.length;u++)a[u]=new e.type(a[u]);else e.type&&(a=new e.type(a));t["load"===n.type?"resolve":"reject"](a)}catch(n){r.deferred.onerror(n),t.reject(n)}e.background!==!0&&r.endComputation()},S(e),t.promise=E(t.promise,e.initialValue),t.promise},r.deps=function(t){return n(e=t||e),e},r.deps.factory=i,r}("undefined"!=typeof window?window:{});
"undefined"!=typeof t&&null!==t&&t.exports?t.exports=r:"function"==typeof define&&define.amd&&define(function(){return r})},{}],10:[function(e,t,n){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.moment=r()}(this,function(){"use strict";function n(){return Mn.apply(null,arguments)}function r(e){Mn=e}function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function c(e,t,n,r){return Oe(e,t,n,r,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(e){return null==e._pf&&(e._pf=l()),e._pf}function f(e){if(null==e._isValid){var t=h(e);e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=c(NaN);return null!=e?u(h(t),e):h(t).userInvalidated=!0,t}function p(e,t){var n,r,i;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=h(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),Un.length>0)for(n in Un)r=Un[n],i=t[r],"undefined"!=typeof i&&(e[r]=i);return e}function m(e){p(this,e),this._d=new Date(+e._d),In===!1&&(In=!0,n.updateOffset(this),In=!1)}function y(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function g(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function _(e,t,n){var r,i=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(r=0;i>r;r++)(n&&e[r]!==t[r]||!n&&g(e[r])!==g(t[r]))&&o++;return o+s}function v(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,r,i,s=0;s<e.length;){for(i=b(e[s]).split("-"),t=i.length,n=b(e[s+1]),n=n?n.split("-"):null;t>0;){if(r=F(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&_(i,n,!0)>=t-1)break;t--}s++}return null}function F(n){var r=null;if(!An[n]&&"undefined"!=typeof t&&t&&t.exports)try{r=Yn._abbr,e("./locale/"+n),E(r)}catch(i){}return An[n]}function E(e,t){var n;return e&&(n="undefined"==typeof t?C(e):T(e,t),n&&(Yn=n)),Yn._abbr}function T(e,t){return null!==t?(t.abbr=e,An[e]||(An[e]=new v),An[e].set(t),E(e),An[e]):(delete An[e],null)}function C(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Yn;if(!i(e)){if(t=F(e))return t;e=[e]}return w(e)}function S(e,t){var n=e.toLowerCase();Rn[n]=Rn[n+"s"]=Rn[t]=e}function O(e){return"string"==typeof e?Rn[e]||Rn[e.toLowerCase()]:void 0}function D(e){var t,n,r={};for(n in e)a(e,n)&&(t=O(n),t&&(r[t]=e[n]));return r}function N(e,t){return function(r){return null!=r?(x(this,e,r),n.updateOffset(this,t),this):k(this,e)}}function k(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function x(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function M(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=O(e),"function"==typeof this[e])return this[e](t);return this}function Y(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function U(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(Hn[e]=i),t&&(Hn[t[0]]=function(){return Y(i.apply(this,arguments),t[1],t[2])}),n&&(Hn[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function I(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function A(e){var t,n,r=e.match(Pn);for(t=0,n=r.length;n>t;t++)Hn[r[t]]?r[t]=Hn[r[t]]:r[t]=I(r[t]);return function(i){var s="";for(t=0;n>t;t++)s+=r[t]instanceof Function?r[t].call(i,e):r[t];return s}}function R(e,t){return e.isValid()?(t=P(t,e.localeData()),jn[t]||(jn[t]=A(t)),jn[t](e)):e.localeData().invalidDate()}function P(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Ln.lastIndex=0;r>=0&&Ln.test(e);)e=e.replace(Ln,n),Ln.lastIndex=0,r-=1;return e}function L(e,t,n){nr[e]="function"==typeof t?t:function(e){return e&&n?n:t}}function j(e,t){return a(nr,e)?nr[e](t._strict,t._locale):new RegExp(H(e))}function H(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function q(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(r=function(e,n){n[t]=g(e)}),n=0;n<e.length;n++)rr[e[n]]=r}function W(e,t){q(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function G(e,t,n){null!=t&&a(rr,e)&&rr[e](t,n._a,n,e)}function V(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function z(e){return this._months[e.month()]}function J(e){return this._monthsShort[e.month()]}function B(e,t,n){var r,i,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(i=c([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function $(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),V(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function Z(e){return null!=e?($(this,e),n.updateOffset(this,!0),this):k(this,"Month")}function X(){return V(this.year(),this.month())}function K(e){var t,n=e._a;return n&&-2===h(e).overflow&&(t=n[sr]<0||n[sr]>11?sr:n[or]<1||n[or]>V(n[ir],n[sr])?or:n[ar]<0||n[ar]>24||24===n[ar]&&(0!==n[ur]||0!==n[cr]||0!==n[lr])?ar:n[ur]<0||n[ur]>59?ur:n[cr]<0||n[cr]>59?cr:n[lr]<0||n[lr]>999?lr:-1,h(e)._overflowDayOfYear&&(ir>t||t>or)&&(t=or),h(e).overflow=t),e}function Q(e){n.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function ee(e,t){var n=!0,r=e+"\n"+(new Error).stack;return u(function(){return n&&(Q(r),n=!1),t.apply(this,arguments)},t)}function te(e,t){dr[e]||(Q(t),dr[e]=!0)}function ne(e){var t,n,r=e._i,i=pr.exec(r);if(i){for(h(e).iso=!0,t=0,n=mr.length;n>t;t++)if(mr[t][1].exec(r)){e._f=mr[t][0]+(i[6]||" ");break}for(t=0,n=yr.length;n>t;t++)if(yr[t][1].exec(r)){e._f+=yr[t][0];break}r.match(Qn)&&(e._f+="Z"),we(e)}else e._isValid=!1}function re(e){var t=gr.exec(e._i);return null!==t?void(e._d=new Date(+t[1])):(ne(e),void(e._isValid===!1&&(delete e._isValid,n.createFromInputFallback(e))))}function ie(e,t,n,r,i,s,o){var a=new Date(e,t,n,r,i,s,o);return 1970>e&&a.setFullYear(e),a}function se(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e){return ae(e)?366:365}function ae(e){return e%4===0&&e%100!==0||e%400===0}function ue(){return ae(this.year())}function ce(e,t,n){var r,i=n-t,s=n-e.day();return s>i&&(s-=7),i-7>s&&(s+=7),r=De(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function le(e){return ce(e,this._week.dow,this._week.doy).week}function he(){return this._week.dow}function fe(){return this._week.doy}function de(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function pe(e){var t=ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function me(e,t,n,r,i){var s,o,a=se(e,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:i,s=i-a+(a>r?7:0)-(i>a?7:0),o=7*(t-1)+(n-i)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:oe(e-1)+o}}function ye(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ge(e,t,n){return null!=e?e:null!=t?t:n}function _e(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function ve(e){var t,n,r,i,s=[];if(!e._d){for(r=_e(e),e._w&&null==e._a[or]&&null==e._a[sr]&&be(e),e._dayOfYear&&(i=ge(e._a[ir],r[ir]),e._dayOfYear>oe(i)&&(h(e)._overflowDayOfYear=!0),n=se(i,0,e._dayOfYear),e._a[sr]=n.getUTCMonth(),e._a[or]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ar]&&0===e._a[ur]&&0===e._a[cr]&&0===e._a[lr]&&(e._nextDay=!0,e._a[ar]=0),e._d=(e._useUTC?se:ie).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ar]=24)}}function be(e){var t,n,r,i,s,o,a;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,o=4,n=ge(t.GG,e._a[ir],ce(De(),1,4).year),r=ge(t.W,1),i=ge(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=ge(t.gg,e._a[ir],ce(De(),s,o).year),r=ge(t.w,1),null!=t.d?(i=t.d,s>i&&++r):i=null!=t.e?t.e+s:s),a=me(n,r,i,o,s),e._a[ir]=a.year,e._dayOfYear=a.dayOfYear}function we(e){if(e._f===n.ISO_8601)return void ne(e);e._a=[],h(e).empty=!0;var t,r,i,s,o,a=""+e._i,u=a.length,c=0;for(i=P(e._f,e._locale).match(Pn)||[],t=0;t<i.length;t++)s=i[t],r=(a.match(j(s,e))||[])[0],r&&(o=a.substr(0,a.indexOf(r)),o.length>0&&h(e).unusedInput.push(o),a=a.slice(a.indexOf(r)+r.length),c+=r.length),Hn[s]?(r?h(e).empty=!1:h(e).unusedTokens.push(s),G(s,r,e)):e._strict&&!r&&h(e).unusedTokens.push(s);h(e).charsLeftOver=u-c,a.length>0&&h(e).unusedInput.push(a),h(e).bigHour===!0&&e._a[ar]<=12&&e._a[ar]>0&&(h(e).bigHour=void 0),e._a[ar]=Fe(e._locale,e._a[ar],e._meridiem),ve(e),K(e)}function Fe(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function Ee(e){var t,n,r,i,s;if(0===e._f.length)return h(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)s=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],we(t),f(t)&&(s+=h(t).charsLeftOver,s+=10*h(t).unusedTokens.length,h(t).score=s,(null==r||r>s)&&(r=s,n=t));u(e,n||t)}function Te(e){if(!e._d){var t=D(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],ve(e)}}function Ce(e){var t,n=e._i,r=e._f;return e._locale=e._locale||C(e._l),null===n||void 0===r&&""===n?d({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),y(n)?new m(K(n)):(i(r)?Ee(e):r?we(e):s(n)?e._d=n:Se(e),t=new m(K(e)),t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t))}function Se(e){var t=e._i;void 0===t?e._d=new Date:s(t)?e._d=new Date(+t):"string"==typeof t?re(e):i(t)?(e._a=o(t.slice(0),function(e){return parseInt(e,10)}),ve(e)):"object"==typeof t?Te(e):"number"==typeof t?e._d=new Date(t):n.createFromInputFallback(e)}function Oe(e,t,n,r,i){var s={};return"boolean"==typeof n&&(r=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Ce(s)}function De(e,t,n,r){return Oe(e,t,n,r,!1)}function Ne(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return De();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function ke(){var e=[].slice.call(arguments,0);return Ne("isBefore",e)}function xe(){var e=[].slice.call(arguments,0);return Ne("isAfter",e)}function Me(e){var t=D(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*a,this._days=+o+7*s,this._months=+i+3*r+12*n,this._data={},this._locale=C(),this._bubble()}function Ye(e){return e instanceof Me}function Ue(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+Y(~~(e/60),2)+t+Y(~~e%60,2)})}function Ie(e){var t=(e||"").match(Qn)||[],n=t[t.length-1]||[],r=(n+"").match(Fr)||["-",0,0],i=+(60*r[1])+g(r[2]);return"+"===r[0]?i:-i}function Ae(e,t){var r,i;return t._isUTC?(r=t.clone(),i=(y(e)||s(e)?+e:+De(e))-+r,r._d.setTime(+r._d+i),n.updateOffset(r,!1),r):De(e).local()}function Re(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Pe(e,t){var r,i=this._offset||0;return null!=e?("string"==typeof e&&(e=Ie(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(r=Re(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==e&&(!t||this._changeInProgress?et(this,$e(e-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?i:Re(this)}function Le(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function je(e){return this.utcOffset(0,e)}function He(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Re(this),"m")),this}function qe(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ie(this._i)),this}function We(e){return e=e?De(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ge(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ve(){if(this._a){var e=this._isUTC?c(this._a):De(this._a);return this.isValid()&&_(this._a,e.toArray())>0}return!1}function ze(){return!this._isUTC}function Je(){return this._isUTC}function Be(){return this._isUTC&&0===this._offset}function $e(e,t){var n,r,i,s=e,o=null;return Ye(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(o=Er.exec(e))?(n="-"===o[1]?-1:1,s={y:0,d:g(o[or])*n,h:g(o[ar])*n,m:g(o[ur])*n,s:g(o[cr])*n,ms:g(o[lr])*n}):(o=Tr.exec(e))?(n="-"===o[1]?-1:1,s={y:Ze(o[2],n),M:Ze(o[3],n),d:Ze(o[4],n),h:Ze(o[5],n),m:Ze(o[6],n),s:Ze(o[7],n),w:Ze(o[8],n)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(i=Ke(De(s.from),De(s.to)),s={},s.ms=i.milliseconds,s.M=i.months),r=new Me(s),Ye(e)&&a(e,"_locale")&&(r._locale=e._locale),r}function Ze(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Xe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Ke(e,t){var n;return t=Ae(t,e),e.isBefore(t)?n=Xe(e,t):(n=Xe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Qe(e,t){return function(n,r){var i,s;return null===r||isNaN(+r)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n="string"==typeof n?+n:n,i=$e(n,r),et(this,i,e),this}}function et(e,t,r,i){var s=t._milliseconds,o=t._days,a=t._months;i=null==i?!0:i,s&&e._d.setTime(+e._d+s*r),o&&x(e,"Date",k(e,"Date")+o*r),a&&$(e,k(e,"Month")+a*r),i&&n.updateOffset(e,o||a)}function tt(e){var t=e||De(),n=Ae(t,this).startOf("day"),r=this.diff(n,"days",!0),i=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,De(t)))}function nt(){return new m(this)}function rt(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=y(e)?e:De(e),+this>+e):(n=y(e)?+e:+De(e),n<+this.clone().startOf(t))}function it(e,t){var n;return t=O("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=y(e)?e:De(e),+e>+this):(n=y(e)?+e:+De(e),+this.clone().endOf(t)<n)}function st(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function ot(e,t){var n;return t=O(t||"millisecond"),"millisecond"===t?(e=y(e)?e:De(e),+this===+e):(n=+De(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function at(e){return 0>e?Math.ceil(e):Math.floor(e)}function ut(e,t,n){var r,i,s=Ae(e,this),o=6e4*(s.utcOffset()-this.utcOffset());return t=O(t),"year"===t||"month"===t||"quarter"===t?(i=ct(this,s),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-s,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?i:at(i)}function ct(e,t){var n,r,i=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(i,"months");return 0>t-s?(n=e.clone().add(i-1,"months"),r=(t-s)/(s-n)):(n=e.clone().add(i+1,"months"),r=(t-s)/(n-s)),-(i+r)}function lt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ht(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():R(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):R(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ft(e){var t=R(this,e||n.defaultFormat);return this.localeData().postformat(t)}function dt(e,t){return this.isValid()?$e({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pt(e){return this.from(De(),e)}function mt(e,t){return this.isValid()?$e({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function yt(e){return this.to(De(),e)}function gt(e){var t;return void 0===e?this._locale._abbr:(t=C(e),null!=t&&(this._locale=t),this)}function _t(){return this._locale}function vt(e){switch(e=O(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function bt(e){return e=O(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function wt(){return+this._d-6e4*(this._offset||0)}function Ft(){return Math.floor(+this/1e3)}function Et(){return this._offset?new Date(+this):this._d}function Tt(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ct(){return f(this)}function St(){return u({},h(this))}function Ot(){return h(this).overflow}function Dt(e,t){U(0,[e,e.length],0,t)}function Nt(e,t,n){return ce(De([e,11,31+t-n]),t,n).week}function kt(e){var t=ce(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function xt(e){var t=ce(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Mt(){return Nt(this.year(),1,4)}function Yt(){var e=this.localeData()._week;return Nt(this.year(),e.dow,e.doy)}function Ut(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function It(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function At(e){return this._weekdays[e.day()]}function Rt(e){return this._weekdaysShort[e.day()]}function Pt(e){return this._weekdaysMin[e.day()]}function Lt(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=De([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function jt(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=It(e,this.localeData()),this.add(e-t,"d")):t}function Ht(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function qt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Wt(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Gt(e,t){return t._meridiemParse}function Vt(e){return"p"===(e+"").toLowerCase().charAt(0)}function zt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Jt(e){U(0,[e,3],0,"millisecond")}function Bt(){return this._isUTC?"UTC":""}function $t(){return this._isUTC?"Coordinated Universal Time":""}function Zt(e){return De(1e3*e)}function Xt(){return De.apply(null,arguments).parseZone()}function Kt(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.call(t,n):r}function Qt(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function en(){return this._invalidDate}function tn(e){return this._ordinal.replace("%d",e)}function nn(e){return e}function rn(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)}function sn(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function on(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function an(e,t,n,r){var i=C(),s=c().set(r,t);return i[n](s,e)}function un(e,t,n,r,i){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return an(e,t,n,i);var s,o=[];for(s=0;r>s;s++)o[s]=an(e,s,n,i);return o}function cn(e,t){return un(e,t,"months",12,"month")}function ln(e,t){return un(e,t,"monthsShort",12,"month")}function hn(e,t){return un(e,t,"weekdays",7,"day")}function fn(e,t){return un(e,t,"weekdaysShort",7,"day")}function dn(e,t){return un(e,t,"weekdaysMin",7,"day")}function pn(){var e=this._data;return this._milliseconds=zr(this._milliseconds),this._days=zr(this._days),this._months=zr(this._months),e.milliseconds=zr(e.milliseconds),e.seconds=zr(e.seconds),e.minutes=zr(e.minutes),e.hours=zr(e.hours),e.months=zr(e.months),e.years=zr(e.years),this}function mn(e,t,n,r){var i=$e(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function yn(e,t){return mn(this,e,t,1)}function gn(e,t){return mn(this,e,t,-1)}function _n(){var e,t,n,r=this._milliseconds,i=this._days,s=this._months,o=this._data,a=0;return o.milliseconds=r%1e3,e=at(r/1e3),o.seconds=e%60,t=at(e/60),o.minutes=t%60,n=at(t/60),o.hours=n%24,i+=at(n/24),a=at(vn(i)),i-=at(bn(a)),s+=at(i/30),i%=30,a+=at(s/12),s%=12,o.days=i,o.months=s,o.years=a,this}function vn(e){return 400*e/146097}function bn(e){return 146097*e/400}function wn(e){var t,n,r=this._milliseconds;if(e=O(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+12*vn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(bn(this._months/12)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Fn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*g(this._months/12)}function En(e){return function(){return this.as(e)}}function Tn(e){return e=O(e),this[e+"s"]()}function Cn(e){return function(){return this._data[e]}}function Sn(){return at(this.days()/7)}function On(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function Dn(e,t,n){var r=$e(e).abs(),i=ui(r.as("s")),s=ui(r.as("m")),o=ui(r.as("h")),a=ui(r.as("d")),u=ui(r.as("M")),c=ui(r.as("y")),l=i<ci.s&&["s",i]||1===s&&["m"]||s<ci.m&&["mm",s]||1===o&&["h"]||o<ci.h&&["hh",o]||1===a&&["d"]||a<ci.d&&["dd",a]||1===u&&["M"]||u<ci.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,On.apply(null,l)}function Nn(e,t){return void 0===ci[e]?!1:void 0===t?ci[e]:(ci[e]=t,!0)}function kn(e){var t=this.localeData(),n=Dn(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function xn(){var e=li(this.years()),t=li(this.months()),n=li(this.days()),r=li(this.hours()),i=li(this.minutes()),s=li(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(0>o?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}var Mn,Yn,Un=n.momentProperties=[],In=!1,An={},Rn={},Pn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ln=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,jn={},Hn={},qn=/\d/,Wn=/\d\d/,Gn=/\d{3}/,Vn=/\d{4}/,zn=/[+-]?\d{6}/,Jn=/\d\d?/,Bn=/\d{1,3}/,$n=/\d{1,4}/,Zn=/[+-]?\d{1,6}/,Xn=/\d+/,Kn=/[+-]?\d+/,Qn=/Z|[+-]\d\d:?\d\d/gi,er=/[+-]?\d+(\.\d{1,3})?/,tr=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,nr={},rr={},ir=0,sr=1,or=2,ar=3,ur=4,cr=5,lr=6;U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),S("month","M"),L("M",Jn),L("MM",Jn,Wn),L("MMM",tr),L("MMMM",tr),q(["M","MM"],function(e,t){t[sr]=g(e)-1}),q(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[sr]=i:h(n).invalidMonth=e});var hr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),fr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),dr={};n.suppressDeprecationWarnings=!1;var pr=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yr=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],gr=/^\/?Date\((\-?\d+)/i;n.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),S("year","y"),L("Y",Kn),L("YY",Jn,Wn),L("YYYY",$n,Vn),L("YYYYY",Zn,zn),L("YYYYYY",Zn,zn),q(["YYYY","YYYYY","YYYYYY"],ir),q("YY",function(e,t){t[ir]=n.parseTwoDigitYear(e)}),n.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var _r=N("FullYear",!1);U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),S("week","w"),S("isoWeek","W"),L("w",Jn),L("ww",Jn,Wn),L("W",Jn),L("WW",Jn,Wn),W(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=g(e)});var vr={dow:0,doy:6};U("DDD",["DDDD",3],"DDDo","dayOfYear"),S("dayOfYear","DDD"),L("DDD",Bn),L("DDDD",Gn),q(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),n.ISO_8601=function(){};var br=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return this>e?this:e}),wr=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=De.apply(null,arguments);return e>this?this:e});Ue("Z",":"),Ue("ZZ",""),L("Z",Qn),L("ZZ",Qn),q(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Ie(e)});var Fr=/([\+\-]|\d\d)/gi;n.updateOffset=function(){};var Er=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Tr=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;$e.fn=Me.prototype;var Cr=Qe(1,"add"),Sr=Qe(-1,"subtract");n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Or=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Dt("gggg","weekYear"),Dt("ggggg","weekYear"),Dt("GGGG","isoWeekYear"),Dt("GGGGG","isoWeekYear"),S("weekYear","gg"),S("isoWeekYear","GG"),L("G",Kn),L("g",Kn),L("GG",Jn,Wn),L("gg",Jn,Wn),L("GGGG",$n,Vn),L("gggg",$n,Vn),L("GGGGG",Zn,zn),L("ggggg",Zn,zn),W(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=g(e)}),W(["gg","GG"],function(e,t,r,i){t[i]=n.parseTwoDigitYear(e)}),U("Q",0,0,"quarter"),S("quarter","Q"),L("Q",qn),q("Q",function(e,t){t[sr]=3*(g(e)-1)}),U("D",["DD",2],"Do","date"),S("date","D"),L("D",Jn),L("DD",Jn,Wn),L("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),q(["D","DD"],or),q("Do",function(e,t){t[or]=g(e.match(Jn)[0],10)});var Dr=N("Date",!0);U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),S("day","d"),S("weekday","e"),S("isoWeekday","E"),L("d",Jn),L("e",Jn),L("E",Jn),L("dd",tr),L("ddd",tr),L("dddd",tr),W(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);null!=r?t.d=r:h(n).invalidWeekday=e}),W(["d","e","E"],function(e,t,n,r){t[r]=g(e)});var Nr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),kr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),xr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");U("H",["HH",2],0,"hour"),U("h",["hh",2],0,function(){return this.hours()%12||12}),Wt("a",!0),Wt("A",!1),S("hour","h"),L("a",Gt),L("A",Gt),L("H",Jn),L("h",Jn),L("HH",Jn,Wn),L("hh",Jn,Wn),q(["H","HH"],ar),q(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),q(["h","hh"],function(e,t,n){t[ar]=g(e),h(n).bigHour=!0});var Mr=/[ap]\.?m?\.?/i,Yr=N("Hours",!0);U("m",["mm",2],0,"minute"),S("minute","m"),L("m",Jn),L("mm",Jn,Wn),q(["m","mm"],ur);var Ur=N("Minutes",!1);U("s",["ss",2],0,"second"),S("second","s"),L("s",Jn),L("ss",Jn,Wn),q(["s","ss"],cr);var Ir=N("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Jt("SSS"),Jt("SSSS"),S("millisecond","ms"),L("S",Bn,qn),L("SS",Bn,Wn),L("SSS",Bn,Gn),L("SSSS",Xn),q(["S","SS","SSS","SSSS"],function(e,t){t[lr]=g(1e3*("0."+e))});var Ar=N("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var Rr=m.prototype;Rr.add=Cr,Rr.calendar=tt,Rr.clone=nt,Rr.diff=ut,Rr.endOf=bt,Rr.format=ft,Rr.from=dt,Rr.fromNow=pt,Rr.to=mt,Rr.toNow=yt,Rr.get=M,Rr.invalidAt=Ot,Rr.isAfter=rt,Rr.isBefore=it,Rr.isBetween=st,Rr.isSame=ot,Rr.isValid=Ct,Rr.lang=Or,Rr.locale=gt,Rr.localeData=_t,Rr.max=wr,Rr.min=br,Rr.parsingFlags=St,Rr.set=M,Rr.startOf=vt,Rr.subtract=Sr,Rr.toArray=Tt,Rr.toDate=Et,Rr.toISOString=ht,Rr.toJSON=ht,Rr.toString=lt,Rr.unix=Ft,Rr.valueOf=wt,Rr.year=_r,Rr.isLeapYear=ue,Rr.weekYear=kt,Rr.isoWeekYear=xt,Rr.quarter=Rr.quarters=Ut,Rr.month=Z,Rr.daysInMonth=X,Rr.week=Rr.weeks=de,Rr.isoWeek=Rr.isoWeeks=pe,Rr.weeksInYear=Yt,Rr.isoWeeksInYear=Mt,Rr.date=Dr,Rr.day=Rr.days=jt,Rr.weekday=Ht,Rr.isoWeekday=qt,Rr.dayOfYear=ye,Rr.hour=Rr.hours=Yr,Rr.minute=Rr.minutes=Ur,Rr.second=Rr.seconds=Ir,Rr.millisecond=Rr.milliseconds=Ar,Rr.utcOffset=Pe,Rr.utc=je,Rr.local=He,Rr.parseZone=qe,Rr.hasAlignedHourOffset=We,Rr.isDST=Ge,Rr.isDSTShifted=Ve,Rr.isLocal=ze,Rr.isUtcOffset=Je,Rr.isUtc=Be,Rr.isUTC=Be,Rr.zoneAbbr=Bt,Rr.zoneName=$t,Rr.dates=ee("dates accessor is deprecated. Use date instead.",Dr),Rr.months=ee("months accessor is deprecated. Use month instead",Z),Rr.years=ee("years accessor is deprecated. Use year instead",_r),Rr.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Le);var Pr=Rr,Lr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},jr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Hr="Invalid date",qr="%d",Wr=/\d{1,2}/,Gr={future:"in %s",past:"%s ago",
s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Vr=v.prototype;Vr._calendar=Lr,Vr.calendar=Kt,Vr._longDateFormat=jr,Vr.longDateFormat=Qt,Vr._invalidDate=Hr,Vr.invalidDate=en,Vr._ordinal=qr,Vr.ordinal=tn,Vr._ordinalParse=Wr,Vr.preparse=nn,Vr.postformat=nn,Vr._relativeTime=Gr,Vr.relativeTime=rn,Vr.pastFuture=sn,Vr.set=on,Vr.months=z,Vr._months=hr,Vr.monthsShort=J,Vr._monthsShort=fr,Vr.monthsParse=B,Vr.week=le,Vr._week=vr,Vr.firstDayOfYear=fe,Vr.firstDayOfWeek=he,Vr.weekdays=At,Vr._weekdays=Nr,Vr.weekdaysMin=Pt,Vr._weekdaysMin=xr,Vr.weekdaysShort=Rt,Vr._weekdaysShort=kr,Vr.weekdaysParse=Lt,Vr.isPM=Vt,Vr._meridiemParse=Mr,Vr.meridiem=zt,E("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===g(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),n.lang=ee("moment.lang is deprecated. Use moment.locale instead.",E),n.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",C);var zr=Math.abs,Jr=En("ms"),Br=En("s"),$r=En("m"),Zr=En("h"),Xr=En("d"),Kr=En("w"),Qr=En("M"),ei=En("y"),ti=Cn("milliseconds"),ni=Cn("seconds"),ri=Cn("minutes"),ii=Cn("hours"),si=Cn("days"),oi=Cn("months"),ai=Cn("years"),ui=Math.round,ci={s:45,m:45,h:22,d:26,M:11},li=Math.abs,hi=Me.prototype;hi.abs=pn,hi.add=yn,hi.subtract=gn,hi.as=wn,hi.asMilliseconds=Jr,hi.asSeconds=Br,hi.asMinutes=$r,hi.asHours=Zr,hi.asDays=Xr,hi.asWeeks=Kr,hi.asMonths=Qr,hi.asYears=ei,hi.valueOf=Fn,hi._bubble=_n,hi.get=Tn,hi.milliseconds=ti,hi.seconds=ni,hi.minutes=ri,hi.hours=ii,hi.days=si,hi.weeks=Sn,hi.months=oi,hi.years=ai,hi.humanize=kn,hi.toISOString=xn,hi.toString=xn,hi.toJSON=xn,hi.locale=gt,hi.localeData=_t,hi.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",xn),hi.lang=Or,U("X",0,0,"unix"),U("x",0,0,"valueOf"),L("x",Kn),L("X",er),q("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),q("x",function(e,t,n){n._d=new Date(g(e))}),n.version="2.10.3",r(De),n.fn=Pr,n.min=ke,n.max=xe,n.utc=c,n.unix=Zt,n.months=cn,n.isDate=s,n.locale=E,n.invalid=d,n.duration=$e,n.isMoment=y,n.weekdays=hn,n.parseZone=Xt,n.localeData=C,n.isDuration=Ye,n.monthsShort=ln,n.weekdaysMin=dn,n.defineLocale=T,n.weekdaysShort=fn,n.normalizeUnits=O,n.relativeTimeThreshold=Nn;var fi=n;return fi})},{}],11:[function(e,t,n){!function(e,r){if("function"==typeof define&&define.amd)define([],r);else if("object"==typeof n){var i=r();"object"==typeof t&&t&&t.exports&&(n=t.exports=i),n.randomColor=i}else e.randomColor=r()}(this,function(){function e(e){var t=s(e.hue),n=u(t);return 0>n&&(n=360+n),n}function t(e,t){if("random"===t.luminosity)return u([0,100]);if("monochrome"===t.hue)return 0;var n=o(e),r=n[0],i=n[1];switch(t.luminosity){case"bright":r=55;break;case"dark":r=i-10;break;case"light":i=55}return u([r,i])}function n(e,t,n){var r=i(e,t),s=100;switch(n.luminosity){case"dark":s=r+20;break;case"light":r=(s+r)/2;break;case"random":r=0,s=100}return u([r,s])}function r(e,t){switch(t.format){case"hsvArray":return e;case"hslArray":return d(e);case"hsl":var n=d(e);return"hsl("+n[0]+", "+n[1]+"%, "+n[2]+"%)";case"rgbArray":return f(e);case"rgb":var r=f(e);return"rgb("+r.join(", ")+")";default:return c(e)}}function i(e,t){for(var n=a(e).lowerBounds,r=0;r<n.length-1;r++){var i=n[r][0],s=n[r][1],o=n[r+1][0],u=n[r+1][1];if(t>=i&&o>=t){var c=(u-s)/(o-i),l=s-c*i;return c*t+l}}return 0}function s(e){if("number"==typeof parseInt(e)){var t=parseInt(e);if(360>t&&t>0)return[t,t]}if("string"==typeof e&&p[e]){var n=p[e];if(n.hueRange)return n.hueRange}return[0,360]}function o(e){return a(e).saturationRange}function a(e){e>=334&&360>=e&&(e-=360);for(var t in p){var n=p[t];if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return p[t]}return"Color not found"}function u(e){return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]))}function c(e){function t(e){var t=e.toString(16);return 1==t.length?"0"+t:t}var n=f(e),r="#"+t(n[0])+t(n[1])+t(n[2]);return r}function l(e,t,n){var r=n[0][0],i=n[n.length-1][0],s=n[n.length-1][1],o=n[0][1];p[e]={hueRange:t,lowerBounds:n,saturationRange:[r,i],brightnessRange:[s,o]}}function h(){l("monochrome",null,[[0,0],[100,0]]),l("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),l("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),l("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),l("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),l("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),l("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),l("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function f(e){var t=e[0];0===t&&(t=1),360===t&&(t=359),t/=360;var n=e[1]/100,r=e[2]/100,i=Math.floor(6*t),s=6*t-i,o=r*(1-n),a=r*(1-s*n),u=r*(1-(1-s)*n),c=256,l=256,h=256;switch(i){case 0:c=r,l=u,h=o;break;case 1:c=a,l=r,h=o;break;case 2:c=o,l=r,h=u;break;case 3:c=o,l=a,h=r;break;case 4:c=u,l=o,h=r;break;case 5:c=r,l=o,h=a}var f=[Math.floor(255*c),Math.floor(255*l),Math.floor(255*h)];return f}function d(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=(2-n)*r;return[t,Math.round(n*r/(1>i?i:2-i)*1e4)/100,i/2*100]}var p={};h();var m=function(i){i=i||{};var s,o,a;if(null!=i.count){var u=i.count,c=[];for(i.count=null;u>c.length;)c.push(m(i));return i.count=u,c}return s=e(i),o=t(s,i),a=n(s,o,i),r([s,o,a],i)};return m})},{}],12:[function(e,t,n){e("./chatroom")},{"./chatroom":2}]},{},[12]);
