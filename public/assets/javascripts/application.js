(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var m=require("mithril");var userServices=require("./user.services");var messageServices=require("./message.services");var messageComponent=require("./message.component");function controller(){return{welcome:"Welcome to the chatroom! You are signed in as "+userServices.currentUser().name,messages:messageServices.currentMessages,onkeydown:onkeydown}}function view(ctrl){return m("div.chat-wrap",[m("div.welcome",ctrl.welcome),m("div.msg-list-wrap",{config:scrollToBottom},[m("div.msg-list",ctrl.messages().map(function(msg){return m.component(messageComponent,msg)}))]),m("textarea.msg-box",{autofocus:1,rows:3,onkeydown:ctrl.onkeydown})])}function scrollToBottom(ele){ele.scrollTop=ele.scrollHeight}function onkeydown(ev){if(ev.keyCode===13){messageServices.postMessage(ev.target.value);ev.target.value="";return false}}module.exports={controller:controller,view:view}},{"./message.component":4,"./message.services":5,"./user.services":6,mithril:8}],2:[function(require,module,exports){var m=require("mithril");var chatroomServices=require("./chatroom.services");var chatroomComponent=require("./chatroom.component");chatroomServices.init().then(function(){m.mount(document.body,chatroomComponent)})},{"./chatroom.component":1,"./chatroom.services":3,mithril:8}],3:[function(require,module,exports){var userServices=require("./user.services");var messageServices=require("./message.services");function init(){return userServices.init().then(messageServices.init)}module.exports={init:init}},{"./message.services":5,"./user.services":6}],4:[function(require,module,exports){var m=require("mithril");var moment=require("moment");var randomColor=require("randomcolor");var userServices=require("./user.services");var userColors={};function controller(msg){var isCU=msg.user.id===userServices.currentUser().id;var name=isCU?"You":msg.user.name;var text=msg.text&&msg.text.trim().length?msg.text:m.trust("&nbsp;");return{id:msg.id,name:name,time:moment(msg.created_at).format("HH:mm:ss"),text:text,color:userColor(msg,isCU),type:msg.type,isCU:isCU,isPrivate:msg.is_private}}function view(msg){var wrapClass=["clearfix"];if(msg.type==="BobMessage")wrapClass.push("msg-bob");if(msg.isPrivate)wrapClass.push("msg-private");if(msg.isCU){wrapClass.push("msg-self")}else{wrapClass.push("msg-other")}return m("div.msg-wrap",{id:"msg-"+msg.id,"class":wrapClass.join(" ")},[msgBodyView(msg)])}function msgBodyView(ctrl){switch(ctrl.type){case"UserMessage":case"BobMessage":return userMsgBodyView(ctrl);case"JoinMessage":case"LeaveMessage":return systemMsgBodyView(ctrl)}}function userMsgBodyView(ctrl){document.styleSheets[0].addRule("#msg-"+ctrl.id+" .bubble:before","border-color: transparent "+ctrl.color);return m("div.msg-user",[m("div.msg-meta",[m("div.msg-name",ctrl.name),m("div.msg-time",ctrl.time),m("div.msg-privacy",ctrl.isPrivate?" (private)":"")]),m("div.bubble",{style:{borderColor:ctrl.color}},[m("div.msg-body",ctrl.text)])])}function systemMsgBodyView(ctrl){var text=ctrl.name+" "+(ctrl.type==="JoinMessage"?"joined":"left")+" the chat";return[m("div.well.well-sm",text)]}function userColor(msg,isCU){if(msg.type==="BobMessage")return"#CCC";if(isCU)return"#444";return userColors[msg.user.id]||(userColors[msg.user.id]=newColor())}function newColor(){return randomColor({luminosity:"light",hue:"random"})}module.exports={controller:controller,view:view}},{"./user.services":6,mithril:8,moment:9,randomcolor:10}],5:[function(require,module,exports){var m=require("mithril");var moment=require("moment");var Faye=require("faye/browser/faye-browser");var userServices=require("./user.services");var currentMessages=m.prop([]);function init(){sync();subscribeToNewMessages()}function postMessage(text){return m.request({method:"POST",url:"/api/messages",config:userServices.configAuth,data:{message:{text:text}}})}function sync(){getMessageList().then(merge)}function getMessageList(first){return m.request({method:"GET",url:"/api/messages?since="+lastMessageTime().toISOString(),config:userServices.configAuth,unwrapSuccess:function(response){return response.messages}})}function merge(newMessages){var lmt=moment(lastMessageTime());var cms=currentMessages();newMessages.forEach(function(msg){if(moment(msg.created_at).isAfter(lmt))cms.push(msg)});currentMessages(cms)}function lastMessageTime(){var cms=currentMessages();return cms.length?moment(cms[cms.length-1].created_at):moment.utc().subtract(10,"minutes")}function subscribeToNewMessages(){var fayeClient=new Faye.Client("/faye");fayeClient.subscribe("/public_messages",sync);fayeClient.subscribe("/private_messages/"+userServices.currentUser().token,sync)}module.exports={init:init,postMessage:postMessage,currentMessages:currentMessages}},{"./user.services":6,"faye/browser/faye-browser":7,mithril:8,moment:9}],6:[function(require,module,exports){var m=require("mithril");var moment=require("moment");var persistedToken=window.localStorage&&window.localStorage.getItem("token");var currentUser;function init(){return joinChat().then(function(user){currentUser=user;if(!persistedToken&&window.localStorage){window.localStorage.setItem("token",user.token)}waitForUnload();return user})}function joinChat(){return m.request({method:"POST",url:"/api/users",config:configAuth,unwrapSuccess:function(response){return response.user}})}function leaveChat(){return m.request({method:"DELETE",url:"/api/users",config:configAuth})}function configAuth(xhr){var token=currentUser&&currentUser.token||persistedToken;if(token){xhr.setRequestHeader("Authorization","Bearer "+token)}}function waitForUnload(){window.onbeforeunload=function(){leaveChat();return null}}module.exports={init:init,currentUser:function(){return currentUser},configAuth:configAuth}},{mithril:8,moment:9}],7:[function(require,module,exports){(function(process,global){(function(){"use strict";var Faye={VERSION:"1.1.1",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"],ENV:typeof window!=="undefined"?window:global,extend:function(dest,source,overwrite){if(!source)return dest;for(var key in source){if(!source.hasOwnProperty(key))continue;if(dest.hasOwnProperty(key)&&overwrite===false)continue;if(dest[key]!==source[key])dest[key]=source[key]}return dest},random:function(bitlength){bitlength=bitlength||this.ID_LENGTH;var maxLength=Math.ceil(bitlength*Math.log(2)/Math.log(36));var string=csprng(bitlength,36);while(string.length<maxLength)string="0"+string;return string},validateOptions:function(options,validKeys){for(var key in options){if(this.indexOf(validKeys,key)<0)throw new Error("Unrecognized option: "+key)}},clientIdFromMessages:function(messages){var connect=this.filter([].concat(messages),function(message){return message.channel==="/meta/connect"});return connect[0]&&connect[0].clientId},copyObject:function(object){var clone,i,key;if(object instanceof Array){clone=[];i=object.length;while(i--)clone[i]=Faye.copyObject(object[i]);return clone}else if(typeof object==="object"){clone=object===null?null:{};for(key in object)clone[key]=Faye.copyObject(object[key]);return clone}else{return object}},commonElement:function(lista,listb){for(var i=0,n=lista.length;i<n;i++){if(this.indexOf(listb,lista[i])!==-1)return lista[i]}return null},indexOf:function(list,needle){if(list.indexOf)return list.indexOf(needle);for(var i=0,n=list.length;i<n;i++){if(list[i]===needle)return i}return-1},map:function(object,callback,context){if(object.map)return object.map(callback,context);var result=[];if(object instanceof Array){for(var i=0,n=object.length;i<n;i++){result.push(callback.call(context||null,object[i],i))}}else{for(var key in object){if(!object.hasOwnProperty(key))continue;result.push(callback.call(context||null,key,object[key]))}}return result},filter:function(array,callback,context){if(array.filter)return array.filter(callback,context);var result=[];for(var i=0,n=array.length;i<n;i++){if(callback.call(context||null,array[i],i))result.push(array[i])}return result},asyncEach:function(list,iterator,callback,context){var n=list.length,i=-1,calls=0,looping=false;var iterate=function(){calls-=1;i+=1;if(i===n)return callback&&callback.call(context);iterator(list[i],resume)};var loop=function(){if(looping)return;looping=true;while(calls>0)iterate();looping=false};var resume=function(){calls+=1;loop()};resume()},toJSON:function(object){if(!this.stringify)return JSON.stringify(object);return this.stringify(object,function(key,value){return this[key]instanceof Array?this[key]:value})}};if(typeof module!=="undefined")module.exports=Faye;else if(typeof window!=="undefined")window.Faye=Faye;Faye.Class=function(parent,methods){if(typeof parent!=="function"){methods=parent;parent=Object}var klass=function(){if(!this.initialize)return this;return this.initialize.apply(this,arguments)||this};var bridge=function(){};bridge.prototype=parent.prototype;klass.prototype=new bridge;Faye.extend(klass.prototype,methods);return klass};(function(){var EventEmitter=Faye.EventEmitter=function(){};var isArray=typeof Array.isArray==="function"?Array.isArray:function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function indexOf(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++){if(x===xs[i])return i}return-1}EventEmitter.prototype.emit=function(type){if(type==="error"){if(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}if(!this._events)return false;var handler=this._events[type];if(!handler)return false;if(typeof handler=="function"){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return true}else if(isArray(handler)){var args=Array.prototype.slice.call(arguments,1);var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i].apply(this,args)}return true}else{return false}};EventEmitter.prototype.addListener=function(type,listener){if("function"!==typeof listener){throw new Error("addListener only takes instances of Function")}if(!this._events)this._events={};this.emit("newListener",type,listener);if(!this._events[type]){this._events[type]=listener}else if(isArray(this._events[type])){this._events[type].push(listener)}else{this._events[type]=[this._events[type],listener]}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){var self=this;self.on(type,function g(){self.removeListener(type,g);listener.apply(this,arguments)});return this};EventEmitter.prototype.removeListener=function(type,listener){if("function"!==typeof listener){throw new Error("removeListener only takes instances of Function")}if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=indexOf(list,listener);if(i<0)return this;list.splice(i,1);if(list.length==0)delete this._events[type]}else if(this._events[type]===listener){delete this._events[type]}return this};EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){this._events={};return this}if(type&&this._events&&this._events[type])this._events[type]=null;return this};EventEmitter.prototype.listeners=function(type){if(!this._events)this._events={};if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]}})();Faye.Namespace=Faye.Class({initialize:function(){this._used={}},exists:function(id){return this._used.hasOwnProperty(id)},generate:function(){var name=Faye.random();while(this._used.hasOwnProperty(name))name=Faye.random();return this._used[name]=name},release:function(id){delete this._used[id]}});(function(){"use strict";var timeout=setTimeout,defer;if(typeof setImmediate==="function")defer=function(fn){setImmediate(fn)};else if(typeof process==="object"&&process.nextTick)defer=function(fn){process.nextTick(fn)};else defer=function(fn){timeout(fn,0)};var PENDING=0,FULFILLED=1,REJECTED=2;var RETURN=function(x){return x},THROW=function(x){throw x};var Promise=function(task){this._state=PENDING;this._onFulfilled=[];this._onRejected=[];if(typeof task!=="function")return;var self=this;task(function(value){fulfill(self,value)},function(reason){reject(self,reason)})};Promise.prototype.then=function(onFulfilled,onRejected){var next=new Promise;registerOnFulfilled(this,onFulfilled,next);registerOnRejected(this,onRejected,next);return next};var registerOnFulfilled=function(promise,onFulfilled,next){if(typeof onFulfilled!=="function")onFulfilled=RETURN;var handler=function(value){invoke(onFulfilled,value,next)};if(promise._state===PENDING){promise._onFulfilled.push(handler)}else if(promise._state===FULFILLED){handler(promise._value)}};var registerOnRejected=function(promise,onRejected,next){if(typeof onRejected!=="function")onRejected=THROW;var handler=function(reason){invoke(onRejected,reason,next)};if(promise._state===PENDING){promise._onRejected.push(handler)}else if(promise._state===REJECTED){handler(promise._reason)}};var invoke=function(fn,value,next){defer(function(){_invoke(fn,value,next)})};var _invoke=function(fn,value,next){var outcome;try{outcome=fn(value)}catch(error){return reject(next,error)}if(outcome===next){reject(next,new TypeError("Recursive promise chain detected"))}else{fulfill(next,outcome)}};var fulfill=Promise.fulfill=Promise.resolve=function(promise,value){var called=false,type,then;try{type=typeof value;then=value!==null&&(type==="function"||type==="object")&&value.then;if(typeof then!=="function")return _fulfill(promise,value);then.call(value,function(v){if(!(called^(called=true)))return;fulfill(promise,v)},function(r){if(!(called^(called=true)))return;reject(promise,r)})}catch(error){if(!(called^(called=true)))return;reject(promise,error)}};var _fulfill=function(promise,value){if(promise._state!==PENDING)return;promise._state=FULFILLED;promise._value=value;promise._onRejected=[];var onFulfilled=promise._onFulfilled,fn;while(fn=onFulfilled.shift())fn(value)};var reject=Promise.reject=function(promise,reason){if(promise._state!==PENDING)return;promise._state=REJECTED;promise._reason=reason;promise._onFulfilled=[];var onRejected=promise._onRejected,fn;while(fn=onRejected.shift())fn(reason)};Promise.all=function(promises){return new Promise(function(fulfill,reject){var list=[],n=promises.length,i;if(n===0)return fulfill(list);for(i=0;i<n;i++)(function(promise,i){Promise.fulfilled(promise).then(function(value){list[i]=value;if(--n===0)fulfill(list)},reject)})(promises[i],i)})};Promise.defer=defer;Promise.deferred=Promise.pending=function(){var tuple={};tuple.promise=new Promise(function(fulfill,reject){tuple.fulfill=tuple.resolve=fulfill;tuple.reject=reject});return tuple};Promise.fulfilled=Promise.resolved=function(value){return new Promise(function(fulfill,reject){fulfill(value)})};Promise.rejected=function(reason){return new Promise(function(fulfill,reject){reject(reason)})};if(typeof Faye==="undefined")module.exports=Promise;else Faye.Promise=Promise})();Faye.Set=Faye.Class({initialize:function(){this._index={}},add:function(item){var key=item.id!==undefined?item.id:item;if(this._index.hasOwnProperty(key))return false;this._index[key]=item;return true},forEach:function(block,context){for(var key in this._index){if(this._index.hasOwnProperty(key))block.call(context,this._index[key])}},isEmpty:function(){for(var key in this._index){if(this._index.hasOwnProperty(key))return false}return true},member:function(item){for(var key in this._index){if(this._index[key]===item)return true}return false},remove:function(item){var key=item.id!==undefined?item.id:item;var removed=this._index[key];delete this._index[key];return removed},toArray:function(){var array=[];this.forEach(function(item){array.push(item)});return array}});Faye.URI={isURI:function(uri){return uri&&uri.protocol&&uri.host&&uri.path},isSameOrigin:function(uri){var location=Faye.ENV.location;return uri.protocol===location.protocol&&uri.hostname===location.hostname&&uri.port===location.port},parse:function(url){if(typeof url!=="string")return url;var uri={},parts,query,pairs,i,n,data;var consume=function(name,pattern){url=url.replace(pattern,function(match){uri[name]=match;return""});uri[name]=uri[name]||""};consume("protocol",/^[a-z]+\:/i);consume("host",/^\/\/[^\/\?#]+/);if(!/^\//.test(url)&&!uri.host)url=Faye.ENV.location.pathname.replace(/[^\/]*$/,"")+url;consume("pathname",/^[^\?#]*/);consume("search",/^\?[^#]*/);consume("hash",/^#.*/);uri.protocol=uri.protocol||Faye.ENV.location.protocol;if(uri.host){uri.host=uri.host.substr(2);parts=uri.host.split(":");uri.hostname=parts[0];uri.port=parts[1]||""}else{uri.host=Faye.ENV.location.host;uri.hostname=Faye.ENV.location.hostname;uri.port=Faye.ENV.location.port}uri.pathname=uri.pathname||"/";uri.path=uri.pathname+uri.search;query=uri.search.replace(/^\?/,"");pairs=query?query.split("&"):[];data={};for(i=0,n=pairs.length;i<n;i++){parts=pairs[i].split("=");data[decodeURIComponent(parts[0]||"")]=decodeURIComponent(parts[1]||"")}uri.query=data;uri.href=this.stringify(uri);return uri},stringify:function(uri){var string=uri.protocol+"//"+uri.hostname;if(uri.port)string+=":"+uri.port;string+=uri.pathname+this.queryString(uri.query)+(uri.hash||"");return string},queryString:function(query){var pairs=[];for(var key in query){if(!query.hasOwnProperty(key))continue;pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(query[key]))}if(pairs.length===0)return"";return"?"+pairs.join("&")}};Faye.Error=Faye.Class({initialize:function(code,params,message){this.code=code;this.params=Array.prototype.slice.call(params);this.message=message},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});Faye.Error.parse=function(message){message=message||"";if(!Faye.Grammar.ERROR.test(message))return new this(null,[],message);var parts=message.split(":"),code=parseInt(parts[0]),params=parts[1].split(","),message=parts[2];return new this(code,params,message)};Faye.Error.versionMismatch=function(){return new this(300,arguments,"Version mismatch").toString()};Faye.Error.conntypeMismatch=function(){return new this(301,arguments,"Connection types not supported").toString()};Faye.Error.extMismatch=function(){return new this(302,arguments,"Extension mismatch").toString()};Faye.Error.badRequest=function(){return new this(400,arguments,"Bad request").toString()};Faye.Error.clientUnknown=function(){return new this(401,arguments,"Unknown client").toString()};Faye.Error.parameterMissing=function(){return new this(402,arguments,"Missing required parameter").toString()};Faye.Error.channelForbidden=function(){return new this(403,arguments,"Forbidden channel").toString()};Faye.Error.channelUnknown=function(){return new this(404,arguments,"Unknown channel").toString()};Faye.Error.channelInvalid=function(){return new this(405,arguments,"Invalid channel").toString()};Faye.Error.extUnknown=function(){return new this(406,arguments,"Unknown extension").toString()};Faye.Error.publishFailed=function(){return new this(407,arguments,"Failed to publish").toString()};Faye.Error.serverError=function(){return new this(500,arguments,"Internal server error").toString()};Faye.Deferrable={then:function(callback,errback){var self=this;if(!this._promise)this._promise=new Faye.Promise(function(fulfill,reject){self._fulfill=fulfill;self._reject=reject});if(arguments.length===0)return this._promise;else return this._promise.then(callback,errback)},callback:function(callback,context){return this.then(function(value){callback.call(context,value)})},errback:function(callback,context){return this.then(null,function(reason){callback.call(context,reason)})},timeout:function(seconds,message){this.then();var self=this;this._timer=Faye.ENV.setTimeout(function(){self._reject(message)},seconds*1e3)},setDeferredStatus:function(status,value){if(this._timer)Faye.ENV.clearTimeout(this._timer);this.then();if(status==="succeeded")this._fulfill(value);else if(status==="failed")this._reject(value);else delete this._promise}};Faye.Publisher={countListeners:function(eventType){return this.listeners(eventType).length},bind:function(eventType,listener,context){var slice=Array.prototype.slice,handler=function(){listener.apply(context,slice.call(arguments))};this._listeners=this._listeners||[];this._listeners.push([eventType,listener,context,handler]);return this.on(eventType,handler)},unbind:function(eventType,listener,context){this._listeners=this._listeners||[];var n=this._listeners.length,tuple;while(n--){tuple=this._listeners[n];if(tuple[0]!==eventType)continue;if(listener&&(tuple[1]!==listener||tuple[2]!==context))continue;this._listeners.splice(n,1);this.removeListener(eventType,tuple[3])}}};Faye.extend(Faye.Publisher,Faye.EventEmitter.prototype);Faye.Publisher.trigger=Faye.Publisher.emit;Faye.Timeouts={addTimeout:function(name,delay,callback,context){this._timeouts=this._timeouts||{};if(this._timeouts.hasOwnProperty(name))return;var self=this;this._timeouts[name]=Faye.ENV.setTimeout(function(){delete self._timeouts[name];callback.call(context)},1e3*delay)},removeTimeout:function(name){this._timeouts=this._timeouts||{};var timeout=this._timeouts[name];if(!timeout)return;Faye.ENV.clearTimeout(timeout);delete this._timeouts[name]},removeAllTimeouts:function(){this._timeouts=this._timeouts||{};for(var name in this._timeouts)this.removeTimeout(name)}};Faye.Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(messageArgs,level){if(!Faye.logger)return;var args=Array.prototype.slice.apply(messageArgs),banner="[Faye",klass=this.className,message=args.shift().replace(/\?/g,function(){try{return Faye.toJSON(args.shift())}catch(e){return"[Object]"}});for(var key in Faye){if(klass)continue;if(typeof Faye[key]!=="function")continue;if(this instanceof Faye[key])klass=key}if(klass)banner+="."+klass;banner+="] ";if(typeof Faye.logger[level]==="function")Faye.logger[level](banner+message);else if(typeof Faye.logger==="function")Faye.logger(banner+message)}};(function(){for(var key in Faye.Logging.LOG_LEVELS)(function(level){Faye.Logging[level]=function(){this.writeLog(arguments,level)}})(key)})();Faye.Grammar={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/};Faye.Extensible={addExtension:function(extension){this._extensions=this._extensions||[];this._extensions.push(extension);if(extension.added)extension.added(this)},removeExtension:function(extension){if(!this._extensions)return;var i=this._extensions.length;while(i--){if(this._extensions[i]!==extension)continue;this._extensions.splice(i,1);if(extension.removed)extension.removed(this)}},pipeThroughExtensions:function(stage,message,request,callback,context){this.debug("Passing through ? extensions: ?",stage,message);if(!this._extensions)return callback.call(context,message);var extensions=this._extensions.slice();var pipe=function(message){if(!message)return callback.call(context,message);var extension=extensions.shift();if(!extension)return callback.call(context,message);var fn=extension[stage];if(!fn)return pipe(message);if(fn.length>=3)extension[stage](message,request,pipe);else extension[stage](message,pipe)};pipe(message)}};Faye.extend(Faye.Extensible,Faye.Logging);Faye.Channel=Faye.Class({initialize:function(name){this.id=this.name=name},push:function(message){this.trigger("message",message)},isUnused:function(){return this.countListeners("message")===0}});Faye.extend(Faye.Channel.prototype,Faye.Publisher);Faye.extend(Faye.Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(name){var segments=this.parse(name),channels=["/**",name];var copy=segments.slice();copy[copy.length-1]="*";channels.push(this.unparse(copy));for(var i=1,n=segments.length;i<n;i++){copy=segments.slice(0,i);copy.push("**");channels.push(this.unparse(copy))}return channels},isValid:function(name){return Faye.Grammar.CHANNEL_NAME.test(name)||Faye.Grammar.CHANNEL_PATTERN.test(name)},parse:function(name){if(!this.isValid(name))return null;return name.split("/").slice(1)},unparse:function(segments){return"/"+segments.join("/")},isMeta:function(name){var segments=this.parse(name);return segments?segments[0]===this.META:null},isService:function(name){var segments=this.parse(name);return segments?segments[0]===this.SERVICE:null},isSubscribable:function(name){if(!this.isValid(name))return null;return!this.isMeta(name)&&!this.isService(name)},Set:Faye.Class({initialize:function(){this._channels={}},getKeys:function(){var keys=[];for(var key in this._channels)keys.push(key);return keys},remove:function(name){delete this._channels[name]},hasSubscription:function(name){return this._channels.hasOwnProperty(name)},subscribe:function(names,callback,context){var name;for(var i=0,n=names.length;i<n;i++){name=names[i];var channel=this._channels[name]=this._channels[name]||new Faye.Channel(name);if(callback)channel.bind("message",callback,context)}},unsubscribe:function(name,callback,context){var channel=this._channels[name];if(!channel)return false;channel.unbind("message",callback,context);if(channel.isUnused()){this.remove(name);return true}else{return false}},distributeMessage:function(message){var channels=Faye.Channel.expand(message.channel);for(var i=0,n=channels.length;i<n;i++){var channel=this._channels[channels[i]];if(channel)channel.trigger("message",message.data)}}})});Faye.Publication=Faye.Class(Faye.Deferrable);Faye.Subscription=Faye.Class({initialize:function(client,channels,callback,context){this._client=client;this._channels=channels;this._callback=callback;this._context=context;this._cancelled=false},cancel:function(){if(this._cancelled)return;this._client.unsubscribe(this._channels,this._callback,this._context);this._cancelled=true},unsubscribe:function(){this.cancel()}});Faye.extend(Faye.Subscription.prototype,Faye.Deferrable);Faye.Client=Faye.Class({UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(endpoint,options){this.info("New client created for ?",endpoint);options=options||{};Faye.validateOptions(options,["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]);this._endpoint=endpoint||this.DEFAULT_ENDPOINT;this._channels=new Faye.Channel.Set;this._dispatcher=new Faye.Dispatcher(this,this._endpoint,options);this._messageId=0;this._state=this.UNCONNECTED;this._responseCallbacks={};this._advice={reconnect:this.RETRY,interval:1e3*(options.interval||this.INTERVAL),timeout:1e3*(options.timeout||this.CONNECTION_TIMEOUT)};this._dispatcher.timeout=this._advice.timeout/1e3;this._dispatcher.bind("message",this._receiveMessage,this);if(Faye.Event&&Faye.ENV.onbeforeunload!==undefined)Faye.Event.on(Faye.ENV,"beforeunload",function(){if(Faye.indexOf(this._dispatcher._disabled,"autodisconnect")<0)this.disconnect()},this)},addWebsocketExtension:function(extension){return this._dispatcher.addWebsocketExtension(extension)},disable:function(feature){return this._dispatcher.disable(feature)},setHeader:function(name,value){return this._dispatcher.setHeader(name,value)},handshake:function(callback,context){if(this._advice.reconnect===this.NONE)return;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var self=this;this.info("Initiating handshake with ?",Faye.URI.stringify(this._endpoint));this._dispatcher.selectTransport(Faye.MANDATORY_CONNECTION_TYPES);this._sendMessage({channel:Faye.Channel.HANDSHAKE,version:Faye.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(response){if(response.successful){this._state=this.CONNECTED;this._dispatcher.clientId=response.clientId;this._dispatcher.selectTransport(response.supportedConnectionTypes);this.info("Handshake successful: ?",this._dispatcher.clientId);this.subscribe(this._channels.getKeys(),true);if(callback)Faye.Promise.defer(function(){callback.call(context)})}else{this.info("Handshake unsuccessful");Faye.ENV.setTimeout(function(){self.handshake(callback,context)},this._dispatcher.retry*1e3);this._state=this.UNCONNECTED}},this)},connect:function(callback,context){if(this._advice.reconnect===this.NONE)return;if(this._state===this.DISCONNECTED)return;if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(callback,context)},this);this.callback(callback,context);if(this._state!==this.CONNECTED)return;this.info("Calling deferred actions for ?",this._dispatcher.clientId);this.setDeferredStatus("succeeded");this.setDeferredStatus("unknown");if(this._connectRequest)return;this._connectRequest=true;this.info("Initiating connection for ?",this._dispatcher.clientId);this._sendMessage({channel:Faye.Channel.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)},disconnect:function(){if(this._state!==this.CONNECTED)return;this._state=this.DISCONNECTED;this.info("Disconnecting ?",this._dispatcher.clientId);var promise=new Faye.Publication;this._sendMessage({channel:Faye.Channel.DISCONNECT,clientId:this._dispatcher.clientId},{},function(response){if(response.successful){this._dispatcher.close();promise.setDeferredStatus("succeeded")}else{promise.setDeferredStatus("failed",Faye.Error.parse(response.error))}},this);this.info("Clearing channel listeners for ?",this._dispatcher.clientId);this._channels=new Faye.Channel.Set;return promise},subscribe:function(channel,callback,context){if(channel instanceof Array)return Faye.map(channel,function(c){return this.subscribe(c,callback,context)},this);var subscription=new Faye.Subscription(this,channel,callback,context),force=callback===true,hasSubscribe=this._channels.hasSubscription(channel);if(hasSubscribe&&!force){this._channels.subscribe([channel],callback,context);subscription.setDeferredStatus("succeeded");return subscription}this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,channel);if(!force)this._channels.subscribe([channel],callback,context);this._sendMessage({channel:Faye.Channel.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:channel},{},function(response){if(!response.successful){subscription.setDeferredStatus("failed",Faye.Error.parse(response.error));return this._channels.unsubscribe(channel,callback,context)}var channels=[].concat(response.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,channels);subscription.setDeferredStatus("succeeded");
},this)},this);return subscription},unsubscribe:function(channel,callback,context){if(channel instanceof Array)return Faye.map(channel,function(c){return this.unsubscribe(c,callback,context)},this);var dead=this._channels.unsubscribe(channel,callback,context);if(!dead)return;this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,channel);this._sendMessage({channel:Faye.Channel.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:channel},{},function(response){if(!response.successful)return;var channels=[].concat(response.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,channels)},this)},this)},publish:function(channel,data,options){Faye.validateOptions(options||{},["attempts","deadline"]);var publication=new Faye.Publication;this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,channel,data);this._sendMessage({channel:channel,data:data,clientId:this._dispatcher.clientId},options,function(response){if(response.successful)publication.setDeferredStatus("succeeded");else publication.setDeferredStatus("failed",Faye.Error.parse(response.error))},this)},this);return publication},_sendMessage:function(message,options,callback,context){message.id=this._generateMessageId();var timeout=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",message,null,function(message){if(!message)return;if(callback)this._responseCallbacks[message.id]=[callback,context];this._dispatcher.sendMessage(message,timeout,options||{})},this)},_generateMessageId:function(){this._messageId+=1;if(this._messageId>=Math.pow(2,32))this._messageId=0;return this._messageId.toString(36)},_receiveMessage:function(message){var id=message.id,callback;if(message.successful!==undefined){callback=this._responseCallbacks[id];delete this._responseCallbacks[id]}this.pipeThroughExtensions("incoming",message,null,function(message){if(!message)return;if(message.advice)this._handleAdvice(message.advice);this._deliverMessage(message);if(callback)callback[0].call(callback[1],message)},this)},_handleAdvice:function(advice){Faye.extend(this._advice,advice);this._dispatcher.timeout=this._advice.timeout/1e3;if(this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED){this._state=this.UNCONNECTED;this._dispatcher.clientId=null;this._cycleConnection()}},_deliverMessage:function(message){if(!message.channel||message.data===undefined)return;this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,message.channel,message.data);this._channels.distributeMessage(message)},_cycleConnection:function(){if(this._connectRequest){this._connectRequest=null;this.info("Closed connection for ?",this._dispatcher.clientId)}var self=this;Faye.ENV.setTimeout(function(){self.connect()},this._advice.interval)}});Faye.extend(Faye.Client.prototype,Faye.Deferrable);Faye.extend(Faye.Client.prototype,Faye.Publisher);Faye.extend(Faye.Client.prototype,Faye.Logging);Faye.extend(Faye.Client.prototype,Faye.Extensible);Faye.Dispatcher=Faye.Class({MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(client,endpoint,options){this._client=client;this.endpoint=Faye.URI.parse(endpoint);this._alternates=options.endpoints||{};this.cookies=Faye.Cookies&&new Faye.Cookies.CookieJar;this._disabled=[];this._envelopes={};this.headers={};this.retry=options.retry||this.DEFAULT_RETRY;this._scheduler=options.scheduler||Faye.Scheduler;this._state=0;this.transports={};this.wsExtensions=[];this.proxy=options.proxy||{};if(typeof this._proxy==="string")this._proxy={origin:this._proxy};var exts=options.websocketExtensions;if(exts){exts=[].concat(exts);for(var i=0,n=exts.length;i<n;i++)this.addWebsocketExtension(exts[i])}this.tls=options.tls||{};this.tls.ca=this.tls.ca||options.ca;for(var type in this._alternates)this._alternates[type]=Faye.URI.parse(this._alternates[type]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(connectionType){return this._alternates[connectionType]||this.endpoint},addWebsocketExtension:function(extension){this.wsExtensions.push(extension)},disable:function(feature){this._disabled.push(feature)},setHeader:function(name,value){this.headers[name]=value},close:function(){var transport=this._transport;delete this._transport;if(transport)transport.close()},getConnectionTypes:function(){return Faye.Transport.getConnectionTypes()},selectTransport:function(transportTypes){Faye.Transport.get(this,transportTypes,this._disabled,function(transport){this.debug("Selected ? transport for ?",transport.connectionType,Faye.URI.stringify(transport.endpoint));if(transport===this._transport)return;if(this._transport)this._transport.close();this._transport=transport;this.connectionType=transport.connectionType},this)},sendMessage:function(message,timeout,options){options=options||{};var id=message.id,attempts=options.attempts,deadline=options.deadline&&(new Date).getTime()+options.deadline*1e3,envelope=this._envelopes[id],scheduler;if(!envelope){scheduler=new this._scheduler(message,{timeout:timeout,interval:this.retry,attempts:attempts,deadline:deadline});envelope=this._envelopes[id]={message:message,scheduler:scheduler}}this._sendEnvelope(envelope)},_sendEnvelope:function(envelope){if(!this._transport)return;if(envelope.request||envelope.timer)return;var message=envelope.message,scheduler=envelope.scheduler,self=this;if(!scheduler.isDeliverable()){scheduler.abort();delete this._envelopes[message.id];return}envelope.timer=Faye.ENV.setTimeout(function(){self.handleError(message)},scheduler.getTimeout()*1e3);scheduler.send();envelope.request=this._transport.sendMessage(message)},handleResponse:function(reply){var envelope=this._envelopes[reply.id];if(reply.successful!==undefined&&envelope){envelope.scheduler.succeed();delete this._envelopes[reply.id];Faye.ENV.clearTimeout(envelope.timer)}this.trigger("message",reply);if(this._state===this.UP)return;this._state=this.UP;this._client.trigger("transport:up")},handleError:function(message,immediate){var envelope=this._envelopes[message.id],request=envelope&&envelope.request,self=this;if(!request)return;request.then(function(req){if(req&&req.abort)req.abort()});var scheduler=envelope.scheduler;scheduler.fail();Faye.ENV.clearTimeout(envelope.timer);envelope.request=envelope.timer=null;if(immediate){this._sendEnvelope(envelope)}else{envelope.timer=Faye.ENV.setTimeout(function(){envelope.timer=null;self._sendEnvelope(envelope)},scheduler.getInterval()*1e3)}if(this._state===this.DOWN)return;this._state=this.DOWN;this._client.trigger("transport:down")}});Faye.extend(Faye.Dispatcher.prototype,Faye.Publisher);Faye.extend(Faye.Dispatcher.prototype,Faye.Logging);Faye.Scheduler=function(message,options){this.message=message;this.options=options;this.attempts=0};Faye.extend(Faye.Scheduler.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var attempts=this.options.attempts,made=this.attempts,deadline=this.options.deadline,now=(new Date).getTime();if(attempts!==undefined&&made>=attempts)return false;if(deadline!==undefined&&now>deadline)return false;return true},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}});Faye.Transport=Faye.extend(Faye.Class({DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},SECURE_PROTOCOLS:["https:","wss:"],MAX_DELAY:0,batching:true,initialize:function(dispatcher,endpoint){this._dispatcher=dispatcher;this.endpoint=endpoint;this._outbox=[];this._proxy=Faye.extend({},this._dispatcher.proxy);if(!this._proxy.origin&&Faye.NodeAdapter){this._proxy.origin=Faye.indexOf(this.SECURE_PROTOCOLS,this.endpoint.protocol)>=0?process.env.HTTPS_PROXY||process.env.https_proxy:process.env.HTTP_PROXY||process.env.http_proxy}},close:function(){},encode:function(messages){return""},sendMessage:function(message){this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),message);if(!this.batching)return Faye.Promise.fulfilled(this.request([message]));this._outbox.push(message);this._flushLargeBatch();this._promise=this._promise||new Faye.Promise;if(message.channel===Faye.Channel.HANDSHAKE){this.addTimeout("publish",.01,this._flush,this);return this._promise}if(message.channel===Faye.Channel.CONNECT)this._connectMessage=message;this.addTimeout("publish",this.MAX_DELAY,this._flush,this);return this._promise},_flush:function(){this.removeTimeout("publish");if(this._outbox.length>1&&this._connectMessage)this._connectMessage.advice={timeout:0};Faye.Promise.fulfill(this._promise,this.request(this._outbox));delete this._promise;this._connectMessage=null;this._outbox=[]},_flushLargeBatch:function(){var string=this.encode(this._outbox);if(string.length<this._dispatcher.maxRequestSize)return;var last=this._outbox.pop();this._flush();if(last)this._outbox.push(last)},_receive:function(replies){if(!replies)return;replies=[].concat(replies);this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,replies);for(var i=0,n=replies.length;i<n;i++)this._dispatcher.handleResponse(replies[i])},_handleError:function(messages,immediate){messages=[].concat(messages);this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,Faye.URI.stringify(this.endpoint),this.connectionType,messages);for(var i=0,n=messages.length;i<n;i++)this._dispatcher.handleError(messages[i])},_getCookies:function(){var cookies=this._dispatcher.cookies,url=Faye.URI.stringify(this.endpoint);if(!cookies)return"";return Faye.map(cookies.getCookiesSync(url),function(cookie){return cookie.cookieString()}).join("; ")},_storeCookies:function(setCookie){var cookies=this._dispatcher.cookies,url=Faye.URI.stringify(this.endpoint),cookie;if(!setCookie||!cookies)return;setCookie=[].concat(setCookie);for(var i=0,n=setCookie.length;i<n;i++){cookie=Faye.Cookies.Cookie.parse(setCookie[i]);cookies.setCookieSync(cookie,url)}}}),{get:function(dispatcher,allowed,disabled,callback,context){var endpoint=dispatcher.endpoint;Faye.asyncEach(this._transports,function(pair,resume){var connType=pair[0],klass=pair[1],connEndpoint=dispatcher.endpointFor(connType);if(Faye.indexOf(disabled,connType)>=0)return resume();if(Faye.indexOf(allowed,connType)<0){klass.isUsable(dispatcher,connEndpoint,function(){});return resume()}klass.isUsable(dispatcher,connEndpoint,function(isUsable){if(!isUsable)return resume();var transport=klass.hasOwnProperty("create")?klass.create(dispatcher,connEndpoint):new klass(dispatcher,connEndpoint);callback.call(context,transport)})},function(){throw new Error("Could not find a usable connection type for "+Faye.URI.stringify(endpoint))})},register:function(type,klass){this._transports.push([type,klass]);klass.prototype.connectionType=type},getConnectionTypes:function(){return Faye.map(this._transports,function(t){return t[0]})},_transports:[]});Faye.extend(Faye.Transport.prototype,Faye.Logging);Faye.extend(Faye.Transport.prototype,Faye.Timeouts);Faye.Event={_registry:[],on:function(element,eventName,callback,context){var wrapped=function(){callback.call(context)};if(element.addEventListener)element.addEventListener(eventName,wrapped,false);else element.attachEvent("on"+eventName,wrapped);this._registry.push({_element:element,_type:eventName,_callback:callback,_context:context,_handler:wrapped})},detach:function(element,eventName,callback,context){var i=this._registry.length,register;while(i--){register=this._registry[i];if(element&&element!==register._element||eventName&&eventName!==register._type||callback&&callback!==register._callback||context&&context!==register._context)continue;if(register._element.removeEventListener)register._element.removeEventListener(register._type,register._handler,false);else register._element.detachEvent("on"+register._type,register._handler);this._registry.splice(i,1);register=null}}};if(Faye.ENV.onunload!==undefined)Faye.Event.on(Faye.ENV,"unload",Faye.Event.detach,Faye.Event);if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}Faye.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})};if(typeof JSON.stringify!=="function"){JSON.stringify=Faye.stringify}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();Faye.Transport.WebSocket=Faye.extend(Faye.Class(Faye.Transport,{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:false,isUsable:function(callback,context){this.callback(function(){callback.call(context,true)});this.errback(function(){callback.call(context,false)});this.connect()},request:function(messages){this._pending=this._pending||new Faye.Set;for(var i=0,n=messages.length;i<n;i++)this._pending.add(messages[i]);var promise=new Faye.Promise;this.callback(function(socket){if(!socket)return;socket.send(Faye.toJSON(messages));Faye.Promise.fulfill(promise,socket)},this);this.connect();return{abort:function(){promise.then(function(ws){ws.close()})}}},connect:function(){if(Faye.Transport.WebSocket._unloaded)return;this._state=this._state||this.UNCONNECTED;if(this._state!==this.UNCONNECTED)return;this._state=this.CONNECTING;var socket=this._createSocket();if(!socket)return this.setDeferredStatus("failed");var self=this;socket.onopen=function(){if(socket.headers)self._storeCookies(socket.headers["set-cookie"]);self._socket=socket;self._state=self.CONNECTED;self._everConnected=true;self._ping();self.setDeferredStatus("succeeded",socket)};var closed=false;socket.onclose=socket.onerror=function(){if(closed)return;closed=true;var wasConnected=self._state===self.CONNECTED;socket.onopen=socket.onclose=socket.onerror=socket.onmessage=null;delete self._socket;self._state=self.UNCONNECTED;self.removeTimeout("ping");self.setDeferredStatus("unknown");var pending=self._pending?self._pending.toArray():[];delete self._pending;if(wasConnected){self._handleError(pending,true)}else if(self._everConnected){self._handleError(pending)}else{self.setDeferredStatus("failed")}};socket.onmessage=function(event){var replies=JSON.parse(event.data);if(!replies)return;replies=[].concat(replies);for(var i=0,n=replies.length;i<n;i++){if(replies[i].successful===undefined)continue;self._pending.remove(replies[i])}self._receive(replies)}},close:function(){if(!this._socket)return;this._socket.close()},_createSocket:function(){var url=Faye.Transport.WebSocket.getSocketUrl(this.endpoint),headers=this._dispatcher.headers,extensions=this._dispatcher.wsExtensions,cookie=this._getCookies(),tls=this._dispatcher.tls,options={extensions:extensions,headers:headers,proxy:this._proxy,tls:tls};if(cookie!=="")options.headers["Cookie"]=cookie;if(Faye.WebSocket)return new Faye.WebSocket.Client(url,[],options);if(Faye.ENV.MozWebSocket)return new MozWebSocket(url);if(Faye.ENV.WebSocket)return new WebSocket(url)},_ping:function(){if(!this._socket)return;this._socket.send("[]");this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this)}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(dispatcher,endpoint){var sockets=dispatcher.transports.websocket=dispatcher.transports.websocket||{};sockets[endpoint.href]=sockets[endpoint.href]||new this(dispatcher,endpoint);return sockets[endpoint.href]},getSocketUrl:function(endpoint){endpoint=Faye.copyObject(endpoint);endpoint.protocol=this.PROTOCOLS[endpoint.protocol];return Faye.URI.stringify(endpoint)},isUsable:function(dispatcher,endpoint,callback,context){this.create(dispatcher,endpoint).isUsable(callback,context)}});Faye.extend(Faye.Transport.WebSocket.prototype,Faye.Deferrable);Faye.Transport.register("websocket",Faye.Transport.WebSocket);if(Faye.Event&&Faye.ENV.onbeforeunload!==undefined)Faye.Event.on(Faye.ENV,"beforeunload",function(){Faye.Transport.WebSocket._unloaded=true});Faye.Transport.EventSource=Faye.extend(Faye.Class(Faye.Transport,{initialize:function(dispatcher,endpoint){Faye.Transport.prototype.initialize.call(this,dispatcher,endpoint);if(!Faye.ENV.EventSource)return this.setDeferredStatus("failed");this._xhr=new Faye.Transport.XHR(dispatcher,endpoint);endpoint=Faye.copyObject(endpoint);endpoint.pathname+="/"+dispatcher.clientId;var socket=new EventSource(Faye.URI.stringify(endpoint)),self=this;socket.onopen=function(){self._everConnected=true;self.setDeferredStatus("succeeded")};socket.onerror=function(){if(self._everConnected){self._handleError([])}else{self.setDeferredStatus("failed");socket.close()}};socket.onmessage=function(event){self._receive(JSON.parse(event.data))};this._socket=socket},close:function(){if(!this._socket)return;this._socket.onopen=this._socket.onerror=this._socket.onmessage=null;this._socket.close();delete this._socket},isUsable:function(callback,context){this.callback(function(){callback.call(context,true)});this.errback(function(){callback.call(context,false)})},encode:function(messages){return this._xhr.encode(messages)},request:function(messages){return this._xhr.request(messages)}}),{isUsable:function(dispatcher,endpoint,callback,context){var id=dispatcher.clientId;if(!id)return callback.call(context,false);Faye.Transport.XHR.isUsable(dispatcher,endpoint,function(usable){if(!usable)return callback.call(context,false);this.create(dispatcher,endpoint).isUsable(callback,context)},this)},create:function(dispatcher,endpoint){var sockets=dispatcher.transports.eventsource=dispatcher.transports.eventsource||{},id=dispatcher.clientId;var url=Faye.copyObject(endpoint);url.pathname+="/"+(id||"");url=Faye.URI.stringify(url);sockets[url]=sockets[url]||new this(dispatcher,endpoint);return sockets[url]}});Faye.extend(Faye.Transport.EventSource.prototype,Faye.Deferrable);Faye.Transport.register("eventsource",Faye.Transport.EventSource);Faye.Transport.XHR=Faye.extend(Faye.Class(Faye.Transport,{encode:function(messages){return Faye.toJSON(messages)},request:function(messages){var href=this.endpoint.href,xhr=Faye.ENV.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,self=this;xhr.open("POST",href,true);xhr.setRequestHeader("Content-Type","application/json");xhr.setRequestHeader("Pragma","no-cache");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");var headers=this._dispatcher.headers;for(var key in headers){if(!headers.hasOwnProperty(key))continue;xhr.setRequestHeader(key,headers[key])}var abort=function(){xhr.abort()};if(Faye.ENV.onbeforeunload!==undefined)Faye.Event.on(Faye.ENV,"beforeunload",abort);xhr.onreadystatechange=function(){if(!xhr||xhr.readyState!==4)return;var replies=null,status=xhr.status,text=xhr.responseText,successful=status>=200&&status<300||status===304||status===1223;if(Faye.ENV.onbeforeunload!==undefined)Faye.Event.detach(Faye.ENV,"beforeunload",abort);xhr.onreadystatechange=function(){};xhr=null;if(!successful)return self._handleError(messages);try{replies=JSON.parse(text)}catch(e){}if(replies)self._receive(replies);else self._handleError(messages)};xhr.send(this.encode(messages));return xhr}}),{isUsable:function(dispatcher,endpoint,callback,context){callback.call(context,Faye.URI.isSameOrigin(endpoint))}});Faye.Transport.register("long-polling",Faye.Transport.XHR);Faye.Transport.CORS=Faye.extend(Faye.Class(Faye.Transport,{encode:function(messages){return"message="+encodeURIComponent(Faye.toJSON(messages))},request:function(messages){var xhrClass=Faye.ENV.XDomainRequest?XDomainRequest:XMLHttpRequest,xhr=new xhrClass,headers=this._dispatcher.headers,self=this,key;xhr.open("POST",Faye.URI.stringify(this.endpoint),true);if(xhr.setRequestHeader){xhr.setRequestHeader("Pragma","no-cache");for(key in headers){if(!headers.hasOwnProperty(key))continue;xhr.setRequestHeader(key,headers[key])}}var cleanUp=function(){if(!xhr)return false;xhr.onload=xhr.onerror=xhr.ontimeout=xhr.onprogress=null;xhr=null};xhr.onload=function(){var replies=null;try{replies=JSON.parse(xhr.responseText)}catch(e){}cleanUp();if(replies)self._receive(replies);else self._handleError(messages)};xhr.onerror=xhr.ontimeout=function(){cleanUp();self._handleError(messages)};xhr.onprogress=function(){};xhr.send(this.encode(messages));return xhr}}),{isUsable:function(dispatcher,endpoint,callback,context){if(Faye.URI.isSameOrigin(endpoint))return callback.call(context,false);if(Faye.ENV.XDomainRequest)return callback.call(context,endpoint.protocol===Faye.ENV.location.protocol);if(Faye.ENV.XMLHttpRequest){var xhr=new Faye.ENV.XMLHttpRequest;return callback.call(context,xhr.withCredentials!==undefined)}return callback.call(context,false)}});Faye.Transport.register("cross-origin-long-polling",Faye.Transport.CORS);Faye.Transport.JSONP=Faye.extend(Faye.Class(Faye.Transport,{encode:function(messages){var url=Faye.copyObject(this.endpoint);url.query.message=Faye.toJSON(messages);url.query.jsonp="__jsonp"+Faye.Transport.JSONP._cbCount+"__";return Faye.URI.stringify(url)},request:function(messages){var head=document.getElementsByTagName("head")[0],script=document.createElement("script"),callbackName=Faye.Transport.JSONP.getCallbackName(),endpoint=Faye.copyObject(this.endpoint),self=this;endpoint.query.message=Faye.toJSON(messages);endpoint.query.jsonp=callbackName;var cleanup=function(){if(!Faye.ENV[callbackName])return false;Faye.ENV[callbackName]=undefined;try{delete Faye.ENV[callbackName]}catch(e){}script.parentNode.removeChild(script)};Faye.ENV[callbackName]=function(replies){cleanup();self._receive(replies)};script.type="text/javascript";script.src=Faye.URI.stringify(endpoint);head.appendChild(script);script.onerror=function(){cleanup();self._handleError(messages)};return{abort:cleanup}}}),{_cbCount:0,getCallbackName:function(){this._cbCount+=1;return"__jsonp"+this._cbCount+"__"},isUsable:function(dispatcher,endpoint,callback,context){callback.call(context,true)}});Faye.Transport.register("callback-polling",Faye.Transport.JSONP)})()}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:11}],8:[function(require,module,exports){var m=function app(window,undefined){var OBJECT="[object Object]",ARRAY="[object Array]",STRING="[object String]",FUNCTION="function";var type={}.toString;var parser=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,attrParser=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/;var voidElements=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/;var noop=function(){};var $document,$location,$requestAnimationFrame,$cancelAnimationFrame;function initialize(window){$document=window.document;$location=window.location;$cancelAnimationFrame=window.cancelAnimationFrame||window.clearTimeout;$requestAnimationFrame=window.requestAnimationFrame||window.setTimeout}initialize(window);function m(){var args=[].slice.call(arguments);var hasAttrs=args[1]!=null&&type.call(args[1])===OBJECT&&!("tag"in args[1]||"view"in args[1])&&!("subtree"in args[1]);var attrs=hasAttrs?args[1]:{};var classAttrName="class"in attrs?"class":"className";var cell={tag:"div",attrs:{}};var match,classes=[];if(type.call(args[0])!=STRING)throw new Error("selector in m(selector, attrs, children) should be a string");while(match=parser.exec(args[0])){if(match[1]===""&&match[2])cell.tag=match[2];else if(match[1]==="#")cell.attrs.id=match[2];else if(match[1]===".")classes.push(match[2]);else if(match[3][0]==="["){var pair=attrParser.exec(match[3]);cell.attrs[pair[1]]=pair[3]||(pair[2]?"":true)}}var children=hasAttrs?args.slice(2):args.slice(1);if(children.length===1&&type.call(children[0])===ARRAY){cell.children=children[0]}else{cell.children=children}for(var attrName in attrs){if(attrs.hasOwnProperty(attrName)){if(attrName===classAttrName&&attrs[attrName]!=null&&attrs[attrName]!==""){classes.push(attrs[attrName]);cell.attrs[attrName]=""}else cell.attrs[attrName]=attrs[attrName]}}if(classes.length>0)cell.attrs[classAttrName]=classes.join(" ");return cell}function build(parentElement,parentTag,parentCache,parentIndex,data,cached,shouldReattach,index,editable,namespace,configs){try{if(data==null||data.toString()==null)data=""}catch(e){data=""}if(data.subtree==="retain")return cached;var cachedType=type.call(cached),dataType=type.call(data);if(cached==null||cachedType!==dataType){if(cached!=null){if(parentCache&&parentCache.nodes){var offset=index-parentIndex;var end=offset+(dataType===ARRAY?data:cached.nodes).length;clear(parentCache.nodes.slice(offset,end),parentCache.slice(offset,end))}else if(cached.nodes)clear(cached.nodes,cached)}cached=new data.constructor;if(cached.tag)cached={};cached.nodes=[]}if(dataType===ARRAY){for(var i=0,len=data.length;i<len;i++){if(type.call(data[i])===ARRAY){data=data.concat.apply([],data);i--;len=data.length}}var nodes=[],intact=cached.length===data.length,subArrayCount=0;var DELETION=1,INSERTION=2,MOVE=3;var existing={},shouldMaintainIdentities=false;for(var i=0;i<cached.length;i++){if(cached[i]&&cached[i].attrs&&cached[i].attrs.key!=null){shouldMaintainIdentities=true;existing[cached[i].attrs.key]={action:DELETION,index:i}}}var guid=0;for(var i=0,len=data.length;i<len;i++){if(data[i]&&data[i].attrs&&data[i].attrs.key!=null){for(var j=0,len=data.length;j<len;j++){if(data[j]&&data[j].attrs&&data[j].attrs.key==null)data[j].attrs.key="__mithril__"+guid++}break}}if(shouldMaintainIdentities){var keysDiffer=false;if(data.length!=cached.length)keysDiffer=true;else for(var i=0,cachedCell,dataCell;cachedCell=cached[i],dataCell=data[i];i++){if(cachedCell.attrs&&dataCell.attrs&&cachedCell.attrs.key!=dataCell.attrs.key){keysDiffer=true;break}}if(keysDiffer){for(var i=0,len=data.length;i<len;i++){if(data[i]&&data[i].attrs){if(data[i].attrs.key!=null){var key=data[i].attrs.key;if(!existing[key])existing[key]={action:INSERTION,index:i};else existing[key]={action:MOVE,index:i,from:existing[key].index,element:cached.nodes[existing[key].index]||$document.createElement("div")}}}}var actions=[];for(var prop in existing)actions.push(existing[prop]);var changes=actions.sort(sortChanges);var newCached=new Array(cached.length);newCached.nodes=cached.nodes.slice();for(var i=0,change;change=changes[i];i++){if(change.action===DELETION){clear(cached[change.index].nodes,cached[change.index]);newCached.splice(change.index,1)}if(change.action===INSERTION){var dummy=$document.createElement("div");dummy.key=data[change.index].attrs.key;parentElement.insertBefore(dummy,parentElement.childNodes[change.index]||null);newCached.splice(change.index,0,{attrs:{key:data[change.index].attrs.key},nodes:[dummy]});newCached.nodes[change.index]=dummy}if(change.action===MOVE){if(parentElement.childNodes[change.index]!==change.element&&change.element!==null){parentElement.insertBefore(change.element,parentElement.childNodes[change.index]||null)}newCached[change.index]=cached[change.from];newCached.nodes[change.index]=change.element}}cached=newCached}}for(var i=0,cacheCount=0,len=data.length;i<len;i++){var item=build(parentElement,parentTag,cached,index,data[i],cached[cacheCount],shouldReattach,index+subArrayCount||subArrayCount,editable,namespace,configs);if(item===undefined)continue;if(!item.nodes.intact)intact=false;if(item.$trusted){subArrayCount+=(item.match(/<[^\/]|\>\s*[^<]/g)||[0]).length}else subArrayCount+=type.call(item)===ARRAY?item.length:1;cached[cacheCount++]=item}if(!intact){for(var i=0,len=data.length;i<len;i++){if(cached[i]!=null)nodes.push.apply(nodes,cached[i].nodes)}for(var i=0,node;node=cached.nodes[i];i++){if(node.parentNode!=null&&nodes.indexOf(node)<0)clear([node],[cached[i]])}if(data.length<cached.length)cached.length=data.length;cached.nodes=nodes}}else if(data!=null&&dataType===OBJECT){var views=[],controllers=[];while(data.view){var view=data.view.$original||data.view;var controllerIndex=m.redraw.strategy()=="diff"&&cached.views?cached.views.indexOf(view):-1;var controller=controllerIndex>-1?cached.controllers[controllerIndex]:new(data.controller||noop);var key=data&&data.attrs&&data.attrs.key;data=pendingRequests==0||cached&&cached.controllers&&cached.controllers.indexOf(controller)>-1?data.view(controller):{tag:"placeholder"};if(data.subtree==="retain")return cached;if(key){if(!data.attrs)data.attrs={};data.attrs.key=key}if(controller.onunload)unloaders.push({controller:controller,handler:controller.onunload});views.push(view);controllers.push(controller)}if(!data.tag&&controllers.length)throw new Error("Component template must return a virtual element, not an array, string, etc.");if(!data.attrs)data.attrs={};if(!cached.attrs)cached.attrs={};var dataAttrKeys=Object.keys(data.attrs);var hasKeys=dataAttrKeys.length>("key"in data.attrs?1:0);if(data.tag!=cached.tag||dataAttrKeys.sort().join()!=Object.keys(cached.attrs).sort().join()||data.attrs.id!=cached.attrs.id||data.attrs.key!=cached.attrs.key||m.redraw.strategy()=="all"&&(!cached.configContext||cached.configContext.retain!==true)||m.redraw.strategy()=="diff"&&cached.configContext&&cached.configContext.retain===false){
if(cached.nodes.length)clear(cached.nodes);if(cached.configContext&&typeof cached.configContext.onunload===FUNCTION)cached.configContext.onunload();if(cached.controllers){for(var i=0,controller;controller=cached.controllers[i];i++){if(typeof controller.onunload===FUNCTION)controller.onunload({preventDefault:noop})}}}if(type.call(data.tag)!=STRING)return;var node,isNew=cached.nodes.length===0;if(data.attrs.xmlns)namespace=data.attrs.xmlns;else if(data.tag==="svg")namespace="http://www.w3.org/2000/svg";else if(data.tag==="math")namespace="http://www.w3.org/1998/Math/MathML";if(isNew){if(data.attrs.is)node=namespace===undefined?$document.createElement(data.tag,data.attrs.is):$document.createElementNS(namespace,data.tag,data.attrs.is);else node=namespace===undefined?$document.createElement(data.tag):$document.createElementNS(namespace,data.tag);cached={tag:data.tag,attrs:hasKeys?setAttributes(node,data.tag,data.attrs,{},namespace):data.attrs,children:data.children!=null&&data.children.length>0?build(node,data.tag,undefined,undefined,data.children,cached.children,true,0,data.attrs.contenteditable?node:editable,namespace,configs):data.children,nodes:[node]};if(controllers.length){cached.views=views;cached.controllers=controllers;for(var i=0,controller;controller=controllers[i];i++){if(controller.onunload&&controller.onunload.$old)controller.onunload=controller.onunload.$old;if(pendingRequests&&controller.onunload){var onunload=controller.onunload;controller.onunload=noop;controller.onunload.$old=onunload}}}if(cached.children&&!cached.children.nodes)cached.children.nodes=[];if(data.tag==="select"&&"value"in data.attrs)setAttributes(node,data.tag,{value:data.attrs.value},{},namespace);parentElement.insertBefore(node,parentElement.childNodes[index]||null)}else{node=cached.nodes[0];if(hasKeys)setAttributes(node,data.tag,data.attrs,cached.attrs,namespace);cached.children=build(node,data.tag,undefined,undefined,data.children,cached.children,false,0,data.attrs.contenteditable?node:editable,namespace,configs);cached.nodes.intact=true;if(controllers.length){cached.views=views;cached.controllers=controllers}if(shouldReattach===true&&node!=null)parentElement.insertBefore(node,parentElement.childNodes[index]||null)}if(typeof data.attrs["config"]===FUNCTION){var context=cached.configContext=cached.configContext||{};var callback=function(data,args){return function(){return data.attrs["config"].apply(data,args)}};configs.push(callback(data,[node,!isNew,context,cached]))}}else if(typeof data!=FUNCTION){var nodes;if(cached.nodes.length===0){if(data.$trusted){nodes=injectHTML(parentElement,index,data)}else{nodes=[$document.createTextNode(data)];if(!parentElement.nodeName.match(voidElements))parentElement.insertBefore(nodes[0],parentElement.childNodes[index]||null)}cached="string number boolean".indexOf(typeof data)>-1?new data.constructor(data):data;cached.nodes=nodes}else if(cached.valueOf()!==data.valueOf()||shouldReattach===true){nodes=cached.nodes;if(!editable||editable!==$document.activeElement){if(data.$trusted){clear(nodes,cached);nodes=injectHTML(parentElement,index,data)}else{if(parentTag==="textarea")parentElement.value=data;else if(editable)editable.innerHTML=data;else{if(nodes[0].nodeType===1||nodes.length>1){clear(cached.nodes,cached);nodes=[$document.createTextNode(data)]}parentElement.insertBefore(nodes[0],parentElement.childNodes[index]||null);nodes[0].nodeValue=data}}}cached=new data.constructor(data);cached.nodes=nodes}else cached.nodes.intact=true}return cached}function sortChanges(a,b){return a.action-b.action||a.index-b.index}function setAttributes(node,tag,dataAttrs,cachedAttrs,namespace){for(var attrName in dataAttrs){var dataAttr=dataAttrs[attrName];var cachedAttr=cachedAttrs[attrName];if(!(attrName in cachedAttrs)||cachedAttr!==dataAttr){cachedAttrs[attrName]=dataAttr;try{if(attrName==="config"||attrName=="key")continue;else if(typeof dataAttr===FUNCTION&&attrName.indexOf("on")===0){node[attrName]=autoredraw(dataAttr,node)}else if(attrName==="style"&&dataAttr!=null&&type.call(dataAttr)===OBJECT){for(var rule in dataAttr){if(cachedAttr==null||cachedAttr[rule]!==dataAttr[rule])node.style[rule]=dataAttr[rule]}for(var rule in cachedAttr){if(!(rule in dataAttr))node.style[rule]=""}}else if(namespace!=null){if(attrName==="href")node.setAttributeNS("http://www.w3.org/1999/xlink","href",dataAttr);else if(attrName==="className")node.setAttribute("class",dataAttr);else node.setAttribute(attrName,dataAttr)}else if(attrName in node&&!(attrName==="list"||attrName==="style"||attrName==="form"||attrName==="type"||attrName==="width"||attrName==="height")){if(tag!=="input"||node[attrName]!==dataAttr)node[attrName]=dataAttr}else node.setAttribute(attrName,dataAttr)}catch(e){if(e.message.indexOf("Invalid argument")<0)throw e}}else if(attrName==="value"&&tag==="input"&&node.value!=dataAttr){node.value=dataAttr}}return cachedAttrs}function clear(nodes,cached){for(var i=nodes.length-1;i>-1;i--){if(nodes[i]&&nodes[i].parentNode){try{nodes[i].parentNode.removeChild(nodes[i])}catch(e){}cached=[].concat(cached);if(cached[i])unload(cached[i])}}if(nodes.length!=0)nodes.length=0}function unload(cached){if(cached.configContext&&typeof cached.configContext.onunload===FUNCTION){cached.configContext.onunload();cached.configContext.onunload=null}if(cached.controllers){for(var i=0,controller;controller=cached.controllers[i];i++){if(typeof controller.onunload===FUNCTION)controller.onunload({preventDefault:noop})}}if(cached.children){if(type.call(cached.children)===ARRAY){for(var i=0,child;child=cached.children[i];i++)unload(child)}else if(cached.children.tag)unload(cached.children)}}function injectHTML(parentElement,index,data){var nextSibling=parentElement.childNodes[index];if(nextSibling){var isElement=nextSibling.nodeType!=1;var placeholder=$document.createElement("span");if(isElement){parentElement.insertBefore(placeholder,nextSibling||null);placeholder.insertAdjacentHTML("beforebegin",data);parentElement.removeChild(placeholder)}else nextSibling.insertAdjacentHTML("beforebegin",data)}else parentElement.insertAdjacentHTML("beforeend",data);var nodes=[];while(parentElement.childNodes[index]!==nextSibling){nodes.push(parentElement.childNodes[index]);index++}return nodes}function autoredraw(callback,object){return function(e){e=e||event;m.redraw.strategy("diff");m.startComputation();try{return callback.call(object,e)}finally{endFirstComputation()}}}var html;var documentNode={appendChild:function(node){if(html===undefined)html=$document.createElement("html");if($document.documentElement&&$document.documentElement!==node){$document.replaceChild(node,$document.documentElement)}else $document.appendChild(node);this.childNodes=$document.childNodes},insertBefore:function(node){this.appendChild(node)},childNodes:[]};var nodeCache=[],cellCache={};m.render=function(root,cell,forceRecreation){var configs=[];if(!root)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var id=getCellCacheKey(root);var isDocumentRoot=root===$document;var node=isDocumentRoot||root===$document.documentElement?documentNode:root;if(isDocumentRoot&&cell.tag!="html")cell={tag:"html",attrs:{},children:cell};if(cellCache[id]===undefined)clear(node.childNodes);if(forceRecreation===true)reset(root);cellCache[id]=build(node,null,undefined,undefined,cell,cellCache[id],false,0,null,undefined,configs);for(var i=0,len=configs.length;i<len;i++)configs[i]()};function getCellCacheKey(element){var index=nodeCache.indexOf(element);return index<0?nodeCache.push(element)-1:index}m.trust=function(value){value=new String(value);value.$trusted=true;return value};function gettersetter(store){var prop=function(){if(arguments.length)store=arguments[0];return store};prop.toJSON=function(){return store};return prop}m.prop=function(store){if((store!=null&&type.call(store)===OBJECT||typeof store===FUNCTION)&&typeof store.then===FUNCTION){return propify(store)}return gettersetter(store)};var roots=[],components=[],controllers=[],lastRedrawId=null,lastRedrawCallTime=0,computePreRedrawHook=null,computePostRedrawHook=null,prevented=false,topComponent,unloaders=[];var FRAME_BUDGET=16;function parameterize(component,args){var controller=function(){return(component.controller||noop).apply(this,args)||this};var view=function(ctrl){if(arguments.length>1)args=args.concat([].slice.call(arguments,1));return component.view.apply(component,args?[ctrl].concat(args):[ctrl])};view.$original=component.view;var output={controller:controller,view:view};if(args[0]&&args[0].key!=null)output.attrs={key:args[0].key};return output}m.component=function(component){return parameterize(component,[].slice.call(arguments,1))};m.mount=m.module=function(root,component){if(!root)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var index=roots.indexOf(root);if(index<0)index=roots.length;var isPrevented=false;var event={preventDefault:function(){isPrevented=true;computePreRedrawHook=computePostRedrawHook=null}};for(var i=0,unloader;unloader=unloaders[i];i++){unloader.handler.call(unloader.controller,event);unloader.controller.onunload=null}if(isPrevented){for(var i=0,unloader;unloader=unloaders[i];i++)unloader.controller.onunload=unloader.handler}else unloaders=[];if(controllers[index]&&typeof controllers[index].onunload===FUNCTION){controllers[index].onunload(event)}if(!isPrevented){m.redraw.strategy("all");m.startComputation();roots[index]=root;if(arguments.length>2)component=subcomponent(component,[].slice.call(arguments,2));var currentComponent=topComponent=component=component||{controller:function(){}};var constructor=component.controller||noop;var controller=new constructor;if(currentComponent===topComponent){controllers[index]=controller;components[index]=component}endFirstComputation();return controllers[index]}};var redrawing=false;m.redraw=function(force){if(redrawing)return;redrawing=true;if(lastRedrawId&&force!==true){if($requestAnimationFrame===window.requestAnimationFrame||new Date-lastRedrawCallTime>FRAME_BUDGET){if(lastRedrawId>0)$cancelAnimationFrame(lastRedrawId);lastRedrawId=$requestAnimationFrame(redraw,FRAME_BUDGET)}}else{redraw();lastRedrawId=$requestAnimationFrame(function(){lastRedrawId=null},FRAME_BUDGET)}redrawing=false};m.redraw.strategy=m.prop();function redraw(){if(computePreRedrawHook){computePreRedrawHook();computePreRedrawHook=null}for(var i=0,root;root=roots[i];i++){if(controllers[i]){var args=components[i].controller&&components[i].controller.$$args?[controllers[i]].concat(components[i].controller.$$args):[controllers[i]];m.render(root,components[i].view?components[i].view(controllers[i],args):"")}}if(computePostRedrawHook){computePostRedrawHook();computePostRedrawHook=null}lastRedrawId=null;lastRedrawCallTime=new Date;m.redraw.strategy("diff")}var pendingRequests=0;m.startComputation=function(){pendingRequests++};m.endComputation=function(){pendingRequests=Math.max(pendingRequests-1,0);if(pendingRequests===0)m.redraw()};var endFirstComputation=function(){if(m.redraw.strategy()=="none"){pendingRequests--;m.redraw.strategy("diff")}else m.endComputation()};m.withAttr=function(prop,withAttrCallback){return function(e){e=e||event;var currentTarget=e.currentTarget||this;withAttrCallback(prop in currentTarget?currentTarget[prop]:currentTarget.getAttribute(prop))}};var modes={pathname:"",hash:"#",search:"?"};var redirect=noop,routeParams,currentRoute,isDefaultRoute=false;m.route=function(){if(arguments.length===0)return currentRoute;else if(arguments.length===3&&type.call(arguments[1])===STRING){var root=arguments[0],defaultRoute=arguments[1],router=arguments[2];redirect=function(source){var path=currentRoute=normalizeRoute(source);if(!routeByValue(root,router,path)){if(isDefaultRoute)throw new Error("Ensure the default route matches one of the routes defined in m.route");isDefaultRoute=true;m.route(defaultRoute,true);isDefaultRoute=false}};var listener=m.route.mode==="hash"?"onhashchange":"onpopstate";window[listener]=function(){var path=$location[m.route.mode];if(m.route.mode==="pathname")path+=$location.search;if(currentRoute!=normalizeRoute(path)){redirect(path)}};computePreRedrawHook=setScroll;window[listener]()}else if(arguments[0].addEventListener||arguments[0].attachEvent){var element=arguments[0];var isInitialized=arguments[1];var context=arguments[2];var vdom=arguments[3];element.href=(m.route.mode!=="pathname"?$location.pathname:"")+modes[m.route.mode]+vdom.attrs.href;if(element.addEventListener){element.removeEventListener("click",routeUnobtrusive);element.addEventListener("click",routeUnobtrusive)}else{element.detachEvent("onclick",routeUnobtrusive);element.attachEvent("onclick",routeUnobtrusive)}}else if(type.call(arguments[0])===STRING){var oldRoute=currentRoute;currentRoute=arguments[0];var args=arguments[1]||{};var queryIndex=currentRoute.indexOf("?");var params=queryIndex>-1?parseQueryString(currentRoute.slice(queryIndex+1)):{};for(var i in args)params[i]=args[i];var querystring=buildQueryString(params);var currentPath=queryIndex>-1?currentRoute.slice(0,queryIndex):currentRoute;if(querystring)currentRoute=currentPath+(currentPath.indexOf("?")===-1?"?":"&")+querystring;var shouldReplaceHistoryEntry=(arguments.length===3?arguments[2]:arguments[1])===true||oldRoute===arguments[0];if(window.history.pushState){computePreRedrawHook=setScroll;computePostRedrawHook=function(){window.history[shouldReplaceHistoryEntry?"replaceState":"pushState"](null,$document.title,modes[m.route.mode]+currentRoute)};redirect(modes[m.route.mode]+currentRoute)}else{$location[m.route.mode]=currentRoute;redirect(modes[m.route.mode]+currentRoute)}}};m.route.param=function(key){if(!routeParams)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return routeParams[key]};m.route.mode="search";function normalizeRoute(route){return route.slice(modes[m.route.mode].length)}function routeByValue(root,router,path){routeParams={};var queryStart=path.indexOf("?");if(queryStart!==-1){routeParams=parseQueryString(path.substr(queryStart+1,path.length));path=path.substr(0,queryStart)}var keys=Object.keys(router);var index=keys.indexOf(path);if(index!==-1){m.mount(root,router[keys[index]]);return true}for(var route in router){if(route===path){m.mount(root,router[route]);return true}var matcher=new RegExp("^"+route.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(matcher.test(path)){path.replace(matcher,function(){var keys=route.match(/:[^\/]+/g)||[];var values=[].slice.call(arguments,1,-2);for(var i=0,len=keys.length;i<len;i++)routeParams[keys[i].replace(/:|\./g,"")]=decodeURIComponent(values[i]);m.mount(root,router[route])});return true}}}function routeUnobtrusive(e){e=e||event;if(e.ctrlKey||e.metaKey||e.which===2)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false;var currentTarget=e.currentTarget||e.srcElement;var args=m.route.mode==="pathname"&&currentTarget.search?parseQueryString(currentTarget.search.slice(1)):{};while(currentTarget&&currentTarget.nodeName.toUpperCase()!="A")currentTarget=currentTarget.parentNode;m.route(currentTarget[m.route.mode].slice(modes[m.route.mode].length),args)}function setScroll(){if(m.route.mode!="hash"&&$location.hash)$location.hash=$location.hash;else window.scrollTo(0,0)}function buildQueryString(object,prefix){var duplicates={};var str=[];for(var prop in object){var key=prefix?prefix+"["+prop+"]":prop;var value=object[prop];var valueType=type.call(value);var pair=value===null?encodeURIComponent(key):valueType===OBJECT?buildQueryString(value,key):valueType===ARRAY?value.reduce(function(memo,item){if(!duplicates[key])duplicates[key]={};if(!duplicates[key][item]){duplicates[key][item]=true;return memo.concat(encodeURIComponent(key)+"="+encodeURIComponent(item))}return memo},[]).join("&"):encodeURIComponent(key)+"="+encodeURIComponent(value);if(value!==undefined)str.push(pair)}return str.join("&")}function parseQueryString(str){if(str.charAt(0)==="?")str=str.substring(1);var pairs=str.split("&"),params={};for(var i=0,len=pairs.length;i<len;i++){var pair=pairs[i].split("=");var key=decodeURIComponent(pair[0]);var value=pair.length==2?decodeURIComponent(pair[1]):null;if(params[key]!=null){if(type.call(params[key])!==ARRAY)params[key]=[params[key]];params[key].push(value)}else params[key]=value}return params}m.route.buildQueryString=buildQueryString;m.route.parseQueryString=parseQueryString;function reset(root){var cacheKey=getCellCacheKey(root);clear(root.childNodes,cellCache[cacheKey]);cellCache[cacheKey]=undefined}m.deferred=function(){var deferred=new Deferred;deferred.promise=propify(deferred.promise);return deferred};function propify(promise,initialValue){var prop=m.prop(initialValue);promise.then(prop);prop.then=function(resolve,reject){return propify(promise.then(resolve,reject),initialValue)};return prop}function Deferred(successCallback,failureCallback){var RESOLVING=1,REJECTING=2,RESOLVED=3,REJECTED=4;var self=this,state=0,promiseValue=0,next=[];self["promise"]={};self["resolve"]=function(value){if(!state){promiseValue=value;state=RESOLVING;fire()}return this};self["reject"]=function(value){if(!state){promiseValue=value;state=REJECTING;fire()}return this};self.promise["then"]=function(successCallback,failureCallback){var deferred=new Deferred(successCallback,failureCallback);if(state===RESOLVED){deferred.resolve(promiseValue)}else if(state===REJECTED){deferred.reject(promiseValue)}else{next.push(deferred)}return deferred.promise};function finish(type){state=type||REJECTED;next.map(function(deferred){state===RESOLVED&&deferred.resolve(promiseValue)||deferred.reject(promiseValue)})}function thennable(then,successCallback,failureCallback,notThennableCallback){if((promiseValue!=null&&type.call(promiseValue)===OBJECT||typeof promiseValue===FUNCTION)&&typeof then===FUNCTION){try{var count=0;then.call(promiseValue,function(value){if(count++)return;promiseValue=value;successCallback()},function(value){if(count++)return;promiseValue=value;failureCallback()})}catch(e){m.deferred.onerror(e);promiseValue=e;failureCallback()}}else{notThennableCallback()}}function fire(){var then;try{then=promiseValue&&promiseValue.then}catch(e){m.deferred.onerror(e);promiseValue=e;state=REJECTING;return fire()}thennable(then,function(){state=RESOLVING;fire()},function(){state=REJECTING;fire()},function(){try{if(state===RESOLVING&&typeof successCallback===FUNCTION){promiseValue=successCallback(promiseValue)}else if(state===REJECTING&&typeof failureCallback==="function"){promiseValue=failureCallback(promiseValue);state=RESOLVING}}catch(e){m.deferred.onerror(e);promiseValue=e;return finish()}if(promiseValue===self){promiseValue=TypeError();finish()}else{thennable(then,function(){finish(RESOLVED)},finish,function(){finish(state===RESOLVING&&RESOLVED)})}})}}m.deferred.onerror=function(e){if(type.call(e)==="[object Error]"&&!e.constructor.toString().match(/ Error/))throw e};m.sync=function(args){var method="resolve";function synchronizer(pos,resolved){return function(value){results[pos]=value;if(!resolved)method="reject";if(--outstanding===0){deferred.promise(results);deferred[method](results)}return value}}var deferred=m.deferred();var outstanding=args.length;var results=new Array(outstanding);if(args.length>0){for(var i=0;i<args.length;i++){args[i].then(synchronizer(i,true),synchronizer(i,false))}}else deferred.resolve([]);return deferred.promise};function identity(value){return value}function ajax(options){if(options.dataType&&options.dataType.toLowerCase()==="jsonp"){var callbackKey="mithril_callback_"+(new Date).getTime()+"_"+Math.round(Math.random()*1e16).toString(36);var script=$document.createElement("script");window[callbackKey]=function(resp){script.parentNode.removeChild(script);options.onload({type:"load",target:{responseText:resp}});window[callbackKey]=undefined};script.onerror=function(e){script.parentNode.removeChild(script);options.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}});window[callbackKey]=undefined;return false};script.onload=function(e){return false};script.src=options.url+(options.url.indexOf("?")>0?"&":"?")+(options.callbackKey?options.callbackKey:"callback")+"="+callbackKey+"&"+buildQueryString(options.data||{});$document.body.appendChild(script)}else{var xhr=new window.XMLHttpRequest;xhr.open(options.method,options.url,true,options.user,options.password);xhr.onreadystatechange=function(){if(xhr.readyState===4){if(xhr.status>=200&&xhr.status<300)options.onload({type:"load",target:xhr});else options.onerror({type:"error",target:xhr})}};if(options.serialize===JSON.stringify&&options.data&&options.method!=="GET"){xhr.setRequestHeader("Content-Type","application/json; charset=utf-8")}if(options.deserialize===JSON.parse){xhr.setRequestHeader("Accept","application/json, text/*")}if(typeof options.config===FUNCTION){var maybeXhr=options.config(xhr,options);if(maybeXhr!=null)xhr=maybeXhr}var data=options.method==="GET"||!options.data?"":options.data;if(data&&(type.call(data)!=STRING&&data.constructor!=window.FormData)){throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`"}xhr.send(data);return xhr}}function bindData(xhrOptions,data,serialize){if(xhrOptions.method==="GET"&&xhrOptions.dataType!="jsonp"){var prefix=xhrOptions.url.indexOf("?")<0?"?":"&";var querystring=buildQueryString(data);xhrOptions.url=xhrOptions.url+(querystring?prefix+querystring:"")}else xhrOptions.data=serialize(data);return xhrOptions}function parameterizeUrl(url,data){var tokens=url.match(/:[a-z]\w+/gi);if(tokens&&data){for(var i=0;i<tokens.length;i++){var key=tokens[i].slice(1);url=url.replace(tokens[i],data[key]);delete data[key]}}return url}m.request=function(xhrOptions){if(xhrOptions.background!==true)m.startComputation();var deferred=new Deferred;var isJSONP=xhrOptions.dataType&&xhrOptions.dataType.toLowerCase()==="jsonp";var serialize=xhrOptions.serialize=isJSONP?identity:xhrOptions.serialize||JSON.stringify;var deserialize=xhrOptions.deserialize=isJSONP?identity:xhrOptions.deserialize||JSON.parse;var extract=isJSONP?function(jsonp){return jsonp.responseText}:xhrOptions.extract||function(xhr){return xhr.responseText.length===0&&deserialize===JSON.parse?null:xhr.responseText};xhrOptions.method=(xhrOptions.method||"GET").toUpperCase();xhrOptions.url=parameterizeUrl(xhrOptions.url,xhrOptions.data);xhrOptions=bindData(xhrOptions,xhrOptions.data,serialize);xhrOptions.onload=xhrOptions.onerror=function(e){try{e=e||event;var unwrap=(e.type==="load"?xhrOptions.unwrapSuccess:xhrOptions.unwrapError)||identity;var response=unwrap(deserialize(extract(e.target,xhrOptions)),e.target);if(e.type==="load"){if(type.call(response)===ARRAY&&xhrOptions.type){for(var i=0;i<response.length;i++)response[i]=new xhrOptions.type(response[i])}else if(xhrOptions.type)response=new xhrOptions.type(response)}deferred[e.type==="load"?"resolve":"reject"](response)}catch(e){m.deferred.onerror(e);deferred.reject(e)}if(xhrOptions.background!==true)m.endComputation()};ajax(xhrOptions);deferred.promise=propify(deferred.promise,xhrOptions.initialValue);return deferred.promise};m.deps=function(mock){initialize(window=mock||window);return window};m.deps.factory=app;return m}(typeof window!="undefined"?window:{});if(typeof module!="undefined"&&module!==null&&module.exports)module.exports=m;else if(typeof define==="function"&&define.amd)define(function(){return m})},{}],9:[function(require,module,exports){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.moment=factory()})(this,function(){"use strict";var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function setHookCallback(callback){hookCallback=callback}function isArray(input){return Object.prototype.toString.call(input)==="[object Array]"}function isDate(input){return input instanceof Date||Object.prototype.toString.call(input)==="[object Date]"}function map(arr,fn){var res=[],i;for(i=0;i<arr.length;++i){res.push(fn(arr[i],i))}return res}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b){if(hasOwnProp(b,i)){a[i]=b[i]}}if(hasOwnProp(b,"toString")){a.toString=b.toString}if(hasOwnProp(b,"valueOf")){a.valueOf=b.valueOf}return a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function getParsingFlags(m){if(m._pf==null){m._pf=defaultParsingFlags()}return m._pf}function valid__isValid(m){if(m._isValid==null){var flags=getParsingFlags(m);m._isValid=!isNaN(m._d.getTime())&&flags.overflow<0&&!flags.empty&&!flags.invalidMonth&&!flags.nullInput&&!flags.invalidFormat&&!flags.userInvalidated;if(m._strict){m._isValid=m._isValid&&flags.charsLeftOver===0&&flags.unusedTokens.length===0&&flags.bigHour===undefined}}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);if(flags!=null){extend(getParsingFlags(m),flags)}else{getParsingFlags(m).userInvalidated=true}return m}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(typeof from._isAMomentObject!=="undefined"){to._isAMomentObject=from._isAMomentObject}if(typeof from._i!=="undefined"){to._i=from._i}if(typeof from._f!=="undefined"){to._f=from._f}if(typeof from._l!=="undefined"){to._l=from._l}if(typeof from._strict!=="undefined"){to._strict=from._strict}if(typeof from._tzm!=="undefined"){to._tzm=from._tzm}if(typeof from._isUTC!=="undefined"){to._isUTC=from._isUTC}if(typeof from._offset!=="undefined"){to._offset=from._offset}if(typeof from._pf!=="undefined"){to._pf=getParsingFlags(from)}if(typeof from._locale!=="undefined"){to._locale=from._locale}if(momentProperties.length>0){for(i in momentProperties){prop=momentProperties[i];val=from[prop];if(typeof val!=="undefined"){to[prop]=val}}}return to}var updateInProgress=false;function Moment(config){copyConfig(this,config);this._d=new Date(+config._d);if(updateInProgress===false){updateInProgress=true;utils_hooks__hooks.updateOffset(this);updateInProgress=false}}function isMoment(obj){return obj instanceof Moment||obj!=null&&obj._isAMomentObject!=null}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;if(coercedNumber!==0&&isFinite(coercedNumber)){if(coercedNumber>=0){value=Math.floor(coercedNumber)}else{value=Math.ceil(coercedNumber)}}return value}function compareArrays(array1,array2,dontConvert){var len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0,i;for(i=0;i<len;i++){if(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i])){diffs++}}return diffs+lengthDiff}function Locale(){}var locales={};var globalLocale;function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function chooseLocale(names){var i=0,j,next,locale,split;while(i<names.length){split=normalizeLocale(names[i]).split("-");j=split.length;next=normalizeLocale(names[i+1]);next=next?next.split("-"):null;while(j>0){locale=loadLocale(split.slice(0,j).join("-"));if(locale){return locale}if(next&&next.length>=j&&compareArrays(split,next,true)>=j-1){break}j--}i++}return null}function loadLocale(name){var oldLocale=null;if(!locales[name]&&typeof module!=="undefined"&&module&&module.exports){try{oldLocale=globalLocale._abbr;require("./locale/"+name);locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;if(key){if(typeof values==="undefined"){data=locale_locales__getLocale(key)}else{data=defineLocale(key,values)}if(data){globalLocale=data}}return globalLocale._abbr}function defineLocale(name,values){if(values!==null){values.abbr=name;if(!locales[name]){locales[name]=new Locale}locales[name].set(values);locale_locales__getSetGlobalLocale(name);return locales[name]}else{delete locales[name];return null}}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr){key=key._locale._abbr}if(!key){return globalLocale}if(!isArray(key)){locale=loadLocale(key);if(locale){return locale}key=[key]}return chooseLocale(key)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return typeof units==="string"?aliases[units]||aliases[units.toLowerCase()]:undefined}function normalizeObjectUnits(inputObject){var normalizedInput={},normalizedProp,prop;for(prop in inputObject){if(hasOwnProp(inputObject,prop)){normalizedProp=normalizeUnits(prop);if(normalizedProp){normalizedInput[normalizedProp]=inputObject[prop]}}}return normalizedInput}function makeGetSet(unit,keepTime){return function(value){if(value!=null){get_set__set(this,unit,value);utils_hooks__hooks.updateOffset(this,keepTime);return this}else{return get_set__get(this,unit)}}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if(typeof units==="object"){for(unit in units){this.set(unit,units[unit])}}else{units=normalizeUnits(units);if(typeof this[units]==="function"){return this[units](value)}}return this}function zeroFill(number,targetLength,forceSign){var output=""+Math.abs(number),sign=number>=0;while(output.length<targetLength){output="0"+output}return(sign?forceSign?"+":"":"-")+output}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g;var localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;var formatFunctions={};var formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;if(typeof callback==="string"){func=function(){return this[callback]()}}if(token){formatTokenFunctions[token]=func}if(padded){formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}}if(ordinal){formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)}}}function removeFormattingTokens(input){if(input.match(/\[[\s\S]/)){return input.replace(/^\[|\]$/g,"")}return input.replace(/\\/g,"")}function makeFormatFunction(format){var array=format.match(formattingTokens),i,length;for(i=0,length=array.length;i<length;i++){if(formatTokenFunctions[array[i]]){array[i]=formatTokenFunctions[array[i]]}else{array[i]=removeFormattingTokens(array[i])}}return function(mom){var output="";for(i=0;i<length;i++){output+=array[i]instanceof Function?array[i].call(mom,format):array[i]}return output}}function formatMoment(m,format){if(!m.isValid()){return m.localeData().invalidDate()}format=expandFormat(format,m.localeData());if(!formatFunctions[format]){formatFunctions[format]=makeFormatFunction(format)}return formatFunctions[format](m)}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}localFormattingTokens.lastIndex=0;while(i>=0&&localFormattingTokens.test(format)){format=format.replace(localFormattingTokens,replaceLongDateFormatTokens);localFormattingTokens.lastIndex=0;i-=1}return format}var match1=/\d/;var match2=/\d\d/;var match3=/\d{3}/;var match4=/\d{4}/;var match6=/[+-]?\d{6}/;var match1to2=/\d\d?/;var match1to3=/\d{1,3}/;var match1to4=/\d{1,4}/;var match1to6=/[+-]?\d{1,6}/;var matchUnsigned=/\d+/;var matchSigned=/[+-]?\d+/;
var matchOffset=/Z|[+-]\d\d:?\d\d/gi;var matchTimestamp=/[+-]?\d+(\.\d{1,3})?/;var matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;var regexes={};function addRegexToken(token,regex,strictRegex){regexes[token]=typeof regex==="function"?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){if(!hasOwnProp(regexes,token)){return new RegExp(unescapeFormat(token))}return regexes[token](config._strict,config._locale)}function unescapeFormat(s){return s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var tokens={};function addParseToken(token,callback){var i,func=callback;if(typeof token==="string"){token=[token]}if(typeof callback==="number"){func=function(input,array){array[callback]=toInt(input)}}for(i=0;i<token.length;i++){tokens[token[i]]=func}}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{};callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){if(input!=null&&hasOwnProp(tokens,token)){tokens[token](input,config._a,config,token)}}var YEAR=0;var MONTH=1;var DATE=2;var HOUR=3;var MINUTE=4;var SECOND=5;var MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1});addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)});addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)});addUnitAlias("month","M");addRegexToken("M",match1to2);addRegexToken("MM",match1to2,match2);addRegexToken("MMM",matchWord);addRegexToken("MMMM",matchWord);addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1});addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);if(month!=null){array[MONTH]=month}else{getParsingFlags(config).invalidMonth=input}});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");function localeMonths(m){return this._months[m.month()]}var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function localeMonthsShort(m){return this._monthsShort[m.month()]}function localeMonthsParse(monthName,format,strict){var i,mom,regex;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(i=0;i<12;i++){mom=create_utc__createUTC([2e3,i]);if(strict&&!this._longMonthsParse[i]){this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i");this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")}if(!strict&&!this._monthsParse[i]){regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,"");this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")}if(strict&&format==="MMMM"&&this._longMonthsParse[i].test(monthName)){return i}else if(strict&&format==="MMM"&&this._shortMonthsParse[i].test(monthName)){return i}else if(!strict&&this._monthsParse[i].test(monthName)){return i}}}function setMonth(mom,value){var dayOfMonth;if(typeof value==="string"){value=mom.localeData().monthsParse(value);if(typeof value!=="number"){return mom}}dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value));mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth);return mom}function getSetMonth(value){if(value!=null){setMonth(this,value);utils_hooks__hooks.updateOffset(this,true);return this}else{return get_set__get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function checkOverflow(m){var overflow;var a=m._a;if(a&&getParsingFlags(m).overflow===-2){overflow=a[MONTH]<0||a[MONTH]>11?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||a[HOUR]>24||a[HOUR]===24&&(a[MINUTE]!==0||a[SECOND]!==0||a[MILLISECOND]!==0)?HOUR:a[MINUTE]<0||a[MINUTE]>59?MINUTE:a[SECOND]<0||a[SECOND]>59?SECOND:a[MILLISECOND]<0||a[MILLISECOND]>999?MILLISECOND:-1;if(getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||overflow>DATE)){overflow=DATE}getParsingFlags(m).overflow=overflow}return m}function warn(msg){if(utils_hooks__hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+msg)}}function deprecate(msg,fn){var firstTime=true,msgWithStack=msg+"\n"+(new Error).stack;return extend(function(){if(firstTime){warn(msgWithStack);firstTime=false}return fn.apply(this,arguments)},fn)}var deprecations={};function deprecateSimple(name,msg){if(!deprecations[name]){warn(msg);deprecations[name]=true}}utils_hooks__hooks.suppressDeprecationWarnings=false;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;var isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]];var isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]];var aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){getParsingFlags(config).iso=true;for(i=0,l=isoDates.length;i<l;i++){if(isoDates[i][1].exec(string)){config._f=isoDates[i][0]+(match[6]||" ");break}}for(i=0,l=isoTimes.length;i<l;i++){if(isoTimes[i][1].exec(string)){config._f+=isoTimes[i][0];break}}if(string.match(matchOffset)){config._f+="Z"}configFromStringAndFormat(config)}else{config._isValid=false}}function configFromString(config){var matched=aspNetJsonRegex.exec(config._i);if(matched!==null){config._d=new Date(+matched[1]);return}configFromISO(config);if(config._isValid===false){delete config._isValid;utils_hooks__hooks.createFromInputFallback(config)}}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is "+"discouraged and will be removed in upcoming major "+"release. Please refer to "+"https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))});function createDate(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);if(y<1970){date.setFullYear(y)}return date}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));if(y<1970){date.setUTCFullYear(y)}return date}addFormatToken(0,["YY",2],0,function(){return this.year()%100});addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addRegexToken("Y",matchSigned);addRegexToken("YY",match1to2,match2);addRegexToken("YYYY",match1to4,match4);addRegexToken("YYYYY",match1to6,match6);addRegexToken("YYYYYY",match1to6,match6);addParseToken(["YYYY","YYYYY","YYYYYY"],YEAR);addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)});function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4===0&&year%100!==0||year%400===0}utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(toInt(input)>68?1900:2e3)};var getSetYear=makeGetSet("FullYear",false);function getIsLeapYear(){return isLeapYear(this.year())}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addRegexToken("w",match1to2);addRegexToken("ww",match1to2,match2);addRegexToken("W",match1to2);addRegexToken("WW",match1to2,match2);addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day(),adjustedMoment;if(daysToDayOfWeek>end){daysToDayOfWeek-=7}if(daysToDayOfWeek<end-7){daysToDayOfWeek+=7}adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d");return{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}function localeWeek(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week}var defaultLocaleWeek={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(input){var week=this.localeData().week(this);return input==null?week:this.add((input-week)*7,"d")}function getSetISOWeek(input){var week=weekOfYear(this,1,4).week;return input==null?week:this.add((input-week)*7,"d")}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addRegexToken("DDD",match1to3);addRegexToken("DDDD",match3);addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)});function dayOfYearFromWeeks(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var d=createUTCDate(year,0,1).getUTCDay();var daysToAdd;var dayOfYear;d=d===0?7:d;weekday=weekday!=null?weekday:firstDayOfWeek;daysToAdd=firstDayOfWeek-d+(d>firstDayOfWeekOfYear?7:0)-(d<firstDayOfWeek?7:0);dayOfYear=7*(week-1)+(weekday-firstDayOfWeek)+daysToAdd+1;return{year:dayOfYear>0?year:year-1,dayOfYear:dayOfYear>0?dayOfYear:daysInYear(year-1)+dayOfYear}}function getSetDayOfYear(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return input==null?dayOfYear:this.add(input-dayOfYear,"d")}function defaults(a,b,c){if(a!=null){return a}if(b!=null){return b}return c}function currentDateArray(config){var now=new Date;if(config._useUTC){return[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]}return[now.getFullYear(),now.getMonth(),now.getDate()]}function configFromArray(config){var i,date,input=[],currentDate,yearToUse;if(config._d){return}currentDate=currentDateArray(config);if(config._w&&config._a[DATE]==null&&config._a[MONTH]==null){dayOfYearFromWeekInfo(config)}if(config._dayOfYear){yearToUse=defaults(config._a[YEAR],currentDate[YEAR]);if(config._dayOfYear>daysInYear(yearToUse)){getParsingFlags(config)._overflowDayOfYear=true}date=createUTCDate(yearToUse,0,config._dayOfYear);config._a[MONTH]=date.getUTCMonth();config._a[DATE]=date.getUTCDate()}for(i=0;i<3&&config._a[i]==null;++i){config._a[i]=input[i]=currentDate[i]}for(;i<7;i++){config._a[i]=input[i]=config._a[i]==null?i===2?1:0:config._a[i]}if(config._a[HOUR]===24&&config._a[MINUTE]===0&&config._a[SECOND]===0&&config._a[MILLISECOND]===0){config._nextDay=true;config._a[HOUR]=0}config._d=(config._useUTC?createUTCDate:createDate).apply(null,input);if(config._tzm!=null){config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm)}if(config._nextDay){config._a[HOUR]=24}}function dayOfYearFromWeekInfo(config){var w,weekYear,week,weekday,dow,doy,temp;w=config._w;if(w.GG!=null||w.W!=null||w.E!=null){dow=1;doy=4;weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year);week=defaults(w.W,1);weekday=defaults(w.E,1)}else{dow=config._locale._week.dow;doy=config._locale._week.doy;weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year);week=defaults(w.w,1);if(w.d!=null){weekday=w.d;if(weekday<dow){++week}}else if(w.e!=null){weekday=w.e+dow}else{weekday=dow}}temp=dayOfYearFromWeeks(weekYear,week,weekday,doy,dow);config._a[YEAR]=temp.year;config._dayOfYear=temp.dayOfYear}utils_hooks__hooks.ISO_8601=function(){};function configFromStringAndFormat(config){if(config._f===utils_hooks__hooks.ISO_8601){configFromISO(config);return}config._a=[];getParsingFlags(config).empty=true;var string=""+config._i,i,parsedInput,tokens,token,skipped,stringLength=string.length,totalParsedInputLength=0;tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[];for(i=0;i<tokens.length;i++){token=tokens[i];parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0];if(parsedInput){skipped=string.substr(0,string.indexOf(parsedInput));if(skipped.length>0){getParsingFlags(config).unusedInput.push(skipped)}string=string.slice(string.indexOf(parsedInput)+parsedInput.length);totalParsedInputLength+=parsedInput.length}if(formatTokenFunctions[token]){if(parsedInput){getParsingFlags(config).empty=false}else{getParsingFlags(config).unusedTokens.push(token)}addTimeToArrayFromToken(token,parsedInput,config)}else if(config._strict&&!parsedInput){getParsingFlags(config).unusedTokens.push(token)}}getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength;if(string.length>0){getParsingFlags(config).unusedInput.push(string)}if(getParsingFlags(config).bigHour===true&&config._a[HOUR]<=12&&config._a[HOUR]>0){getParsingFlags(config).bigHour=undefined}config._a[HOUR]=meridiemFixWrap(config._locale,config._a[HOUR],config._meridiem);configFromArray(config);checkOverflow(config)}function meridiemFixWrap(locale,hour,meridiem){var isPm;if(meridiem==null){return hour}if(locale.meridiemHour!=null){return locale.meridiemHour(hour,meridiem)}else if(locale.isPM!=null){isPm=locale.isPM(meridiem);if(isPm&&hour<12){hour+=12}if(!isPm&&hour===12){hour=0}return hour}else{return hour}}function configFromStringAndArray(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(config._f.length===0){getParsingFlags(config).invalidFormat=true;config._d=new Date(NaN);return}for(i=0;i<config._f.length;i++){currentScore=0;tempConfig=copyConfig({},config);if(config._useUTC!=null){tempConfig._useUTC=config._useUTC}tempConfig._f=config._f[i];configFromStringAndFormat(tempConfig);if(!valid__isValid(tempConfig)){continue}currentScore+=getParsingFlags(tempConfig).charsLeftOver;currentScore+=getParsingFlags(tempConfig).unusedTokens.length*10;getParsingFlags(tempConfig).score=currentScore;if(scoreToBeat==null||currentScore<scoreToBeat){scoreToBeat=currentScore;bestMoment=tempConfig}}extend(config,bestMoment||tempConfig)}function configFromObject(config){if(config._d){return}var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];configFromArray(config)}function createFromConfig(config){var input=config._i,format=config._f,res;config._locale=config._locale||locale_locales__getLocale(config._l);if(input===null||format===undefined&&input===""){return valid__createInvalid({nullInput:true})}if(typeof input==="string"){config._i=input=config._locale.preparse(input)}if(isMoment(input)){return new Moment(checkOverflow(input))}else if(isArray(format)){configFromStringAndArray(config)}else if(format){configFromStringAndFormat(config)}else if(isDate(input)){config._d=input}else{configFromInput(config)}res=new Moment(checkOverflow(config));if(res._nextDay){res.add(1,"d");res._nextDay=undefined}return res}function configFromInput(config){var input=config._i;if(input===undefined){config._d=new Date}else if(isDate(input)){config._d=new Date(+input)}else if(typeof input==="string"){configFromString(config)}else if(isArray(input)){config._a=map(input.slice(0),function(obj){return parseInt(obj,10)});configFromArray(config)}else if(typeof input==="object"){configFromObject(config)}else if(typeof input==="number"){config._d=new Date(input)}else{utils_hooks__hooks.createFromInputFallback(config)}}function createLocalOrUTC(input,format,locale,strict,isUTC){var c={};if(typeof locale==="boolean"){strict=locale;locale=undefined}c._isAMomentObject=true;c._useUTC=c._isUTC=isUTC;c._l=locale;c._i=input;c._f=format;c._strict=strict;return createFromConfig(c)}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,false)}var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other});var prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other>this?this:other});function pickBy(fn,moments){var res,i;if(moments.length===1&&isArray(moments[0])){moments=moments[0]}if(!moments.length){return local__createLocal()}res=moments[0];for(i=1;i<moments.length;++i){if(moments[i][fn](res)){res=moments[i]}}return res}function min(){var args=[].slice.call(arguments,0);return pickBy("isBefore",args)}function max(){var args=[].slice.call(arguments,0);return pickBy("isAfter",args)}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+seconds*1e3+minutes*6e4+hours*36e5;this._days=+days+weeks*7;this._months=+months+quarters*3+years*12;this._data={};this._locale=locale_locales__getLocale();this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset();var sign="+";if(offset<0){offset=-offset;sign="-"}return sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":");offset("ZZ","");addRegexToken("Z",matchOffset);addRegexToken("ZZ",matchOffset);addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=true;config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=(string||"").match(matchOffset)||[];var chunk=matches[matches.length-1]||[];var parts=(chunk+"").match(chunkOffset)||["-",0,0];var minutes=+(parts[1]*60)+toInt(parts[2]);return parts[0]==="+"?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;if(model._isUTC){res=model.clone();diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res;res._d.setTime(+res._d+diff);utils_hooks__hooks.updateOffset(res,false);return res}else{return local__createLocal(input).local()}return model._isUTC?local__createLocal(input).zone(model._offset||0):local__createLocal(input).local()}function getDateOffset(m){return-Math.round(m._d.getTimezoneOffset()/15)*15}utils_hooks__hooks.updateOffset=function(){};function getSetOffset(input,keepLocalTime){var offset=this._offset||0,localAdjust;if(input!=null){if(typeof input==="string"){input=offsetFromString(input)}if(Math.abs(input)<16){input=input*60}if(!this._isUTC&&keepLocalTime){localAdjust=getDateOffset(this)}this._offset=input;this._isUTC=true;if(localAdjust!=null){this.add(localAdjust,"m")}if(offset!==input){if(!keepLocalTime||this._changeInProgress){add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;utils_hooks__hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?offset:getDateOffset(this)}}function getSetZone(input,keepLocalTime){if(input!=null){if(typeof input!=="string"){input=-input}this.utcOffset(input,keepLocalTime);return this}else{return-this.utcOffset()}}function setOffsetToUTC(keepLocalTime){return this.utcOffset(0,keepLocalTime)}function setOffsetToLocal(keepLocalTime){if(this._isUTC){this.utcOffset(0,keepLocalTime);this._isUTC=false;if(keepLocalTime){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm){this.utcOffset(this._tzm)}else if(typeof this._i==="string"){this.utcOffset(offsetFromString(this._i))}return this}function hasAlignedHourOffset(input){if(!input){input=0}else{input=local__createLocal(input).utcOffset()}return(this.utcOffset()-input)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(this._a){var other=this._isUTC?create_utc__createUTC(this._a):local__createLocal(this._a);return this.isValid()&&compareArrays(this._a,other.toArray())>0}return false}function isLocal(){return!this._isUTC}function isUtcOffset(){return this._isUTC}function isUtc(){return this._isUTC&&this._offset===0}var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;var create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var duration=input,match=null,sign,ret,diffRes;if(isDuration(input)){duration={ms:input._milliseconds,d:input._days,M:input._months}}else if(typeof input==="number"){duration={};if(key){duration[key]=input}else{duration.milliseconds=input}}else if(!!(match=aspNetRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}}else if(!!(match=create__isoRegex.exec(input))){sign=match[1]==="-"?-1:1;duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}}else if(duration==null){duration={}}else if(typeof duration==="object"&&("from"in duration||"to"in duration)){diffRes=momentsDifference(local__createLocal(duration.from),local__createLocal(duration.to));duration={};duration.ms=diffRes.milliseconds;duration.M=diffRes.months}ret=new Duration(duration);if(isDuration(input)&&hasOwnProp(input,"_locale")){ret._locale=input._locale}return ret}create__createDuration.fn=Duration.prototype;function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};res.months=other.month()-base.month()+(other.year()-base.year())*12;if(base.clone().add(res.months,"M").isAfter(other)){--res.months}res.milliseconds=+other-+base.clone().add(res.months,"M");return res}function momentsDifference(base,other){var res;other=cloneWithOffset(other,base);if(base.isBefore(other)){res=positiveMomentsDifference(base,other)}else{res=positiveMomentsDifference(other,base);res.milliseconds=-res.milliseconds;res.months=-res.months}return res}function createAdder(direction,name){return function(val,period){var dur,tmp;if(period!==null&&!isNaN(+period)){deprecateSimple(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period).");tmp=val;val=period;period=tmp}val=typeof val==="string"?+val:val;dur=create__createDuration(val,period);add_subtract__addSubtract(this,dur,direction);return this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=updateOffset==null?true:updateOffset;if(milliseconds){mom._d.setTime(+mom._d+milliseconds*isAdding)}if(days){get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding)}if(months){setMonth(mom,get_set__get(mom,"Month")+months*isAdding)}if(updateOffset){utils_hooks__hooks.updateOffset(mom,days||months)}}var add_subtract__add=createAdder(1,"add");var add_subtract__subtract=createAdder(-1,"subtract");function moment_calendar__calendar(time){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",true),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(format,this,local__createLocal(now)))}function clone(){return new Moment(this)}function isAfter(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this>+input}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return inputMs<+this.clone().startOf(units)}}function isBefore(input,units){var inputMs;units=normalizeUnits(typeof units!=="undefined"?units:"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this<+input}else{inputMs=isMoment(input)?+input:+local__createLocal(input);return+this.clone().endOf(units)<inputMs}}function isBetween(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)}function isSame(input,units){var inputMs;units=normalizeUnits(units||"millisecond");if(units==="millisecond"){input=isMoment(input)?input:local__createLocal(input);return+this===+input}else{inputMs=+local__createLocal(input);return+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units)}}function absFloor(number){if(number<0){return Math.ceil(number)}else{return Math.floor(number)}}function diff(input,units,asFloat){var that=cloneWithOffset(input,this),zoneDelta=(that.utcOffset()-this.utcOffset())*6e4,delta,output;units=normalizeUnits(units);if(units==="year"||units==="month"||units==="quarter"){output=monthDiff(this,that);if(units==="quarter"){output=output/3}else if(units==="year"){output=output/12}}else{delta=this-that;output=units==="second"?delta/1e3:units==="minute"?delta/6e4:units==="hour"?delta/36e5:units==="day"?(delta-zoneDelta)/864e5:units==="week"?(delta-zoneDelta)/6048e5:delta}return asFloat?output:absFloor(output)}function monthDiff(a,b){var wholeMonthDiff=(b.year()-a.year())*12+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),anchor2,adjust;if(b-anchor<0){anchor2=a.clone().add(wholeMonthDiff-1,"months");adjust=(b-anchor)/(anchor-anchor2)}else{anchor2=a.clone().add(wholeMonthDiff+1,"months");adjust=(b-anchor)/(anchor2-anchor)}return-(wholeMonthDiff+adjust)}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function moment_format__toISOString(){var m=this.clone().utc();if(0<m.year()&&m.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}function format(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)}function from(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate()}return create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix)}function fromNow(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)}function to(time,withoutSuffix){if(!this.isValid()){return this.localeData().invalidDate()}return create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix)}function toNow(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)}function locale(key){var newLocaleData;if(key===undefined){return this._locale._abbr}else{newLocaleData=locale_locales__getLocale(key);if(newLocaleData!=null){this._locale=newLocaleData}return this}}var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){if(key===undefined){return this.localeData()}else{return this.locale(key)}});function localeData(){return this._locale}function startOf(units){units=normalizeUnits(units);switch(units){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(units==="week"){this.weekday(0)}if(units==="isoWeek"){this.isoWeekday(1)}if(units==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this}function endOf(units){units=normalizeUnits(units);if(units===undefined||units==="millisecond"){return this}return this.startOf(units).add(1,units==="isoWeek"?"week":units).subtract(1,"ms")}function to_type__valueOf(){return+this._d-(this._offset||0)*6e4}function unix(){return Math.floor(+this/1e3)}function toDate(){return this._offset?new Date(+this):this._d}function toArray(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function moment_valid__isValid(){return valid__isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100});addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100});function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addRegexToken("G",matchSigned);addRegexToken("g",matchSigned);addRegexToken("GG",match1to2,match2);addRegexToken("gg",match1to2,match2);addRegexToken("GGGG",match1to4,match4);addRegexToken("gggg",match1to4,match4);addRegexToken("GGGGG",match1to6,match6);addRegexToken("ggggg",match1to6,match6);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)});addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)});function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}function getSetWeekYear(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return input==null?year:this.add(input-year,"y")}function getSetISOWeekYear(input){var year=weekOfYear(this,1,4).year;return input==null?year:this.add(input-year,"y")}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getWeeksInYear(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)}addFormatToken("Q",0,0,"quarter");addUnitAlias("quarter","Q");addRegexToken("Q",match1);addParseToken("Q",function(input,array){array[MONTH]=(toInt(input)-1)*3});function getSetQuarter(input){return input==null?Math.ceil((this.month()+1)/3):this.month((input-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addRegexToken("D",match1to2);addRegexToken("DD",match1to2,match2);addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient});addParseToken(["D","DD"],DATE);addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0],10)});var getSetDayOfMonth=makeGetSet("Date",true);addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)});addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)});addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)});addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addRegexToken("d",match1to2);addRegexToken("e",match1to2);addRegexToken("E",match1to2);addRegexToken("dd",matchWord);addRegexToken("ddd",matchWord);addRegexToken("dddd",matchWord);addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);if(weekday!=null){week.d=weekday}else{getParsingFlags(config).invalidWeekday=input}});addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});function parseWeekday(input,locale){if(typeof input==="string"){if(!isNaN(input)){input=parseInt(input,10)}else{input=locale.weekdaysParse(input);
if(typeof input!=="number"){return null}}}return input}var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");function localeWeekdays(m){return this._weekdays[m.day()]}var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");function localeWeekdaysShort(m){return this._weekdaysShort[m.day()]}var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function localeWeekdaysMin(m){return this._weekdaysMin[m.day()]}function localeWeekdaysParse(weekdayName){var i,mom,regex;if(!this._weekdaysParse){this._weekdaysParse=[]}for(i=0;i<7;i++){if(!this._weekdaysParse[i]){mom=local__createLocal([2e3,1]).day(i);regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,"");this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")}if(this._weekdaysParse[i].test(weekdayName)){return i}}}function getSetDayOfWeek(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();if(input!=null){input=parseWeekday(input,this.localeData());return this.add(input-day,"d")}else{return day}}function getSetLocaleDayOfWeek(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return input==null?weekday:this.add(input-weekday,"d")}function getSetISODayOfWeek(input){return input==null?this.day()||7:this.day(this.day()%7?input:input-7)}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12});function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");function matchMeridiem(isStrict,locale){return locale._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",match1to2);addRegexToken("h",match1to2);addRegexToken("HH",match1to2,match2);addRegexToken("hh",match1to2,match2);addParseToken(["H","HH"],HOUR);addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input);config._meridiem=input});addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input);getParsingFlags(config).bigHour=true});function localeIsPM(input){return(input+"").toLowerCase().charAt(0)==="p"}var defaultLocaleMeridiemParse=/[ap]\.?m?\.?/i;function localeMeridiem(hours,minutes,isLower){if(hours>11){return isLower?"pm":"PM"}else{return isLower?"am":"AM"}}var getSetHour=makeGetSet("Hours",true);addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addRegexToken("m",match1to2);addRegexToken("mm",match1to2,match2);addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addRegexToken("s",match1to2);addRegexToken("ss",match1to2,match2);addParseToken(["s","ss"],SECOND);var getSetSecond=makeGetSet("Seconds",false);addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)});addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)});function millisecond__milliseconds(token){addFormatToken(0,[token,3],0,"millisecond")}millisecond__milliseconds("SSS");millisecond__milliseconds("SSSS");addUnitAlias("millisecond","ms");addRegexToken("S",match1to3,match1);addRegexToken("SS",match1to3,match2);addRegexToken("SSS",match1to3,match3);addRegexToken("SSSS",matchUnsigned);addParseToken(["S","SS","SSS","SSSS"],function(input,array){array[MILLISECOND]=toInt(("0."+input)*1e3)});var getSetMillisecond=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add;momentPrototype__proto.calendar=moment_calendar__calendar;momentPrototype__proto.clone=clone;momentPrototype__proto.diff=diff;momentPrototype__proto.endOf=endOf;momentPrototype__proto.format=format;momentPrototype__proto.from=from;momentPrototype__proto.fromNow=fromNow;momentPrototype__proto.to=to;momentPrototype__proto.toNow=toNow;momentPrototype__proto.get=getSet;momentPrototype__proto.invalidAt=invalidAt;momentPrototype__proto.isAfter=isAfter;momentPrototype__proto.isBefore=isBefore;momentPrototype__proto.isBetween=isBetween;momentPrototype__proto.isSame=isSame;momentPrototype__proto.isValid=moment_valid__isValid;momentPrototype__proto.lang=lang;momentPrototype__proto.locale=locale;momentPrototype__proto.localeData=localeData;momentPrototype__proto.max=prototypeMax;momentPrototype__proto.min=prototypeMin;momentPrototype__proto.parsingFlags=parsingFlags;momentPrototype__proto.set=getSet;momentPrototype__proto.startOf=startOf;momentPrototype__proto.subtract=add_subtract__subtract;momentPrototype__proto.toArray=toArray;momentPrototype__proto.toDate=toDate;momentPrototype__proto.toISOString=moment_format__toISOString;momentPrototype__proto.toJSON=moment_format__toISOString;momentPrototype__proto.toString=toString;momentPrototype__proto.unix=unix;momentPrototype__proto.valueOf=to_type__valueOf;momentPrototype__proto.year=getSetYear;momentPrototype__proto.isLeapYear=getIsLeapYear;momentPrototype__proto.weekYear=getSetWeekYear;momentPrototype__proto.isoWeekYear=getSetISOWeekYear;momentPrototype__proto.quarter=momentPrototype__proto.quarters=getSetQuarter;momentPrototype__proto.month=getSetMonth;momentPrototype__proto.daysInMonth=getDaysInMonth;momentPrototype__proto.week=momentPrototype__proto.weeks=getSetWeek;momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=getSetISOWeek;momentPrototype__proto.weeksInYear=getWeeksInYear;momentPrototype__proto.isoWeeksInYear=getISOWeeksInYear;momentPrototype__proto.date=getSetDayOfMonth;momentPrototype__proto.day=momentPrototype__proto.days=getSetDayOfWeek;momentPrototype__proto.weekday=getSetLocaleDayOfWeek;momentPrototype__proto.isoWeekday=getSetISODayOfWeek;momentPrototype__proto.dayOfYear=getSetDayOfYear;momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour;momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute;momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond;momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond;momentPrototype__proto.utcOffset=getSetOffset;momentPrototype__proto.utc=setOffsetToUTC;momentPrototype__proto.local=setOffsetToLocal;momentPrototype__proto.parseZone=setOffsetToParsedOffset;momentPrototype__proto.hasAlignedHourOffset=hasAlignedHourOffset;momentPrototype__proto.isDST=isDaylightSavingTime;momentPrototype__proto.isDSTShifted=isDaylightSavingTimeShifted;momentPrototype__proto.isLocal=isLocal;momentPrototype__proto.isUtcOffset=isUtcOffset;momentPrototype__proto.isUtc=isUtc;momentPrototype__proto.isUTC=isUtc;momentPrototype__proto.zoneAbbr=getZoneAbbr;momentPrototype__proto.zoneName=getZoneName;momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth);momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear);momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",getSetZone);var momentPrototype=momentPrototype__proto;function moment__createUnix(input){return local__createLocal(input*1e3)}function moment__createInZone(){return local__createLocal.apply(null,arguments).parseZone()}var defaultCalendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function locale_calendar__calendar(key,mom,now){var output=this._calendar[key];return typeof output==="function"?output.call(mom,now):output}var defaultLongDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"};function longDateFormat(key){var output=this._longDateFormat[key];if(!output&&this._longDateFormat[key.toUpperCase()]){output=this._longDateFormat[key.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)});this._longDateFormat[key]=output}return output}var defaultInvalidDate="Invalid date";function invalidDate(){return this._invalidDate}var defaultOrdinal="%d";var defaultOrdinalParse=/\d{1,2}/;function ordinal(number){return this._ordinal.replace("%d",number)}function preParsePostFormat(string){return string}var defaultRelativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relative__relativeTime(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return typeof output==="function"?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)}function pastFuture(diff,output){var format=this._relativeTime[diff>0?"future":"past"];return typeof format==="function"?format(output):format.replace(/%s/i,output)}function locale_set__set(config){var prop,i;for(i in config){prop=config[i];if(typeof prop==="function"){this[i]=prop}else{this["_"+i]=prop}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}var prototype__proto=Locale.prototype;prototype__proto._calendar=defaultCalendar;prototype__proto.calendar=locale_calendar__calendar;prototype__proto._longDateFormat=defaultLongDateFormat;prototype__proto.longDateFormat=longDateFormat;prototype__proto._invalidDate=defaultInvalidDate;prototype__proto.invalidDate=invalidDate;prototype__proto._ordinal=defaultOrdinal;prototype__proto.ordinal=ordinal;prototype__proto._ordinalParse=defaultOrdinalParse;prototype__proto.preparse=preParsePostFormat;prototype__proto.postformat=preParsePostFormat;prototype__proto._relativeTime=defaultRelativeTime;prototype__proto.relativeTime=relative__relativeTime;prototype__proto.pastFuture=pastFuture;prototype__proto.set=locale_set__set;prototype__proto.months=localeMonths;prototype__proto._months=defaultLocaleMonths;prototype__proto.monthsShort=localeMonthsShort;prototype__proto._monthsShort=defaultLocaleMonthsShort;prototype__proto.monthsParse=localeMonthsParse;prototype__proto.week=localeWeek;prototype__proto._week=defaultLocaleWeek;prototype__proto.firstDayOfYear=localeFirstDayOfYear;prototype__proto.firstDayOfWeek=localeFirstDayOfWeek;prototype__proto.weekdays=localeWeekdays;prototype__proto._weekdays=defaultLocaleWeekdays;prototype__proto.weekdaysMin=localeWeekdaysMin;prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin;prototype__proto.weekdaysShort=localeWeekdaysShort;prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort;prototype__proto.weekdaysParse=localeWeekdaysParse;prototype__proto.isPM=localeIsPM;prototype__proto._meridiemParse=defaultLocaleMeridiemParse;prototype__proto.meridiem=localeMeridiem;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale();var utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if(typeof format==="number"){index=format;format=undefined}format=format||"";if(index!=null){return lists__get(format,index,field,setter)}var i;var out=[];for(i=0;i<count;i++){out[i]=lists__get(format,i,field,setter)}return out}function lists__listMonths(format,index){return list(format,index,"months",12,"month")}function lists__listMonthsShort(format,index){return list(format,index,"monthsShort",12,"month")}function lists__listWeekdays(format,index){return list(format,index,"weekdays",7,"day")}function lists__listWeekdaysShort(format,index){return list(format,index,"weekdaysShort",7,"day")}function lists__listWeekdaysMin(format,index){return list(format,index,"weekdaysMin",7,"day")}locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10,output=toInt(number%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return number+output}});utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale);utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_abs__abs(){var data=this._data;this._milliseconds=mathAbs(this._milliseconds);this._days=mathAbs(this._days);this._months=mathAbs(this._months);data.milliseconds=mathAbs(data.milliseconds);data.seconds=mathAbs(data.seconds);data.minutes=mathAbs(data.minutes);data.hours=mathAbs(data.hours);data.months=mathAbs(data.months);data.years=mathAbs(data.years);return this}function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);duration._milliseconds+=direction*other._milliseconds;duration._days+=direction*other._days;duration._months+=direction*other._months;return duration._bubble()}function duration_add_subtract__add(input,value){return duration_add_subtract__addSubtract(this,input,value,1)}function duration_add_subtract__subtract(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)}function bubble(){var milliseconds=this._milliseconds;var days=this._days;var months=this._months;var data=this._data;var seconds,minutes,hours,years=0;data.milliseconds=milliseconds%1e3;seconds=absFloor(milliseconds/1e3);data.seconds=seconds%60;minutes=absFloor(seconds/60);data.minutes=minutes%60;hours=absFloor(minutes/60);data.hours=hours%24;days+=absFloor(hours/24);years=absFloor(daysToYears(days));days-=absFloor(yearsToDays(years));months+=absFloor(days/30);days%=30;years+=absFloor(months/12);months%=12;data.days=days;data.months=months;data.years=years;return this}function daysToYears(days){return days*400/146097}function yearsToDays(years){return years*146097/400}function as(units){var days;var months;var milliseconds=this._milliseconds;units=normalizeUnits(units);if(units==="month"||units==="year"){days=this._days+milliseconds/864e5;months=this._months+daysToYears(days)*12;return units==="month"?months:months/12}else{days=this._days+Math.round(yearsToDays(this._months/12));switch(units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return days*24+milliseconds/36e5;case"minute":return days*1440+milliseconds/6e4;case"second":return days*86400+milliseconds/1e3;case"millisecond":return Math.floor(days*864e5)+milliseconds;default:throw new Error("Unknown unit "+units)}}}function duration_as__valueOf(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms");var asSeconds=makeAs("s");var asMinutes=makeAs("m");var asHours=makeAs("h");var asDays=makeAs("d");var asWeeks=makeAs("w");var asMonths=makeAs("M");var asYears=makeAs("y");function duration_get__get(units){units=normalizeUnits(units);return this[units+"s"]()}function makeGetter(name){return function(){return this._data[name]}}var duration_get__milliseconds=makeGetter("milliseconds");var seconds=makeGetter("seconds");var minutes=makeGetter("minutes");var hours=makeGetter("hours");var days=makeGetter("days");var months=makeGetter("months");var years=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var round=Math.round;var thresholds={s:45,m:45,h:22,d:26,M:11};function substituteTimeAgo(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}function duration_humanize__relativeTime(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs();var seconds=round(duration.as("s"));var minutes=round(duration.as("m"));var hours=round(duration.as("h"));var days=round(duration.as("d"));var months=round(duration.as("M"));var years=round(duration.as("y"));var a=seconds<thresholds.s&&["s",seconds]||minutes===1&&["m"]||minutes<thresholds.m&&["mm",minutes]||hours===1&&["h"]||hours<thresholds.h&&["hh",hours]||days===1&&["d"]||days<thresholds.d&&["dd",days]||months===1&&["M"]||months<thresholds.M&&["MM",months]||years===1&&["y"]||["yy",years];a[2]=withoutSuffix;a[3]=+posNegDuration>0;a[4]=locale;return substituteTimeAgo.apply(null,a)}function duration_humanize__getSetRelativeTimeThreshold(threshold,limit){if(thresholds[threshold]===undefined){return false}if(limit===undefined){return thresholds[threshold]}thresholds[threshold]=limit;return true}function humanize(withSuffix){var locale=this.localeData();var output=duration_humanize__relativeTime(this,!withSuffix,locale);if(withSuffix){output=locale.pastFuture(+this,output)}return locale.postformat(output)}var iso_string__abs=Math.abs;function iso_string__toISOString(){var Y=iso_string__abs(this.years());var M=iso_string__abs(this.months());var D=iso_string__abs(this.days());var h=iso_string__abs(this.hours());var m=iso_string__abs(this.minutes());var s=iso_string__abs(this.seconds()+this.milliseconds()/1e3);var total=this.asSeconds();if(!total){return"P0D"}return(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":"")}var duration_prototype__proto=Duration.prototype;duration_prototype__proto.abs=duration_abs__abs;duration_prototype__proto.add=duration_add_subtract__add;duration_prototype__proto.subtract=duration_add_subtract__subtract;duration_prototype__proto.as=as;duration_prototype__proto.asMilliseconds=asMilliseconds;duration_prototype__proto.asSeconds=asSeconds;duration_prototype__proto.asMinutes=asMinutes;duration_prototype__proto.asHours=asHours;duration_prototype__proto.asDays=asDays;duration_prototype__proto.asWeeks=asWeeks;duration_prototype__proto.asMonths=asMonths;duration_prototype__proto.asYears=asYears;duration_prototype__proto.valueOf=duration_as__valueOf;duration_prototype__proto._bubble=bubble;duration_prototype__proto.get=duration_get__get;duration_prototype__proto.milliseconds=duration_get__milliseconds;duration_prototype__proto.seconds=seconds;duration_prototype__proto.minutes=minutes;duration_prototype__proto.hours=hours;duration_prototype__proto.days=days;duration_prototype__proto.weeks=weeks;duration_prototype__proto.months=months;duration_prototype__proto.years=years;duration_prototype__proto.humanize=humanize;duration_prototype__proto.toISOString=iso_string__toISOString;duration_prototype__proto.toString=iso_string__toISOString;duration_prototype__proto.toJSON=iso_string__toISOString;duration_prototype__proto.locale=locale;duration_prototype__proto.localeData=localeData;duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString);duration_prototype__proto.lang=lang;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",matchSigned);addRegexToken("X",matchTimestamp);addParseToken("X",function(input,array,config){config._d=new Date(parseFloat(input,10)*1e3)});addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))});utils_hooks__hooks.version="2.10.3";setHookCallback(local__createLocal);utils_hooks__hooks.fn=momentPrototype;utils_hooks__hooks.min=min;utils_hooks__hooks.max=max;utils_hooks__hooks.utc=create_utc__createUTC;utils_hooks__hooks.unix=moment__createUnix;utils_hooks__hooks.months=lists__listMonths;utils_hooks__hooks.isDate=isDate;utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale;utils_hooks__hooks.invalid=valid__createInvalid;utils_hooks__hooks.duration=create__createDuration;utils_hooks__hooks.isMoment=isMoment;utils_hooks__hooks.weekdays=lists__listWeekdays;utils_hooks__hooks.parseZone=moment__createInZone;utils_hooks__hooks.localeData=locale_locales__getLocale;utils_hooks__hooks.isDuration=isDuration;utils_hooks__hooks.monthsShort=lists__listMonthsShort;utils_hooks__hooks.weekdaysMin=lists__listWeekdaysMin;utils_hooks__hooks.defineLocale=defineLocale;utils_hooks__hooks.weekdaysShort=lists__listWeekdaysShort;utils_hooks__hooks.normalizeUnits=normalizeUnits;utils_hooks__hooks.relativeTimeThreshold=duration_humanize__getSetRelativeTimeThreshold;var _moment=utils_hooks__hooks;return _moment})},{}],10:[function(require,module,exports){(function(root,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof exports==="object"){var randomColor=factory();if(typeof module==="object"&&module&&module.exports){exports=module.exports=randomColor}exports.randomColor=randomColor}else{root.randomColor=factory()}})(this,function(){var colorDictionary={};loadColorBounds();var randomColor=function(options){options=options||{};var H,S,B;if(options.count!=null){var totalColors=options.count,colors=[];options.count=null;while(totalColors>colors.length){colors.push(randomColor(options))}options.count=totalColors;return colors}H=pickHue(options);S=pickSaturation(H,options);B=pickBrightness(H,S,options);return setFormat([H,S,B],options)};function pickHue(options){var hueRange=getHueRange(options.hue),hue=randomWithin(hueRange);if(hue<0){hue=360+hue}return hue}function pickSaturation(hue,options){if(options.luminosity==="random"){return randomWithin([0,100])}if(options.hue==="monochrome"){return 0}var saturationRange=getSaturationRange(hue);var sMin=saturationRange[0],sMax=saturationRange[1];switch(options.luminosity){case"bright":sMin=55;break;case"dark":sMin=sMax-10;break;case"light":sMax=55;break}return randomWithin([sMin,sMax])}function pickBrightness(H,S,options){var brightness,bMin=getMinimumBrightness(H,S),bMax=100;switch(options.luminosity){case"dark":bMax=bMin+20;break;case"light":bMin=(bMax+bMin)/2;break;case"random":bMin=0;bMax=100;break}return randomWithin([bMin,bMax])}function setFormat(hsv,options){switch(options.format){case"hsvArray":return hsv;case"hslArray":return HSVtoHSL(hsv);case"hsl":var hsl=HSVtoHSL(hsv);return"hsl("+hsl[0]+", "+hsl[1]+"%, "+hsl[2]+"%)";case"rgbArray":return HSVtoRGB(hsv);case"rgb":var rgb=HSVtoRGB(hsv);return"rgb("+rgb.join(", ")+")";default:return HSVtoHex(hsv)}}function getMinimumBrightness(H,S){var lowerBounds=getColorInfo(H).lowerBounds;for(var i=0;i<lowerBounds.length-1;i++){var s1=lowerBounds[i][0],v1=lowerBounds[i][1];var s2=lowerBounds[i+1][0],v2=lowerBounds[i+1][1];if(S>=s1&&S<=s2){var m=(v2-v1)/(s2-s1),b=v1-m*s1;return m*S+b}}return 0}function getHueRange(colorInput){if(typeof parseInt(colorInput)==="number"){var number=parseInt(colorInput);if(number<360&&number>0){return[number,number]}}if(typeof colorInput==="string"){if(colorDictionary[colorInput]){var color=colorDictionary[colorInput];if(color.hueRange){return color.hueRange}}}return[0,360]}function getSaturationRange(hue){return getColorInfo(hue).saturationRange}function getColorInfo(hue){if(hue>=334&&hue<=360){hue-=360}for(var colorName in colorDictionary){var color=colorDictionary[colorName];if(color.hueRange&&hue>=color.hueRange[0]&&hue<=color.hueRange[1]){return colorDictionary[colorName]}}return"Color not found"}function randomWithin(range){return Math.floor(range[0]+Math.random()*(range[1]+1-range[0]))}function HSVtoHex(hsv){var rgb=HSVtoRGB(hsv);function componentToHex(c){var hex=c.toString(16);return hex.length==1?"0"+hex:hex}var hex="#"+componentToHex(rgb[0])+componentToHex(rgb[1])+componentToHex(rgb[2]);return hex}function defineColor(name,hueRange,lowerBounds){var sMin=lowerBounds[0][0],sMax=lowerBounds[lowerBounds.length-1][0],bMin=lowerBounds[lowerBounds.length-1][1],bMax=lowerBounds[0][1];colorDictionary[name]={hueRange:hueRange,lowerBounds:lowerBounds,saturationRange:[sMin,sMax],brightnessRange:[bMin,bMax]}}function loadColorBounds(){defineColor("monochrome",null,[[0,0],[100,0]]);defineColor("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]);defineColor("orange",[19,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]);defineColor("yellow",[47,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]);defineColor("green",[63,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]);defineColor("blue",[179,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]);defineColor("purple",[258,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]);defineColor("pink",[283,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function HSVtoRGB(hsv){var h=hsv[0];if(h===0){h=1}if(h===360){h=359}h=h/360;var s=hsv[1]/100,v=hsv[2]/100;var h_i=Math.floor(h*6),f=h*6-h_i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),r=256,g=256,b=256;switch(h_i){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=t,g=p,b=v;break;case 5:r=v,g=p,b=q;break}var result=[Math.floor(r*255),Math.floor(g*255),Math.floor(b*255)];return result}function HSVtoHSL(hsv){var h=hsv[0],s=hsv[1]/100,v=hsv[2]/100,k=(2-s)*v;return[h,Math.round(s*v/(k<1?k:2-k)*1e4)/100,k/2*100]}return randomColor})},{}],11:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){currentQueue[queueIndex].run()}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],12:[function(require,module,exports){require("./chatroom")},{"./chatroom":2}]},{},[12]);
